"use strict";(self.webpackChunkDX_Admin_FE=self.webpackChunkDX_Admin_FE||[]).push([[667],{4667:(L,a,n)=>{n.r(a),n.d(a,{ProfileModule:()=>V});var u=n(6895),d=n(4466),c=n(3127),s=n(4006),e=n(4650),p=n(7185),m=n(940),f=n(9106),h=n(629),v=n(8613),g=n(577);const b=function(i){return{stroke:"var(--dxfe-primary-color)",fill:"var(--dxfe-primary-color)",height:i}};function _(i,l){if(1&i&&e._UZ(0,"svg-icon",3),2&i){const t=e.oxw();e.Q6J("svgStyle",e.VKq(1,b,t.heightInRem))}}const Z=function(i){return{stroke:"var(--dxfe-primary-color)",height:i}};function T(i,l){if(1&i&&e._UZ(0,"svg-icon",4),2&i){const t=e.oxw();e.Q6J("svgStyle",e.VKq(1,Z,t.heightInRem))}}const x=function(i){return{"cursor-default":i}};let I=(()=>{class i{constructor(){this.heightInRem="1.5rem",this.alt=!1,this.cursorPointer=!0}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-edit-icon"]],inputs:{heightInRem:"heightInRem",alt:"alt",cursorPointer:"cursorPointer"},decls:3,vars:5,consts:[["type","button",1,"btn",3,"ngClass"],["src","/assets/svg/edit-alt.svg","class","icon",3,"svgStyle",4,"ngIf"],["src","/assets/svg/edit.svg","class","icon",3,"svgStyle",4,"ngIf"],["src","/assets/svg/edit-alt.svg",1,"icon",3,"svgStyle"],["src","/assets/svg/edit.svg",1,"icon",3,"svgStyle"]],template:function(t,o){1&t&&(e.TgZ(0,"button",0),e.YNc(1,_,1,3,"svg-icon",1),e.YNc(2,T,1,3,"svg-icon",2),e.qZA()),2&t&&(e.Q6J("ngClass",e.VKq(3,x,!o.cursorPointer)),e.xp6(1),e.Q6J("ngIf",o.alt),e.xp6(1),e.Q6J("ngIf",!o.alt))},dependencies:[u.mk,u.O5,g.bk],styles:[".btn[_ngcontent-%COMP%]{border:0}"]}),i})();var y=n(8424),C=n(3117),A=n(2439);let U=(()=>{class i{constructor(t,o){this.el=t,this.platformId=o,this.libTelInputOptions={},this.hasError=new e.vpe,this.libTelOutput=new e.vpe,this.countryChange=new e.vpe,this.intlTelInputObject=new e.vpe}ngOnInit(){(0,u.NF)(this.platformId)&&(this.libTelInputOptions={...this.libTelInputOptions,utilsScript:this.getUtilsScript(this.libTelInputOptions)},this.ngTelInput=window.intlTelInput(this.el.nativeElement,{...this.libTelInputOptions}),this.el.nativeElement.addEventListener("countrychange",()=>{this.countryChange.emit(this.ngTelInput.getSelectedCountryData())}),this.intlTelInputObject.emit(this.ngTelInput))}onBlur(){let t=this.isInputValid();if(t){let o=this.ngTelInput.getNumber();this.hasError.emit(t),this.libTelOutput.emit(o)}else this.hasError.emit(t)}isInputValid(){return this.ngTelInput.isValidNumber()}setCountry(t){this.ngTelInput.setCountry(t)}getUtilsScript(t){return t.utilsScript||"https://cdn.jsdelivr.net/npm/intl-tel-input@18.1.6/build/js/utils.js"}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq),e.Y36(e.Lbi))},i.\u0275dir=e.lG2({type:i,selectors:[["","libTelInput",""]],hostBindings:function(t,o){1&t&&e.NdJ("blur",function(){return o.onBlur()})},inputs:{libTelInputOptions:"libTelInputOptions"},outputs:{hasError:"hasError",libTelOutput:"libTelOutput",countryChange:"countryChange",intlTelInputObject:"intlTelInputObject"}}),i})();function S(i,l){1&i&&(e.TgZ(0,"div",31),e._uU(1," Name is required "),e.qZA())}function q(i,l){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,S,2,0,"div",30),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.formValid.fullName||null==t.formValid.fullName.errors?null:t.formValid.fullName.errors.required)}}function D(i,l){1&i&&(e.TgZ(0,"div",31),e._uU(1," Phone Number is required "),e.qZA())}function J(i,l){1&i&&(e.TgZ(0,"span",31),e._uU(1," Minimum 9 Digit required "),e.qZA())}function P(i,l){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,D,2,0,"div",30),e.YNc(2,J,2,0,"span",30),e.qZA()),2&i){const t=e.oxw(2);let o;e.xp6(1),e.Q6J("ngIf",null==t.formValid.mobile||null==t.formValid.mobile.errors?null:t.formValid.mobile.errors.required),e.xp6(1),e.Q6J("ngIf",null==(o=t.form.get("mobile"))?null:o.hasError("minlength"))}}function M(i,l){if(1&i&&(e.TgZ(0,"div",3)(1,"div",32)(2,"div",33)(3,"div",34),e._UZ(4,"input",35),e.TgZ(5,"label",36),e._uU(6),e.qZA()()()(),e.TgZ(7,"div",32)(8,"div",37)(9,"div",38)(10,"p"),e._uU(11,"From"),e.qZA(),e._UZ(12,"input",39),e.qZA()()(),e.TgZ(13,"div",32)(14,"div",37)(15,"div",38)(16,"p"),e._uU(17,"To"),e.qZA(),e._UZ(18,"input",40),e.qZA()()()()),2&i){const t=l.$implicit;e.xp6(4),e.Q6J("checked",t.selected),e.xp6(2),e.hij(" ",null==t.day[0]?null:t.day[0].lookupName," "),e.xp6(6),e.Q6J("value",t.fromTime),e.xp6(6),e.Q6J("value",t.fromTime)}}const k=function(){return["jo","sa"]},w=function(i){return{initialCountry:"jo",preferredCountries:i}};function Q(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",3)(1,"form",4)(2,"div",5)(3,"div",6)(4,"h3"),e._uU(5,"Account Information"),e.qZA()(),e.TgZ(6,"div",7)(7,"div",3)(8,"div",8)(9,"div",9)(10,"label"),e._uU(11,"Full Name*"),e.qZA(),e._UZ(12,"input",10),e.TgZ(13,"app-edit-icon",11),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.editFullname())}),e.qZA()(),e.YNc(14,q,2,1,"div",12),e.qZA(),e.TgZ(15,"div",8)(16,"div",9)(17,"label"),e._uU(18,"Email*"),e.qZA(),e._UZ(19,"input",13),e.qZA()(),e.TgZ(20,"div",8)(21,"div",14)(22,"label"),e._uU(23,"Phone Number"),e.qZA(),e.TgZ(24,"div")(25,"input",15),e.NdJ("input",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.limitMobileLength())}),e.qZA()(),e.TgZ(26,"app-edit-icon",11),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.editMobile())}),e.qZA()(),e.YNc(27,P,3,2,"div",12),e.qZA(),e.TgZ(28,"div",8)(29,"div",9)(30,"label"),e._uU(31,"Branch Name "),e.qZA(),e._UZ(32,"input",16),e.qZA()(),e.TgZ(33,"div",8)(34,"div",9)(35,"label"),e._uU(36,"Register Name "),e.qZA(),e._UZ(37,"input",16),e.qZA()(),e.TgZ(38,"div",8)(39,"div",9)(40,"label"),e._uU(41,"Register No."),e.qZA(),e._UZ(42,"input",16),e.qZA()()()()(),e.TgZ(43,"div",5)(44,"div",17)(45,"button",18),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.reset())}),e._uU(46,"Cancel"),e.qZA(),e.TgZ(47,"button",19),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.editUser())}),e._uU(48," Update Profile "),e.qZA()()()(),e.TgZ(49,"div",5)(50,"div",6)(51,"h3"),e._uU(52,"Working Hours"),e.qZA()(),e.TgZ(53,"div",7),e.YNc(54,M,19,4,"div",20),e.qZA()(),e.TgZ(55,"div",5)(56,"div",6)(57,"h3"),e._uU(58,"Contract"),e.qZA()(),e.TgZ(59,"div",7)(60,"div",3)(61,"div",8)(62,"div",9)(63,"label"),e._uU(64,"Start Date"),e.qZA(),e._UZ(65,"input",21),e.ALo(66,"date"),e.qZA()(),e.TgZ(67,"div",8)(68,"div",9)(69,"label"),e._uU(70,"End Date"),e.qZA(),e._UZ(71,"input",22),e.ALo(72,"date"),e.qZA()()()()(),e.TgZ(73,"div",5)(74,"div",6)(75,"h3"),e._uU(76,"Role"),e.qZA()(),e.TgZ(77,"div",7)(78,"div",3)(79,"div",8)(80,"div",9),e._UZ(81,"input",23),e.qZA()(),e.TgZ(82,"div",24)(83,"div",25),e._UZ(84,"input",26),e.TgZ(85,"label",27),e._uU(86," indoor "),e.qZA()(),e.TgZ(87,"div",25),e._UZ(88,"input",28),e.TgZ(89,"label",29),e._uU(90," outdoor "),e.qZA()()()()()()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.form),e.xp6(12),e.Q6J("heightInRem","1.25rem")("alt",t.isShowFullName)("cursorPointer",!t.isShowFullName),e.xp6(1),e.Q6J("ngIf",t.formValid.fullName.invalid),e.xp6(5),e.Q6J("value",t.userDetails.email),e.xp6(6),e.Q6J("libTelInputOptions",e.VKq(30,w,e.DdM(29,k))),e.xp6(1),e.Q6J("heightInRem","1.25rem")("alt",t.isShowMobile)("cursorPointer",!t.isShowMobile),e.xp6(1),e.Q6J("ngIf",t.formValid.mobile.invalid),e.xp6(5),e.Q6J("value",null==t.userDetails||null==t.userDetails.branch?null:t.userDetails.branch.branchName),e.xp6(5),e.Q6J("value",null==t.userDetails||null==t.userDetails.register?null:t.userDetails.register.registersName),e.xp6(5),e.Q6J("value",null==t.userDetails||null==t.userDetails.register?null:t.userDetails.register.registersId),e.xp6(5),e.Q6J("disabled",!t.isShowFullName&&!t.isShowMobile),e.xp6(7),e.Q6J("ngForOf",t.userDetails.userWorkingHours),e.xp6(11),e.Q6J("value",e.xi3(66,23,t.userDetails.contractStartDate,"dd/MM/yyyy")),e.xp6(6),e.Q6J("value",e.xi3(72,26,t.userDetails.contractEndDate,"dd/MM/yyyy")),e.xp6(10),e.Q6J("value",t.userDetails.role.name),e.xp6(3),e.Q6J("value",t.userDetails.indoor)("checked",t.userDetails.indoor),e.xp6(4),e.Q6J("value",t.userDetails.outdoor)("checked",t.userDetails.outdoor)}}function O(i,l){1&i&&e._UZ(0,"app-loading")}const E=[{path:"",component:(()=>{class i{constructor(t,o,r,Y,j,R){this.fb=t,this.toastrService=o,this.headerService=r,this.sidebarService=Y,this.authService=j,this.userService=R,this.loading=!1,this.isShowFullName=!1,this.isShowMobile=!1}ngOnInit(){this.headerService.setTitle("Profile"),this.sidebarService.emitEvent({select:{navLink:{id:"profile",name:"profile",url:"/profile"},silent:!0}}),this.form=this.fb.group({userId:["",s.kI.required],fullName:["",s.kI.required],mobile:["",[s.kI.required,s.kI.minLength(9)]]}),this.reset(),this.fetchData()}fetchData(){this.loading=!0,this.authService.getLoggedUserDetails().subscribe(t=>{t?.isSuccess&&(this.userDetails=t.data,this.userDetails&&(this.form.get("userId")?.patchValue(this.authService.userId),this.form.get("fullName")?.patchValue(this.userDetails.fullName),this.form.get("mobile")?.patchValue(this.userDetails?.mobile)))}).add(()=>this.loading=!1)}limitMobileLength(){const o=this.form.get("mobile");o?.value&&o?.value.length>9&&o.setValue(o.value.slice(0,9))}editUser(){this.form.valid&&this.userService.updateUser(this.form.value).subscribe({next:t=>{t.isSuccess&&(this.reset(),this.toastrService.success("Updated successfully"))},error:t=>{const o=t?.error?.errors?.map(r=>r.ErrorMessageEn)||[];this.toastrService.error(o.length?o.join("<br>"):"Update failed","",{enableHtml:!0})}})}reset(){this.form.controls.fullName.disable(),this.isShowFullName=!1,this.form.controls.mobile.disable(),this.isShowMobile=!1,this.fetchData()}editFullname(){this.isShowFullName||(this.isShowFullName=!0,this.form.controls.fullName.enable())}editMobile(){this.isShowMobile||(this.isShowMobile=!0,this.form.controls.mobile.enable())}get formValid(){return this.form.controls}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(s.qu),e.Y36(p._W),e.Y36(m.r),e.Y36(f.P),e.Y36(h.e),e.Y36(v.K))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-profile"]],decls:4,vars:2,consts:[[1,"card-page"],["class","row",4,"ngIf","ngIfElse"],["loadingTemplate",""],[1,"row"],[3,"formGroup"],[1,"col-md-12"],[1,"page-title"],[1,"card-form","position-relative"],[1,"col-md-4"],[1,"form-group","overflow-hidden","position-relative"],["type","text","placeholder","","formControlName","fullName","alphabetOnly","","required","",1,"form-control"],[1,"btn-floating",3,"heightInRem","alt","cursorPointer","click"],[4,"ngIf"],["type","text","placeholder","email","disabled","",1,"form-control",3,"value"],[1,"form-group","position-relative"],["type","text","placeholder","7 9012 3456","libTelInput","","formControlName","mobile","numbersOnly","",1,"form-control",3,"libTelInputOptions","input"],["type","text","disabled","",1,"form-control",3,"value"],[1,"btns-group"],["type","button",1,"btn","btn-cancel",3,"click"],["type","button",1,"btn","btn-save",3,"disabled","click"],["class","row",4,"ngFor","ngForOf"],["type","text","placeholder","","disabled","",1,"form-control",3,"value"],["type","text","placeholder"," ","disabled","",1,"form-control",3,"value"],["name","fullName","type","text","disabled","",1,"form-control",3,"value"],[1,"col-md-4",2,"padding-top","15px"],[1,"form-check","form-check-inline"],["type","checkbox","id","indoor","disabled","",1,"form-check-input",3,"value","checked"],["for","indoor",1,"form-check-label"],["type","checkbox","id","outdoor","disabled","",1,"form-check-input",3,"value","checked"],["for","outdoor",1,"form-check-label"],["class","error",4,"ngIf"],[1,"error"],[1,"col-sm-4"],[1,"form-group","day-active"],[1,"form-check","form-switch","justify-content-between"],["type","checkbox","role","switch","id","flexSwitchCheckDefault","disabled","",1,"form-check-input",3,"checked"],["for",""],[1,""],[1,"from-to-time"],["type","time","name","fromTime","disabled","",1,"form-control",3,"value"],["type","time","name","toTime","disabled","",1,"form-control",3,"value"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0),e.YNc(1,Q,91,32,"div",1),e.qZA(),e.YNc(2,O,1,0,"ng-template",null,2,e.W1O)),2&t){const r=e.MAs(3);e.xp6(1),e.Q6J("ngIf",!o.loading)("ngIfElse",r)}},dependencies:[u.sg,u.O5,s._Y,s.Fj,s.JJ,s.JL,s.Q7,s.sg,s.u,I,y.N,C.Y,A.A,U,u.uU],styles:[".btn-floating[_ngcontent-%COMP%]{position:absolute;bottom:8px;right:0;border:0}"]}),i})()}];let F=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[c.Bz.forChild(E),c.Bz]}),i})(),V=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[u.ez,F,d.m]}),i})()}}]);