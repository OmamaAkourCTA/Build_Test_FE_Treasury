"use strict";(self.webpackChunkDX_Admin_FE=self.webpackChunkDX_Admin_FE||[]).push([[139],{3139:(Nt,D,c)=>{c.r(D),c.d(D,{CreditCardsModule:()=>yt});var u=c(6895),L=c(7705),w=c(529),F=c(4466),s=c(4006),m=c(3127),e=c(4650),v=c(940),P=c(9106),O=c(5861),Z=c(7579),g=c(8372),h=c(1884),_=c(2722),A=c(4128),B=c(8219),T=c(1265),N=c(1785),f=c(4349),x=c(9973),p=c(6573),k=c(5746);function j(n,r){if(1&n&&(e.TgZ(0,"div",68)(1,"div",69)(2,"div",2)(3,"div",70),e._UZ(4,"img",71),e.qZA(),e.TgZ(5,"div",72)(6,"span",73),e._uU(7),e.qZA(),e._UZ(8,"br"),e.TgZ(9,"span",74),e._uU(10),e.ALo(11,"number"),e.qZA()()()()()),2&n){const t=r.$implicit;e.xp6(4),e.s9C("src",t.provider.imageFile,e.LSH),e.xp6(3),e.hij("Total No . ",t.cardsCount," "),e.xp6(3),e.hij("",e.xi3(11,3,t.total,"1.3-3")," JOD")}}function Q(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"i",75),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.removeCollectionDateFilter())}),e.qZA()}}function Y(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",17)(1,"div",7)(2,"button",8),e._UZ(3,"i",9),e.qZA(),e._UZ(4,"input",76),e.TgZ(5,"button",11),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.removeInvoiceFilter())}),e._UZ(6,"i",12),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(4),e.Q6J("formControl",t.searchText),e.xp6(1),e.Q6J("hidden",null==t.searchText.value)}}function G(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",17)(1,"div",7)(2,"button",8),e._UZ(3,"i",9),e.qZA(),e.TgZ(4,"input",77),e.NdJ("input",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.inputvalue(o))}),e.qZA(),e.TgZ(5,"button",11),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.removeCommissionFilter())}),e._UZ(6,"i",12),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(4),e.Q6J("formControl",t.CommissionRatiochange),e.xp6(1),e.Q6J("hidden",null==t.CommissionRatiochange.value)}}function V(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",17)(1,"div",7)(2,"button",8),e._UZ(3,"i",9),e.qZA(),e.TgZ(4,"input",78),e.NdJ("input",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.validateInput(o))}),e.qZA(),e.TgZ(5,"button",11),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.removeAmountFilter())}),e._UZ(6,"i",12),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(4),e.Q6J("formControl",t.amountchange),e.xp6(1),e.Q6J("hidden",null==t.amountchange.value)}}function H(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",17)(1,"div",7)(2,"button",8),e._UZ(3,"i",9),e.qZA(),e.TgZ(4,"input",79),e.NdJ("input",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.validateNumberInput(o))}),e.qZA(),e.TgZ(5,"button",11),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.removeSectionFilter())}),e._UZ(6,"i",12),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(4),e.Q6J("formControl",t.SessionNumberchange),e.xp6(1),e.Q6J("hidden",null==t.SessionNumberchange.value)}}function E(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",17)(1,"div",7)(2,"button",8),e._UZ(3,"i",9),e.qZA(),e.TgZ(4,"input",80),e.NdJ("input",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.validateInput(o))}),e.qZA(),e.TgZ(5,"button",11),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.removeNetAmountFilter())}),e._UZ(6,"i",12),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(4),e.Q6J("formControl",t.netamountchange),e.xp6(1),e.Q6J("hidden",null==t.netamountchange.value)}}function $(n,r){1&n&&(e.TgZ(0,"span"),e._uU(1,"All"),e.qZA())}function z(n,r){if(1&n&&(e.TgZ(0,"div",87),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.xp6(1),e.hij(" ",t+","," ")}}function K(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"a",29)(1,"input",88),e.NdJ("change",function(o){const l=e.CHM(t).$implicit,d=e.oxw(2);return e.KtG(d.handleCategoryChange3(l,o))}),e.qZA(),e._uU(2),e.qZA()}if(2&n){const t=r.$implicit;e.xp6(1),e.Q6J("value",t.branchId),e.xp6(1),e.hij(" \xa0 ",null==t?null:t.branchName," ")}}function X(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",17)(1,"button",81),e._uU(2," Branch : "),e.YNc(3,$,2,0,"span",82),e.YNc(4,z,2,1,"div",83),e._UZ(5,"i",84),e.TgZ(6,"i",75),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.removebranchFilter())}),e.qZA()(),e.TgZ(7,"ul",85)(8,"li"),e.YNc(9,K,3,2,"a",86),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(3),e.Q6J("ngIf",0==t.newDropdownbranch.length),e.xp6(1),e.Q6J("ngForOf",t.newDropdownbranch),e.xp6(5),e.Q6J("ngForOf",t.branch)}}function W(n,r){1&n&&(e.TgZ(0,"span"),e._uU(1,"All"),e.qZA())}function ee(n,r){if(1&n&&(e.TgZ(0,"div",87),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.xp6(1),e.hij(" ",t+","," ")}}function te(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"a",29)(1,"input",88),e.NdJ("change",function(o){const l=e.CHM(t).$implicit,d=e.oxw(2);return e.KtG(d.handleCategoryChange4(l,o))}),e.qZA(),e._uU(2),e.qZA()}if(2&n){const t=r.$implicit;e.xp6(1),e.Q6J("value",t.id),e.xp6(1),e.hij(" \xa0 ",null==t?null:t.registersName," ")}}function ie(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",17)(1,"button",89),e._uU(2," Register : "),e.YNc(3,W,2,0,"span",82),e.YNc(4,ee,2,1,"div",83),e._UZ(5,"i",84),e.TgZ(6,"i",75),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.removeregisterFilter())}),e.qZA()(),e.TgZ(7,"ul",90)(8,"li"),e.YNc(9,te,3,2,"a",86),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(3),e.Q6J("ngIf",0==t.newDropdownregister.length),e.xp6(1),e.Q6J("ngForOf",t.newDropdownregister),e.xp6(5),e.Q6J("ngForOf",t.register)}}function ne(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",17)(1,"div",7)(2,"button",91),e._UZ(3,"i",9),e.qZA(),e._UZ(4,"input",92),e.TgZ(5,"button",93),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.removeMachineIdFilter())}),e._UZ(6,"i",12),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(4),e.Q6J("formControl",t.machineId),e.xp6(1),e.Q6J("hidden",null==t.machineId.value)}}function oe(n,r){if(1&n&&e._uU(0),2&n){const t=r.row;e.hij(" ",null==t.provider?null:t.provider.providerName," ")}}function ae(n,r){if(1&n&&(e._uU(0),e.ALo(1,"date")),2&n){const t=r.row;e.hij(" ",e.lcZ(1,1,null==t?null:t.collectionAt)," ")}}function le(n,r){if(1&n&&e._uU(0),2&n){const t=r.row;e.hij(" ",null==t.branch?null:t.branch.branchName," ")}}function re(n,r){if(1&n&&e._uU(0),2&n){const t=r.row;e.hij(" ",null==t.register?null:t.register.registersName," ")}}function se(n,r){if(1&n&&(e.TgZ(0,"div",94)(1,"span"),e._uU(2),e.qZA(),e._UZ(3,"img",95),e.qZA()),2&n){const t=r.row;e.xp6(2),e.Oqu(null==t||null==t.cardType||null==t.cardType.translations[0]?null:t.cardType.translations[0].lookupName),e.xp6(1),e.s9C("src",null==t.cardType?null:t.cardType.lookupImage,e.LSH)}}function ce(n,r){if(1&n&&(e._uU(0),e.ALo(1,"number")),2&n){const t=r.row;e.hij(" ",e.xi3(1,1,null==t?null:t.cardCollectionJod,"1.3-3")," JOD ")}}function de(n,r){if(1&n&&(e._uU(0),e.ALo(1,"number")),2&n){const t=r.row;e.hij(" ",(null==t?null:t.commissionAmount)&&e.xi3(1,1,null==t?null:t.commissionAmount,"2.3-3")+" JOD"||"-"," ")}}function ue(n,r){if(1&n&&e._uU(0),2&n){const t=r.row;e.hij(" ",(30001==(null==t||null==t.statusObj?null:t.statusObj.lookupId)?"-":(null==t?null:t.commissionRatio)+" %")||0," ")}}function pe(n,r){if(1&n&&(e._uU(0),e.ALo(1,"number")),2&n){const t=r.row;e.hij(" ",30001==(null==t||null==t.statusObj?null:t.statusObj.lookupId)?"-":e.xi3(1,1,null==t?null:t.cardCollectionJodNet,"1.3-3")+" JOD"," ")}}function me(n,r){if(1&n&&(e._uU(0),e.ALo(1,"date")),2&n){const t=r.row;e.hij(" ",e.xi3(1,1,null==t?null:t.cardBankDepositDate,"mediumDate")||"-"," ")}}function ge(n,r){if(1&n&&(e.TgZ(0,"p",96),e._uU(1),e.qZA()),2&n){const t=r.row;e.Udp("color",null==t||null==t.statusObj?null:t.statusObj.lookupTextColor)("background-color",null==t||null==t.statusObj?null:t.statusObj.lookupBGColor),e.xp6(1),e.hij(" ",null==t||null==t.statusObj||null==t.statusObj.translations?null:t.statusObj.translations[0].lookupName," ")}}function he(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"i",97),e.NdJ("click",function(){const a=e.CHM(t).row,l=e.oxw();return e.KtG(l.gotopaymentdetails(a.ordersCardsCollectionId))}),e.qZA()}}const _e=function(){return{containerClass:"theme-red",isAnimated:!0,showClearButton:!0}};let fe=(()=>{class n{constructor(t,i,o,a,l){this._excelService=t,this.creditcardservice=i,this.router=o,this.headerService=a,this._helperService=l,this.searchChequeText=new s.NI(null),this.machineId=new s.NI(null),this.searchText=new s.NI(null),this.amountchange=new s.NI(null),this.SessionNumberchange=new s.NI(null),this.netamountchange=new s.NI(null),this.unsubscribe=new Z.x,this.CommissionRatiochange=new s.NI(0),this.tableColumns=[],this.searchChequeNo="",this.searchCustomerNo="",this.loading=!1,this.chequeList=[],this.dropDownbankId=[],this.cardlist=[],this.branch=[],this.register=[],this.carddetial=[],this.totalAllRecordsCount=0,this.page=1,this.total=0,this.limit=6,this.sort=1,this.startDate="",this.tableConfig={paging:!0,filter:{Sort:1,PageSize:this.limit}},this.isMachineId=!1,this.newDropdownbank=[],this.bank=!1,this.dueDate=!1,this.RegisterName=!1,this.BranchName=!1,this.NetAmount=!1,this.Amount=!1,this.SessionNumber=!1,this.Commission=!1,this.Invoice=!1,this.newDropdownbranch=[],this.dropDownbranchId=[],this.newDropdownregister=[],this.dropDownregisterId=[]}ngOnInit(){this.headerService.setTitle("Credit Cards Payments "),this.initTableColumns(),this.getdata(),this.gettable(),this.searchChequeText.valueChanges.pipe((0,g.b)(300),(0,h.x)(),(0,_.R)(this.unsubscribe)).subscribe(t=>{const i=t||"";(i?.length>=3||!i?.length&&this.tableConfig.filter.Last4digits?.length)&&(this.tableConfig.filter.Last4digits=i,this.page=1,this.gettable())}),this.machineId.valueChanges.pipe((0,g.b)(300),(0,h.x)(),(0,_.R)(this.unsubscribe)).subscribe(t=>{const i=t||"";(i?.length>=3||!i?.length&&this.tableConfig.filter.machineId?.length)&&(this.tableConfig.filter.machineId=i,this.page=1,this.gettable())}),this.searchText.valueChanges.pipe((0,g.b)(300),(0,h.x)(),(0,_.R)(this.unsubscribe)).subscribe(t=>{const i=t||"";(i?.length>=3||!i?.length&&this.tableConfig.filter.MachineReceipt?.length)&&(this.tableConfig.filter.MachineReceipt=i,this.page=1,this.gettable())}),this.amountchange.valueChanges.pipe((0,g.b)(300),(0,h.x)(),(0,_.R)(this.unsubscribe)).subscribe(t=>{const i=t||"";(i?.length>=0||!i?.length&&this.tableConfig.filter.Amount?.length)&&(this.tableConfig.filter.Amount=i,this.page=1,this.gettable())}),this.SessionNumberchange.valueChanges.pipe((0,g.b)(300),(0,h.x)(),(0,_.R)(this.unsubscribe)).subscribe(t=>{const i=t||"";if(i?.length>=0||!i?.length&&this.tableConfig.filter.SessionNumber?.length){let o=parseFloat(i);isNaN(o)||(this.tableConfig.filter.RegisterSessionId=o),this.page=1,this.gettable()}}),this.netamountchange.valueChanges.pipe((0,g.b)(300),(0,h.x)(),(0,_.R)(this.unsubscribe)).subscribe(t=>{const i=t||"";(i?.length>=0||!i?.length&&this.tableConfig.filter.NetAmount?.length)&&(this.tableConfig.filter.NetAmount=i,this.page=1,this.gettable())})}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}getCardsForExport(){this.loading=!0,this.tableConfig.filter.PageNo=this.page-1,this.tableConfig.filter.PageSize=1e4,this.creditcardservice.GetTable(this.tableConfig.filter).subscribe(t=>{t&&(this.generateExcelExport(t.data),this.tableConfig.filter.PageSize=this.limit)}).add(()=>this.loading=!1)}generateExcelExport(t){var i=this;return(0,O.Z)(function*(){const o={fileName:"Card_Transactions",mainHeading:"",sections:[{heading:[],headerStyle:{bold:!0,size:12,color:{argb:"ff000000"},fgColor:{argb:"ffe7e6e6"}},headers:["Last 4 Digit","Provider","Merchant ID","Machine Receipt Number","Collection Date","Branch Name","Ragister Name","Card Type","Amount","Commission Ratio","Commission Amount","Net Amount","Bank Deposit Date","Session Number","Status"],mainKeyMapping:["cardLast4Digits","provider.providerName","machineID","machineReceiptNumber","collectionAt","branch.branchName","register.registersName","cardType.translations[0].lookupName","cardCollectionJod","commissionRatio","commissionAmount","cardCollectionJodNet","cardBankDepositDate","registerSessionId","statusObj.translations[0].lookupName"],data:t=t.map(l=>({...l,collectionAt:i._helperService.dateFormate(l?.collectionAt),cardBankDepositDate:i._helperService.dateFormate(l?.cardBankDepositDate)}))}]};yield i._excelService.exportToExcelJs1(o)})()}initTableColumns(){this.tableColumns=[{key:"cardLast4Digits",label:"Last 4 Digit",canSort:!0},{key:"provider",label:"Provider",canSort:!0},{key:"machineID",label:"Merchant ID"},{key:"machineReceiptNumber",label:"Machine Receipt Number",canSort:!0},{key:"collectionAt",label:"Collection Date",canSort:!0},{key:"branch",label:"Branch Name",canSort:!0},{key:"registers",label:"Ragister Name",canSort:!0},{key:"cardType",label:"Card Type",canSort:!0},{key:"cardCollectionJod",label:"Amount",canSort:!0},{key:"commissionRatio",label:"Commission Ratio",canSort:!0},{key:"commissionAmount",label:"Commission Amount"},{key:"cardCollectionJodNet",label:"Net Amount",canSort:!0},{key:"cardBankDepositDate",label:"Bank Deposit Date"},{key:"registerSessionId",label:"Session Number",canSort:!0},{key:"statusObj",label:"Status",canSort:!0},{key:"Action",label:"Action",canSort:!0}]}onSortChange(t){if(t?.direction&&t?.column)switch(t.column){case"cardLast4Digits":this.tableConfig.filter.Sort="desc"===t.direction?3:2;break;case"provider":this.tableConfig.filter.Sort="desc"===t.direction?5:4;break;case"machineReceiptNumber":this.tableConfig.filter.Sort="desc"===t.direction?7:6;break;case"collectionAt":this.tableConfig.filter.Sort="desc"===t.direction?9:8;break;case"branch":this.tableConfig.filter.Sort="desc"===t.direction?11:10;break;case"registers":this.tableConfig.filter.Sort="desc"===t.direction?13:12;break;case"cardType":this.tableConfig.filter.Sort="desc"===t.direction?15:14;break;case"cardCollectionJod":this.tableConfig.filter.Sort="desc"===t.direction?17:16;break;case"commission":this.tableConfig.filter.Sort="desc"===t.direction?19:18;break;case"cardCollectionJodNet":this.tableConfig.filter.Sort="desc"===t.direction?21:20;break;case"registerSessionId":this.tableConfig.filter.Sort="desc"===t.direction?23:22;break;case"statusObj":this.tableConfig.filter.Sort="desc"===t.direction?25:24;break;case"Action":this.tableConfig.filter.Sort="desc"===t.direction?27:26}else this.tableConfig.filter.Sort=1;this.gettable()}getdata(){const t=this.creditcardservice.GetProviders({pageSize:1e3,status:2001}),i=this.creditcardservice.GetCards(),o=this.creditcardservice.GetBranch(this.tableConfig.filter),a=this.creditcardservice.GetRegister(this.tableConfig.filter),l=this.creditcardservice.Getcard();(0,A.D)([t,i,o,a,l]).subscribe(([d,b,y,M,S])=>{d&&(this.provider=d.data||[]),b&&(this.cardlist=b.data||[]),y&&(this.branch=y.data||[]),M&&(this.register=M.data||[]),S&&(this.carddetial=S.data||[])},d=>{console.error(d)},()=>{this.loading=!1})}gettable(){this.loading=!0,this.tableConfig.filter.PageNo=this.page-1,this.creditcardservice.GetTable(this.tableConfig.filter).subscribe(t=>{t&&(this.chequeList=t.data,this.totalAllRecordsCount=t.totalRecordCount,this.total=t.totalRecordCount)}).add(()=>this.loading=!1)}onPageChange(t){console.log(t),this.page=t,this.gettable()}removelast4Filter(){this.searchChequeText.setValue(null),this.tableConfig.filter.Last4digits="",this.page=1,this.gettable()}removebankFilter(){this.newDropdownbank=[],this.dropDownbankId=[],this.bank=!1,this.page=1,this.gettable()}removeInvoiceFilter(){this.searchText.setValue(null),this.tableConfig.filter.MachineReceipt="",this.page=1,this.gettable()}removeCommissionFilter(){this.Commission=!1,this.CommissionRatiochange.setValue(0),this.tableConfig.filter.Commission="",this.page=1,this.gettable()}removeAmountFilter(){this.amountchange.setValue(null),this.tableConfig.filter.Amount="",this.page=1,this.gettable()}removeMachineIdFilter(){this.machineId.setValue(null),this.tableConfig.filter.machineId="",this.page=1,this.gettable()}removeSectionFilter(){this.SessionNumberchange.setValue(null),this.tableConfig.filter.RegisterSessionId="",this.page=1,this.gettable()}removeNetAmountFilter(){this.netamountchange.setValue(null),this.tableConfig.filter.NetAmount="",this.page=1,this.gettable()}removeBranchNameFilter(){this.BranchName=!1,this.branch="",this.page=1,this.gettable()}removeRegisterNameFilter(){this.RegisterName=!1,this.page=1,this.gettable()}filterRegisterName(t){this.RegisterName=t.checked,this.RegisterName||(this.RegisterName=!1,delete this.tableConfig.filter.RegisterId,this.page=1,this.gettable())}filterMachineId(t){this.isMachineId=t.checked,this.isMachineId||(delete this.tableConfig.filter.machineId,this.page=1,this.gettable())}filterBranchName(t){this.BranchName=t.checked,this.BranchName||(this.BranchName=!1,delete this.tableConfig.filter.BranchId,this.page=1,this.gettable())}filterNetAmount(t){this.NetAmount=t.checked,this.NetAmount||(this.NetAmount=!1,this.netamountchange.setValue(null),this.tableConfig.filter.netamountchange="",this.page=1,this.gettable())}filterAmount(t){this.Amount=t.checked,this.Amount||(this.Amount=!1,this.amountchange.setValue(null),this.tableConfig.filter.amountchange="",this.page=1,this.gettable())}filterSessionNumber(t){this.SessionNumber=t.checked,this.SessionNumber||(this.SessionNumber=!1,this.SessionNumberchange.setValue(null),this.tableConfig.filter.RegisterSessionId="",this.page=1,this.gettable())}filterCommission(t){this.Commission=t.checked,this.Commission||(this.Commission=!1,this.CommissionRatiochange.setValue(null),this.tableConfig.filter.Commission="",this.page=1,this.gettable())}filterInvoice(t){this.Invoice=t.checked,this.Invoice||(this.Invoice=!1,this.searchText.setValue(null),this.tableConfig.filter.searchText="",this.page=1,this.gettable())}onDateValueChange(t){var i=new u.uU("en-US");if(this.startDate=i.transform(t)||"",console.log(this.startDate),this.startDate){const o=new Date(this.startDate);o.setDate(o.getDate()+1);const a=o.toISOString();this.tableConfig.filter.CollectionDate=a}else this.tableConfig.filter.CollectionDate=this.startDate;this.page=1,this.gettable()}removeCollectionDateFilter(){delete this.tableConfig.filter.CollectionDate,this.page=1,this.datepickerInput=null,this.gettable()}handleCategoryChange(t){console.log("bhushan ==>",t.providerId),this.tableConfig.filter.providerId=t.providerId,this.page=1,this.gettable()}handleCategoryChange2(t){this.tableConfig.filter.CardTypeId=t.id,this.page=1,this.gettable()}handleCategoryChange3(t,i){const o=t.branchName,a=t.branchId;i.target.checked?(this.newDropdownbranch.push(o),this.dropDownbranchId.push(a)):(this.newDropdownbranch=this.newDropdownbranch.filter(l=>l!==o),this.dropDownbranchId=this.dropDownbranchId.filter(l=>l!==a)),this.tableConfig.filter.BranchId=this.dropDownbranchId,this.page=1,this.gettable()}removebranchFilter(){this.newDropdownbranch=[],this.dropDownbranchId=[],this.tableConfig.filter.BranchId=[],this.BranchName=!1,this.page=1,this.gettable()}handleCategoryChange4(t,i){const o=t.registersName,a=t.id;i.target.checked?(this.newDropdownregister.push(o),this.dropDownregisterId.push(a)):(this.newDropdownregister=this.newDropdownregister.filter(l=>l!==o),this.dropDownregisterId=this.dropDownregisterId.filter(l=>l!==a)),this.tableConfig.filter.RegisterId=this.dropDownregisterId,this.page=1,this.gettable()}removeregisterFilter(){this.newDropdownregister=[],this.dropDownregisterId=[],this.tableConfig.filter.RegisterId=[],this.RegisterName=!1,this.page=1,this.gettable()}onClear(){delete this.tableConfig.filter.BranchId,this.page=1,this.gettable()}onClearR(){delete this.tableConfig.filter.RegisterId,this.page=1,this.gettable()}onClearcard(){delete this.tableConfig.filter.CardTypeId,this.page=1,this.gettable()}IsPDCFilter(t){this.tableConfig.filter.Status=t,this.page=1,this.gettable()}gotopaymentdetails(t){this.router.navigate(["credit-card/payment-details"],{queryParams:{ordersCardsCollectionId:t}})}onClearprovider(){delete this.tableConfig.filter.providerId,this.page=1,this.gettable()}inputvalue(t){let i=!1;const o=t?.target?.value;if(o&&o.includes(".")){const a=o.split(".");i=2===a.length&&a[1].length>0?"0.0"===o||"0.00"===o:2===a.length&&0===a[1].length}!i&&parseFloat(o)>0?(this.tableConfig.filter.Commission=parseFloat(o).toFixed(3),this.CommissionRatiochange.patchValue(parseFloat(parseFloat(o).toFixed(3))),this.page=1,this.sort=1,this.gettable()):(o.includes("-")||isNaN(parseFloat(o))||0==parseFloat(o)&&!i)&&this.CommissionRatiochange.patchValue(0)}validateInput(t){const i=t.target.value;/^[0-9]*\.?[0-9]*$/.test(i)||(t.target.value=i.replace(/[^0-9.]/g,""))}validateNumberInput(t){const i=t.target.value;/^[1-9]\d*$/.test(i)||(t.target.value=i.replace(/[^1-9]/g,""))}validateCommissionInput(t){const i=t.target.value;/^[1-9]\d*$/.test(i)?parseInt(i,10)>100&&(t.target.value="100"):t.target.value=i.replace(/[^1-9]/g,"")}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(B.x),e.Y36(T.$),e.Y36(m.F0),e.Y36(v.r),e.Y36(N.W))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-credit-card-list"]],decls:123,vars:34,consts:[[1,"card-wrapper"],[1,"notes-wrapper","row"],[1,"row"],["class","col-lg-3",4,"ngFor","ngForOf"],[1,"row","mt-2"],[1,"col-md-10"],[1,"col-lg-3","col-md-6"],[1,"input-group","search-box"],["type","button","id","button-addon1",1,"btn"],[1,"fa-solid","fa-search"],["type","text","placeholder","Last 4 Digits",1,"form-control",3,"formControl"],["type","button","id","button-addon1",1,"btn",3,"hidden","click"],[1,"fa-solid","fa-xmark"],[1,"input-group"],["placeholder","Search By Provider Name","bindLabel","providerName","bindValue","providerId",1,"flex-grow-1","mt-3","mt-md-0",3,"items","formControl","clear","change"],[1,"col-lg-3","col-md-6","filterFlex"],["placeholder","Search By Card Type","bindLabel","name.lookupName","bindValue","id",1,"flex-grow-1","mt-3","mt-md-0",3,"items","clear","change"],[1,"dropdown"],["type","button",1,"btn","dropdownFilters"],["type","text","placeholder","Select Date","bsDatepicker","",1,"form-control",3,"ngModel","bsConfig","ngModelChange","bsValueChange"],["dp","bsDatepicker"],["src","../../../../assets/images/calendar.png","alt","",1,"calender",3,"click"],["class","fa-regular fa-circle-xmark",3,"click",4,"ngIf"],[1,"col-md-2"],[1,"row","justify-content-end"],[1,"col-lg-10","col-md-6","d-flex","justify-content-end"],["type","button","id","dropdownMenuButton","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","dropdownButton","more-filter-drop"],[1,"fa-regular","fa-plus"],["aria-labelledby","dropdownMenuButton",1,"dropdown-menu","menu"],[1,"dropdown-item"],["type","checkbox",1,"checkBox",3,"ngModel","ngModelChange","change"],[1,"deposited-cheques-list-tabs"],[1,"col-lg-7"],[1,"col-lg-2"],[1,"col-lg-8"],["role","group","aria-label","Basic example",1,"btn-group"],["type","button",1,"btn","btn-light"],[1,"form-check"],["type","radio","name","exampleRadios","id","exampleRadios1","value","","checked","",1,"form-check-input",3,"click"],["for","exampleRadios1",1,"form-check-label"],["type","radio","name","exampleRadios","id","exampleRadios1","value","",1,"form-check-input",3,"click"],["type","radio","name","exampleRadios","id","exampleRadios2","value","true",1,"form-check-input",3,"click"],["for","exampleRadios2",1,"form-check-label"],[1,"col-lg-5","text-end"],["routerLink","/credit-card/reconciliation",1,"btn","btn-add"],[1,"col-lg-12"],[1,"filterFlex","mt-4"],["class","dropdown",4,"ngIf"],[1,"col-lg-12","mb-3","d-flex","justify-content-between","align-items-center"],[1,"m-0","fw-600"],[1,"d-flex","gap-2","align-items-center"],["type","button",1,"btn","btn-success","btn-lg","font-16",3,"click"],[1,"fas","fa-file-excel","me-2"],[1,"m-0","txt-light"],[1,"col-md-12"],[3,"config","columns","data","loading","page","total","limit","sortUpdated","pageUpdated"],["libTableAdvancedColumn","provider"],["libTableAdvancedColumn","collectionAt"],["libTableAdvancedColumn","branch"],["libTableAdvancedColumn","registers"],["libTableAdvancedColumn","cardType"],["libTableAdvancedColumn","cardCollectionJod"],["libTableAdvancedColumn","commissionAmount"],["libTableAdvancedColumn","commissionRatio"],["libTableAdvancedColumn","cardCollectionJodNet"],["libTableAdvancedColumn","cardBankDepositDate"],["libTableAdvancedColumn","statusObj"],["libTableAdvancedColumn","Action"],[1,"col-lg-3"],[1,"card","mb-3"],[1,"col-md-4"],["alt","","srcset","","width","72;",3,"src"],[1,"col-md-8"],[1,"label"],[1,"label-txt"],[1,"fa-regular","fa-circle-xmark",3,"click"],["type","text","placeholder","Machine Receipt Number",1,"form-control",3,"formControl"],["type","text","placeholder","Commission",1,"form-control",3,"formControl","input"],["type","text","placeholder","Amount",1,"form-control",3,"formControl","input"],["type","text","placeholder","Section No",1,"form-control",3,"formControl","input"],["type","text","placeholder","Net Amount",1,"form-control",3,"formControl","input"],["type","button","id","dropdownbranch","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","dropdownFilters"],[4,"ngIf"],["class","d-flex",4,"ngFor","ngForOf"],[1,"fa-solid","fa-chevron-down"],["aria-labelledby","dropdownbranch",1,"dropdown-menu","menu2"],["class","dropdown-item",4,"ngFor","ngForOf"],[1,"d-flex"],["type","checkbox",1,"checkBox",3,"value","change"],["type","button","id","dropdownregister","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","dropdownFilters"],["aria-labelledby","dropdownregister",1,"dropdown-menu","menu2"],["type","button","id","button-addon133",1,"btn"],["type","text","placeholder","MachineId",1,"form-control",3,"formControl"],["type","button","id","button-addon133",1,"btn",3,"hidden","click"],[1,"d-flex","flex-column"],["alt","","srcset","","width","55",3,"src"],[1,"collected-btn"],[1,"fa-light","fa-eye",2,"cursor","pointer",3,"click"]],template:function(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e.YNc(3,j,12,6,"div",3),e.qZA()()(),e.TgZ(4,"div",4)(5,"div",5)(6,"div",2)(7,"div",6)(8,"div",7)(9,"button",8),e._UZ(10,"i",9),e.qZA(),e._UZ(11,"input",10),e.TgZ(12,"button",11),e.NdJ("click",function(){return i.removelast4Filter()}),e._UZ(13,"i",12),e.qZA()()(),e.TgZ(14,"div",6)(15,"div",13)(16,"ng-select",14),e.NdJ("clear",function(){return i.onClearprovider()})("change",function(l){return i.handleCategoryChange(l)}),e.qZA()()(),e.TgZ(17,"div",15)(18,"div",13)(19,"ng-select",16),e.NdJ("clear",function(){return i.onClearcard()})("change",function(l){return i.handleCategoryChange2(l)}),e.qZA()()(),e.TgZ(20,"div",15)(21,"div",7)(22,"div",17)(23,"button",18)(24,"input",19,20),e.NdJ("ngModelChange",function(l){return i.datepickerInput=l})("bsValueChange",function(l){return i.onDateValueChange(l)}),e.qZA(),e.TgZ(26,"img",21),e.NdJ("click",function(){e.CHM(o);const l=e.MAs(25);return e.KtG(l.toggle())}),e.qZA(),e.YNc(27,Q,1,0,"i",22),e.qZA()()()()()(),e.TgZ(28,"div",23)(29,"div",24)(30,"div",25)(31,"div",17)(32,"button",26),e._UZ(33,"i",27),e._uU(34," More Filters "),e.qZA(),e.TgZ(35,"ul",28)(36,"li")(37,"a",29)(38,"input",30),e.NdJ("ngModelChange",function(l){return i.Invoice=l})("change",function(l){return i.filterInvoice(l.target)}),e.qZA(),e._uU(39," \xa0 Machine Receipt "),e.qZA(),e.TgZ(40,"a",29)(41,"input",30),e.NdJ("ngModelChange",function(l){return i.Commission=l})("change",function(l){return i.filterCommission(l.target)}),e.qZA(),e._uU(42," \xa0Commission "),e.qZA(),e.TgZ(43,"a",29)(44,"input",30),e.NdJ("ngModelChange",function(l){return i.Amount=l})("change",function(l){return i.filterAmount(l.target)}),e.qZA(),e._uU(45," \xa0Amount "),e.qZA(),e.TgZ(46,"a",29)(47,"input",30),e.NdJ("ngModelChange",function(l){return i.SessionNumber=l})("change",function(l){return i.filterSessionNumber(l.target)}),e.qZA(),e._uU(48," \xa0Session Number "),e.qZA(),e.TgZ(49,"a",29)(50,"input",30),e.NdJ("ngModelChange",function(l){return i.NetAmount=l})("change",function(l){return i.filterNetAmount(l.target)}),e.qZA(),e._uU(51," \xa0Net Amount "),e.qZA(),e.TgZ(52,"a",29)(53,"input",30),e.NdJ("ngModelChange",function(l){return i.BranchName=l})("change",function(l){return i.filterBranchName(l.target)}),e.qZA(),e._uU(54," \xa0Branch Name "),e.qZA(),e.TgZ(55,"a",29)(56,"input",30),e.NdJ("ngModelChange",function(l){return i.RegisterName=l})("change",function(l){return i.filterRegisterName(l.target)}),e.qZA(),e._uU(57," \xa0Register Name "),e.qZA(),e.TgZ(58,"a",29)(59,"input",30),e.NdJ("ngModelChange",function(l){return i.isMachineId=l})("change",function(l){return i.filterMachineId(l.target)}),e.qZA(),e._uU(60," \xa0Merchant ID "),e.qZA()()()()()()()(),e.TgZ(61,"div",31)(62,"div",2)(63,"div",32)(64,"div",4)(65,"div",33)(66,"h6"),e._uU(67,"Status"),e.qZA()(),e.TgZ(68,"div",34)(69,"div",35)(70,"button",36)(71,"div",37)(72,"input",38),e.NdJ("click",function(){return i.IsPDCFilter("")}),e.qZA(),e.TgZ(73,"label",39),e._uU(74," All "),e.qZA()()(),e.TgZ(75,"button",36)(76,"div",37)(77,"input",40),e.NdJ("click",function(){return i.IsPDCFilter(30001)}),e.qZA(),e.TgZ(78,"label",39),e._uU(79," UnReconciled "),e.qZA()()(),e.TgZ(80,"button",36)(81,"div",37)(82,"input",41),e.NdJ("click",function(){return i.IsPDCFilter(30002)}),e.qZA(),e.TgZ(83,"label",42),e._uU(84," Reconciled "),e.qZA()()()()()()(),e.TgZ(85,"div",43)(86,"button",44)(87,"span"),e._uU(88,"Create Reconciliation"),e.qZA()()(),e.TgZ(89,"div",45)(90,"div",46),e.YNc(91,Y,7,2,"div",47),e.YNc(92,G,7,2,"div",47),e.YNc(93,V,7,2,"div",47),e.YNc(94,H,7,2,"div",47),e.YNc(95,E,7,2,"div",47),e.YNc(96,X,10,3,"div",47),e.YNc(97,ie,10,3,"div",47),e.YNc(98,ne,7,2,"div",47),e.qZA()()()(),e.TgZ(99,"div",4)(100,"div",48)(101,"h5",49),e._uU(102,"Cards Transactions List"),e.qZA(),e.TgZ(103,"div",50)(104,"button",51),e.NdJ("click",function(){return i.getCardsForExport()}),e._UZ(105,"i",52),e._uU(106," Export"),e.qZA(),e.TgZ(107,"h6",53),e._uU(108),e.qZA()()(),e.TgZ(109,"div",54)(110,"app-table-advanced",55),e.NdJ("sortUpdated",function(l){return i.onSortChange(l)})("pageUpdated",function(l){return i.onPageChange(l)}),e.YNc(111,oe,1,1,"ng-template",56),e.YNc(112,ae,2,3,"ng-template",57),e.YNc(113,le,1,1,"ng-template",58),e.YNc(114,re,1,1,"ng-template",59),e.YNc(115,se,4,2,"ng-template",60),e.YNc(116,ce,2,4,"ng-template",61),e.YNc(117,de,2,4,"ng-template",62),e.YNc(118,ue,1,1,"ng-template",63),e.YNc(119,pe,2,4,"ng-template",64),e.YNc(120,me,2,4,"ng-template",65),e.YNc(121,ge,2,5,"ng-template",66),e.YNc(122,he,1,0,"ng-template",67),e.qZA()()()}2&t&&(e.xp6(3),e.Q6J("ngForOf",i.carddetial),e.xp6(8),e.Q6J("formControl",i.searchChequeText),e.xp6(1),e.Q6J("hidden",null==i.searchChequeText.value),e.xp6(4),e.Q6J("items",i.provider)("formControl",i.searchText),e.xp6(3),e.Q6J("items",i.cardlist),e.xp6(5),e.Q6J("ngModel",i.datepickerInput)("bsConfig",e.DdM(33,_e)),e.xp6(3),e.Q6J("ngIf",i.datepickerInput),e.xp6(11),e.Q6J("ngModel",i.Invoice),e.xp6(3),e.Q6J("ngModel",i.Commission),e.xp6(3),e.Q6J("ngModel",i.Amount),e.xp6(3),e.Q6J("ngModel",i.SessionNumber),e.xp6(3),e.Q6J("ngModel",i.NetAmount),e.xp6(3),e.Q6J("ngModel",i.BranchName),e.xp6(3),e.Q6J("ngModel",i.RegisterName),e.xp6(3),e.Q6J("ngModel",i.isMachineId),e.xp6(32),e.Q6J("ngIf",i.Invoice),e.xp6(1),e.Q6J("ngIf",i.Commission),e.xp6(1),e.Q6J("ngIf",i.Amount),e.xp6(1),e.Q6J("ngIf",i.SessionNumber),e.xp6(1),e.Q6J("ngIf",i.NetAmount),e.xp6(1),e.Q6J("ngIf",i.BranchName),e.xp6(1),e.Q6J("ngIf",i.RegisterName),e.xp6(1),e.Q6J("ngIf",i.isMachineId),e.xp6(10),e.hij("Total No. : ",i.totalAllRecordsCount,""),e.xp6(2),e.Q6J("config",i.tableConfig)("columns",i.tableColumns)("data",i.chequeList)("loading",i.loading)("page",i.page)("total",i.total)("limit",i.limit))},dependencies:[u.sg,u.O5,m.rH,s.Fj,s.Wl,s.JJ,s.On,s.oH,f.w9,x.V,p.Np,p.Y5,k.y,u.JJ,u.uU],styles:["[_nghost-%COMP%]     .ant-tabs-nav{margin:0 0 24px}.card-wrapper[_ngcontent-%COMP%]{margin-bottom:25px}.card-wrapper[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:0;flex:1}.card-wrapper[_ngcontent-%COMP%]   .columns[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:24px}.card-wrapper[_ngcontent-%COMP%]   .columns[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{min-width:400px}.heading[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:24px}.card-subheading[_ngcontent-%COMP%]{margin-bottom:10px}@media (max-width: 768px){.card-wrapper[_ngcontent-%COMP%]   .columns[_ngcontent-%COMP%]{flex-direction:column}.card-wrapper[_ngcontent-%COMP%]   .columns[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{min-width:0}}.more-filter-drop[_ngcontent-%COMP%]{height:46px;width:150px;background:#4e9aff;border-radius:8px;color:#fff;outline:none;border:none}.label[_ngcontent-%COMP%]{font-weight:600;font-size:14px;line-height:24px;color:#929eae}.label-txt[_ngcontent-%COMP%]{font-weight:700;font-size:18px;line-height:24px;letter-spacing:.016em;color:#00261c}.checkBox[_ngcontent-%COMP%]{accent-color:#dc3545;width:20px;height:20px}.dropdownFilters[_ngcontent-%COMP%]{border-radius:8px;display:flex;justify-content:space-between;align-items:center;gap:8px;border:1px solid #dc3545}"]}),n})();function Ce(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"i",30),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.removeCollectionDateFilter())}),e.qZA()}}function be(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",7)(1,"div",6)(2,"button",31),e._UZ(3,"i",32),e.qZA(),e.TgZ(4,"input",33),e.NdJ("input",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.validateInput(o))}),e.qZA(),e.TgZ(5,"button",34),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.removeAmountFilter())}),e._UZ(6,"i",35),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(4),e.Q6J("formControl",t.amountchange),e.xp6(1),e.Q6J("hidden",null==t.amountchange.value)}}function ve(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",7)(1,"div",6)(2,"button",31),e._UZ(3,"i",32),e.qZA(),e.TgZ(4,"input",36),e.NdJ("input",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.validateInput(o))}),e.qZA(),e.TgZ(5,"button",34),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.removeNetAmountFilter())}),e._UZ(6,"i",35),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(4),e.Q6J("formControl",t.netamountchange),e.xp6(1),e.Q6J("hidden",null==t.netamountchange.value)}}function Ae(n,r){1&n&&e._uU(0),2&n&&e.hij(" ",r.index+1," ")}function Te(n,r){if(1&n&&(e._uU(0),e.ALo(1,"date")),2&n){const t=r.row;e.hij(" ",e.lcZ(1,1,null==t?null:t.createdAt)," ")}}function Ze(n,r){if(1&n&&(e._uU(0),e.ALo(1,"number")),2&n){const t=r.row;e.hij(" ",e.xi3(1,1,null==t?null:t.totalAmount,"1.3-3")," JOD ")}}function xe(n,r){if(1&n&&(e._uU(0),e.ALo(1,"number")),2&n){const t=r.row;e.hij(" ",e.xi3(1,1,null==t?null:t.totalNetAmount,"1.3-3")," JOD ")}}function ye(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"i",37),e.NdJ("click",function(){const a=e.CHM(t).row,l=e.oxw();return e.KtG(l.sendid(a.reconciliationHistoryId))}),e.qZA()}}const Ne=function(){return{containerClass:"theme-red",isAnimated:!0,showClearButton:!0}};let ke=(()=>{class n{constructor(t,i,o){this.creditcardservice=t,this.headerService=i,this.router=o,this.unsubscribe=new Z.x,this.amountchange=new s.NI(null),this.netamountchange=new s.NI(null),this.searchText=new s.NI(null),this.tableColumns=[],this.searchChequeNo="",this.searchCustomerNo="",this.loading=!1,this.chequeList=[],this.totalAllRecordsCount=0,this.page=1,this.total=0,this.limit=6,this.sort=1,this.startDate="",this.tableConfig={paging:!0,filter:{Sort:1,PageSize:this.limit}},this.commission=!1,this.amount=!1,this.netAmount=!1,this.provider=[],this.cardlist=[]}ngOnInit(){this.headerService.setTitle("Reconciliation History"),this.getData(),this.initTableColumns(),this.GetReconciliationTable(),this.amountchange.valueChanges.pipe((0,g.b)(300),(0,h.x)(),(0,_.R)(this.unsubscribe)).subscribe(t=>{const i=t||"";(i?.length>=0||!i?.length&&this.tableConfig.filter.Amount?.length)&&(this.tableConfig.filter.Amount=i,this.page=1,this.GetReconciliationTable())}),this.netamountchange.valueChanges.pipe((0,g.b)(300),(0,h.x)(),(0,_.R)(this.unsubscribe)).subscribe(t=>{const i=t||"";(i?.length>=0||!i?.length&&this.tableConfig.filter.NetAmount?.length)&&(this.tableConfig.filter.NetAmount=i,this.page=1,this.GetReconciliationTable())})}ngOnDestroy(){}initTableColumns(){this.tableColumns=[{key:"No",label:"No.",canSort:!1},{key:"reconciliationHistoryId",label:"Reconciliation ID",canSort:!0},{key:"createdBy.fullName",label:"Created by",canSort:!0},{key:"createdAt",label:"Date",canSort:!0},{key:"totalAmount",label:"Amount",canSort:!0},{key:"totalNetAmount",label:"Net",canSort:!0},{key:"Action",label:"Action",canSort:!1}]}onSortChange(t){if(t?.direction&&t?.column)switch(t.column){case"reconciliationHistoryId":this.tableConfig.filter.Sort="desc"===t.direction?3:2;break;case"createdBy.fullName":this.tableConfig.filter.Sort="desc"===t.direction?5:4;break;case"createdAt":this.tableConfig.filter.Sort="desc"===t.direction?7:6;break;case"totalAmount":this.tableConfig.filter.Sort="desc"===t.direction?9:8;break;case"totalNetAmount":this.tableConfig.filter.Sort="desc"===t.direction?11:10}else this.tableConfig.filter.Sort=1;this.GetReconciliationTable()}onPageChange(t){this.page=t,this.GetReconciliationTable()}removeSearchChequeNo(){this.searchChequeNo="",this.sort=1}onDateValueChange(t){var i=new u.uU("en-US");if(this.startDate=i.transform(t)||"",console.log(this.startDate),this.startDate){const o=new Date(this.startDate);o.setDate(o.getDate()+1);const a=o.toISOString();this.tableConfig.filter.ReconciliationDate=a}else this.tableConfig.filter.ReconciliationDate=this.startDate;this.page=1,this.GetReconciliationTable()}removeCollectionDateFilter(){this.startDate="",this.datepickerInput&&(this.datepickerInput=""),this.page=1,this.GetReconciliationTable()}removeAmountFilter(){this.amountchange.setValue(null),this.tableConfig.filter.Amount="",this.page=1,this.GetReconciliationTable()}filterAmount(t){this.amount=t.checked,this.amount||(this.amount=!1,this.amountchange.setValue(null),this.tableConfig.filter.Amount="",this.page=1,this.GetReconciliationTable())}removeNetAmountFilter(){this.netamountchange.setValue(null),this.tableConfig.filter.NetAmount="",this.page=1,this.GetReconciliationTable()}filterNetAmount(t){this.netAmount=t.checked,this.netAmount||(this.netAmount=!1,this.netamountchange.setValue(null),this.tableConfig.filter.NetAmount="",this.page=1,this.GetReconciliationTable())}getData(){const t=this.creditcardservice.GetProviders({pageSize:1e3,status:2001}),i=this.creditcardservice.GetCards();(0,A.D)([t,i]).subscribe(([o,a])=>{o&&(console.log(o.data),this.provider=o.data||[]),console.log("result2",a),a&&(this.cardlist=a.data||[])},o=>{console.error(o)},()=>{this.loading=!1})}GetReconciliationTable(){this.tableConfig.filter.PageNo=this.page-1;const t=this.creditcardservice.GetReconciliationHistory(this.tableConfig.filter);(0,A.D)([t]).subscribe(([i])=>{console.log(i),i&&(this.chequeList=i.data||[],this.totalAllRecordsCount=i.totalRecordCount,this.total=i.totalRecordCount)})}handleCategoryChange(t){this.tableConfig.filter.ProviderId=t.providerId,this.page=1,this.GetReconciliationTable()}onClear(){delete this.tableConfig.filter.ProviderId,this.page=1,this.GetReconciliationTable()}onCTClear(){delete this.tableConfig.filter.CardTypeId,this.page=1,this.GetReconciliationTable()}handleCardType(t){this.tableConfig.filter.CardTypeId=t.id,this.page=1,this.GetReconciliationTable()}sendid(t){this.router.navigate(["credit-card/reconciliation-details"],{queryParams:{reconciliationHistoryid:t}})}validateInput(t){const i=t.target.value;/^[0-9]*\.?[0-9]*$/.test(i)||(t.target.value=i.replace(/[^0-9.]/g,""))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(T.$),e.Y36(v.r),e.Y36(m.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-reconciliation-history"]],decls:44,vars:19,consts:[[1,"row","mt-2"],[1,"col-md-10"],[1,"row"],[1,"col-lg-3","col-md-6"],["placeholder","Provider","bindLabel","providerName","bindValue","providerId",1,"flex-grow-1","mt-3","mt-md-0",3,"formControl","items","clear","change"],[1,"col-lg-3","col-md-6","filterFlex"],[1,"input-group","search-box"],[1,"dropdown"],["type","button",1,"btn","dropdownFilters"],["type","text","placeholder","Select Date","bsDatepicker","",1,"form-control",3,"ngModel","bsConfig","ngModelChange","bsValueChange"],["dp","bsDatepicker"],["src","../../../../assets/images/calendar.png","alt","",1,"calender",3,"click"],["class","fa-regular fa-circle-xmark",3,"click",4,"ngIf"],["placeholder","Search By Card","bindLabel","name.lookupName","bindValue","id",1,"flex-grow-1","mt-3","mt-md-0",3,"items","clear","change"],["type","button","id","dropdownMenuButton","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","dropdownButton","more-filter-drop"],[1,"fa-regular","fa-plus"],["aria-labelledby","dropdownMenuButton",1,"dropdown-menu","menu"],[1,"dropdown-item"],["type","checkbox",1,"checkBox",3,"ngModel","ngModelChange","change"],[1,"filterFlex","mt-3"],["class","dropdown",4,"ngIf"],[1,"col-lg-12","text-heading"],[1,"text-end"],[1,"col-md-12"],[3,"config","columns","data","loading","page","total","limit","sortUpdated","pageUpdated"],["libTableAdvancedColumn","No"],["libTableAdvancedColumn","createdAt"],["libTableAdvancedColumn","totalAmount"],["libTableAdvancedColumn","totalNetAmount"],["libTableAdvancedColumn","Action"],[1,"fa-regular","fa-circle-xmark",3,"click"],["type","button","id","button-addon1",1,"btn"],[1,"fa-solid","fa-search"],["type","text","placeholder","Amount",1,"form-control",3,"formControl","input"],["type","button","id","button-addon1",1,"btn",3,"hidden","click"],[1,"fa-solid","fa-xmark"],["type","text","placeholder","Net Amount",1,"form-control",3,"formControl","input"],[1,"fa-light","fa-eye",2,"cursor","pointer",3,"click"]],template:function(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"ng-select",4),e.NdJ("clear",function(){return i.onClear()})("change",function(l){return i.handleCategoryChange(l)}),e.qZA()(),e.TgZ(5,"div",5)(6,"div",6)(7,"div",7)(8,"button",8)(9,"input",9,10),e.NdJ("ngModelChange",function(l){return i.datepickerInput=l})("bsValueChange",function(l){return i.onDateValueChange(l)}),e.qZA(),e.TgZ(11,"img",11),e.NdJ("click",function(){e.CHM(o);const l=e.MAs(10);return e.KtG(l.toggle())}),e.qZA(),e.YNc(12,Ce,1,0,"i",12),e.qZA()()()(),e.TgZ(13,"div",3)(14,"ng-select",13),e.NdJ("clear",function(){return i.onCTClear()})("change",function(l){return i.handleCardType(l)}),e.qZA()(),e.TgZ(15,"div",5)(16,"div",7)(17,"button",14),e._UZ(18,"i",15),e._uU(19," More Filters "),e.qZA(),e.TgZ(20,"ul",16)(21,"li")(22,"a",17)(23,"input",18),e.NdJ("ngModelChange",function(l){return i.amount=l})("change",function(l){return i.filterAmount(l.target)}),e.qZA(),e._uU(24," \xa0Amount "),e.qZA(),e.TgZ(25,"a",17)(26,"input",18),e.NdJ("ngModelChange",function(l){return i.netAmount=l})("change",function(l){return i.filterNetAmount(l.target)}),e.qZA(),e._uU(27," \xa0Net Amount "),e.qZA()()()()()()()(),e.TgZ(28,"div",19),e.YNc(29,be,7,2,"div",20),e.YNc(30,ve,7,2,"div",20),e.qZA(),e.TgZ(31,"div",0)(32,"div",21)(33,"h5"),e._uU(34,"Cards reconciliations List"),e.qZA(),e.TgZ(35,"h6",22),e._uU(36),e.qZA()(),e.TgZ(37,"div",23)(38,"app-table-advanced",24),e.NdJ("sortUpdated",function(l){return i.onSortChange(l)})("pageUpdated",function(l){return i.onPageChange(l)}),e.YNc(39,Ae,1,1,"ng-template",25),e.YNc(40,Te,2,3,"ng-template",26),e.YNc(41,Ze,2,4,"ng-template",27),e.YNc(42,xe,2,4,"ng-template",28),e.YNc(43,ye,1,0,"ng-template",29),e.qZA()()()}2&t&&(e.xp6(4),e.Q6J("formControl",i.searchText)("items",i.provider),e.xp6(5),e.Q6J("ngModel",i.datepickerInput)("bsConfig",e.DdM(18,Ne)),e.xp6(3),e.Q6J("ngIf",i.datepickerInput),e.xp6(2),e.Q6J("items",i.cardlist),e.xp6(9),e.Q6J("ngModel",i.amount),e.xp6(3),e.Q6J("ngModel",i.netAmount),e.xp6(3),e.Q6J("ngIf",i.amount),e.xp6(1),e.Q6J("ngIf",i.netAmount),e.xp6(6),e.hij("Total No. : ",i.totalAllRecordsCount,""),e.xp6(2),e.Q6J("config",i.tableConfig)("columns",i.tableColumns)("data",i.chequeList)("loading",i.loading)("page",i.page)("total",i.total)("limit",i.limit))},dependencies:[u.O5,s.Fj,s.Wl,s.JJ,s.On,s.oH,f.w9,x.V,p.Np,p.Y5,k.y,u.JJ,u.uU],styles:[".applyMargin[_ngcontent-%COMP%]{margin-top:2.5rem}.total[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:18px;font-weight:600;margin:15px 0 0;padding:10px 0}.total[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:500;font-size:16px;line-height:19px;color:#929eae;margin:0;padding:10px 0}.card-table[_ngcontent-%COMP%]{border:.5px solid #f4f4f4;box-shadow:3px 7px 12px #0000002e;-webkit-box-shadow:3px 7px 12px 0px rgba(0,0,0,.18);-moz-box-shadow:3px 7px 12px 0px rgba(0,0,0,.18)}.btn-provide[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff;outline:none;border:none;padding:8px 14px;border-radius:4px;font-size:12px;width:80px}.btn-disabled[_ngcontent-%COMP%]{background-color:#c5c6c7;color:#fff;outline:none;border:none;padding:8px 14px;border-radius:4px;font-size:12px;width:80px}.pagination[_ngcontent-%COMP%]{display:flex;justify-content:end;align-items:center;gap:8px}.play-left[_ngcontent-%COMP%]{color:#eceaea;transform:rotate(180deg);margin-right:5px}.play-right[_ngcontent-%COMP%]{color:#eceaea}.dropdownBox[_ngcontent-%COMP%]{position:absolute;width:150px;height:48px;background:#4e9aff;border-radius:8px}.headButton[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:95px;height:34.2px;border-radius:8px}.headButtonText[_ngcontent-%COMP%]{font-family:Kumbh Sans;font-size:14px;font-weight:600;line-height:17px;letter-spacing:0em;text-align:left}.menu[_ngcontent-%COMP%]{width:180px;filter:drop-shadow(0px 10px 20px rgba(0,0,0,.1))}.menu2[_ngcontent-%COMP%]{width:235px;filter:drop-shadow(0px 10px 20px rgba(0,0,0,.1))}.more-filter-drop[_ngcontent-%COMP%]{height:46px;width:150px;background:#4e9aff;border-radius:8px;color:#fff;outline:none;border:none}.dropdown-item[_ngcontent-%COMP%]{padding:12px;display:flex;justify-content:flex-start;align-items:center}.checkBox[_ngcontent-%COMP%]{accent-color:#dc3545;width:20px;height:20px}.dropdownFilters[_ngcontent-%COMP%]{border-radius:8px;display:flex;justify-content:space-between;align-items:center;gap:8px;border:1px solid #dc3545}.filterFlex[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:center;gap:8px;flex-wrap:wrap}.btn-edit[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px}"]}),n})();function De(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",7),e.NdJ("click",function(){const a=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.chooseDeposit(a))}),e._uU(1),e.qZA()}if(2&n){const t=r.$implicit,i=e.oxw();e.ekj("active",t.id===i.selecteddeposit),e.xp6(1),e.hij(" ",t.name," ")}}function we(n,r){if(1&n&&(e.TgZ(0,"div",8)(1,"p",9),e._uU(2),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.hij("Total No. ",t.totalAllRecordsCount,"")}}function qe(n,r){1&n&&(e.TgZ(0,"div",1),e._UZ(1,"app-credit-card-list"),e.qZA())}function Ue(n,r){1&n&&(e.TgZ(0,"div",1),e._UZ(1,"app-reconciliation-history"),e.qZA())}let Ie=(()=>{class n{constructor(t,i,o){this.headerService=t,this.sidebarService=i,this.route=o,this.selecteddeposit=1,this.depositTypes=[],this.totalAllRecordsCount=0,this.headerService.selecteddeposit=1;const a=this.route.snapshot.queryParamMap.get("num");this.selecteddeposit=a?parseInt(a):1}ngOnInit(){this.headerService.setTitle("Deposited Cheques > Cheques List ");const t=this.sidebarService.findNavLink(this.sidebarService.navLinks,"deposites");t&&this.sidebarService.emitEvent({select:{navLink:t,silent:!0}}),this.getdepositTypes()}ngOnDestroy(){}chooseDeposit(t){this.selecteddeposit=t.id}getdepositTypes(){this.depositTypes=[{id:1,name:"Credit Cards Payments List"},{id:2,name:"Reconciliation History"}]}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(v.r),e.Y36(P.P),e.Y36(m.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-credit-cards-payment"]],decls:8,vars:4,consts:[[1,"card-page"],[1,"row"],[1,"col-md-9"],[1,"btn-tabs"],["type","button","class","btn",3,"active","click",4,"ngFor","ngForOf"],["class","col-md-3",4,"ngIf"],["class","row",4,"ngIf"],["type","button",1,"btn",3,"click"],[1,"col-md-3"],[1,"total-amount"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e.YNc(4,De,2,3,"button",4),e.qZA()(),e.YNc(5,we,3,1,"div",5),e.qZA(),e.YNc(6,qe,2,0,"div",6),e.YNc(7,Ue,2,0,"div",6),e.qZA()),2&t&&(e.xp6(4),e.Q6J("ngForOf",i.depositTypes),e.xp6(1),e.Q6J("ngIf",2==i.selecteddeposit),e.xp6(1),e.Q6J("ngIf",1==i.selecteddeposit),e.xp6(1),e.Q6J("ngIf",2==i.selecteddeposit))},dependencies:[u.sg,u.O5,fe,ke]}),n})();var C=c(9061),q=c(4280);let U=(()=>{class n{constructor(t){this.el=t,this.regex=new RegExp(/^\d*\.?\d{0,50}$/g),this.specialKeys=["Backspace","Tab","End","Home","ArrowLeft","ArrowRight","Del","Delete"]}onKeyDown(t){if(-1!==this.specialKeys.indexOf(t.key))return;const o=this.el.nativeElement.value.concat(t.key);o&&!String(o).match(this.regex)&&t.preventDefault()}setInputFocusOut(){let t=+this.el.nativeElement.value;t>0&&(this.el.nativeElement.value=t.toFixed(3))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.SBq))},n.\u0275dir=e.lG2({type:n,selectors:[["","decimalNumber",""]],hostBindings:function(t,i){1&t&&e.NdJ("keydown",function(a){return i.onKeyDown(a)})("blur",function(){return i.setInputFocusOut()})}}),n})();var I=c(7711);function Re(n,r){if(1&n&&e._uU(0),2&n){const t=r.item;e.hij(" ",(null==t?null:t.accountName)+"-"+(null==t?null:t.bankNameEnglish)+"-"+(null==t?null:t.accountNumber)," ")}}const R=function(){return{required:"Input is required"}},Je=function(){return{containerClass:"theme-red",isAnimated:!0,showClearButton:!0}},Se=function(){return{inValidAmount:"Commission amount cannot be greater than total amount."}},Le=function(){return{required:"Input is required",min:"Value must be in 0-100 range.",max:"Value must be in 0-100 range."}};let Fe=(()=>{class n{constructor(t,i,o,a){this.fb=t,this._activeModal=i,this._modalService=o,this.cerditCardService=a,this.bankAccountList=[],this.commisionPercentage="",this.checkRecon=!1,this.tableConfig={paging:!1},this.reconList=[],this.tableColumns=[],this.eventData=new e.vpe}ngOnInit(){this.initForm(),this.getBankAccountList(),this.initTableColumns(),console.log(this.data)}initForm(){this.formGroup=this.fb.group({bankId:[null,[s.kI.required]],date:[new Date,[s.kI.required]],commission:["",[s.kI.required,s.kI.min(0),s.kI.max(100)]]})}getBankAccountList(){this.cerditCardService.getBankAccounts("pageSize=1000&status=2001&accountType=15010").subscribe(t=>{this.bankAccountList=t.data})}handleCommissionAmountChange(t){const i=+t.target.value;i>+this.data?.totalAmount?(this.f.get("commission")?.setErrors({inValidAmount:!0}),this.f.get("commission").markAsTouched()):i>0&&(this.commisionPercentage=(100*(1-(this.data?.totalAmount-i)/this.data?.totalAmount)).toString(),this.f.get("commission")?.setValue(this.commisionPercentage),this.f.get("commission")?.setErrors(null))}handleCheckRecon(){this.checkRecon=!0,this.reconList=[...this.data?.cardIds],this.reconList=this.reconList.map(t=>{let i=+(+t?.cardCollectionJod*+this.commisionPercentage/100).toFixed(3);return{...t,comPercentage:+this.commisionPercentage,comAmount:i,amount:t?.cardCollectionJod.toFixed(3),netAmount:(+t?.cardCollectionJod-i).toFixed(3)}})}calculateCommission(t){let i=t?.cardCollectionJod,a=(i*(+this.f.get("commission")?.value/100)).toFixed(3);return{netAmount:(i-+a).toFixed(3),commissionAmount:a}}save(){if(this.formGroup.invalid)return void this.formGroup.markAllAsTouched();let t=this.formGroup.value,i=[];this.reconList.forEach(o=>{i.push({reconcilationIds:o?.reconcilationIds,commission:o?.comAmount,cardCollectionJodNet:o?.netAmount,cardBankDepositDate:t?.date,bankaccountID:t?.bankId})}),this.cerditCardService.ReconcilationIds(i).subscribe({next:o=>{o.isSuccess&&(this.responseModal("success","Reconciliation successfully done."),this.eventData.emit(o.data))},error:o=>{this.responseModal("error",o?.error?.errors[0].errorMessageEn||o?.error?.errors[0].ErrorMessageEn||o?.info)}})}responseModal(t,i){const o=this._modalService.open(q.e);o.componentInstance.type=t,o.componentInstance.message=i}toggleEdit(){this.formGroup.enable()}get f(){return this.formGroup}initTableColumns(){this.tableColumns=[{key:"reconcilationIds",label:"Card ID"},{key:"comPercentage",label:"Commission Percentage"},{key:"comAmount",label:"Commission Amount"},{key:"amount",label:"Amount"},{key:"netAmount",label:"Net Amount"}]}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(s.qu),e.Y36(C.Kz),e.Y36(C.FF),e.Y36(T.$))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-group-reconciliation"]],outputs:{eventData:"eventData"},decls:59,vars:25,consts:[[1,"modal-header","align-items-center","justify-content-between"],["ngbAutoFocus","",1,"modal-title"],[1,"modal-body"],[3,"formGroup"],[1,"row","mb-3"],[1,"col-4"],[1,"col-8"],["placeholder","Bank Account","formControlName","bankId","bindLabel","accountName","bindValue","accountId",3,"items"],["ng-option-tmp",""],[3,"control","errorMessages"],[1,"input-group"],["type","text","formControlName","date","placeholder","Select Date","bsDatepicker","",1,"form-control","custom-input-field",3,"bsConfig"],["drp","bsDatepicker"],[1,"input-group-text","cursor-pointer",3,"click"],["src","/assets/images/calendar.png","alt","",1,"calender"],[1,"fw-600"],["type","text","decimalNumber","","placeholder","Commission Amount",1,"form-control","height-47",3,"change"],["type","text","decimalNumber","","formControlName","commission","placeholder","Commission Percentage",1,"form-control","height-47"],[1,"input-group-text"],[3,"config","columns","data"],[1,"modal-footer","border-0"],["type","button",1,"btn","btn-add",3,"disabled","click"],["type","button",1,"btn","btn-cancel",3,"click"]],template:function(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"div",0)(1,"h4",1),e._uU(2,"Reconciliation of selected cards"),e.qZA()(),e.TgZ(3,"div",2)(4,"form",3)(5,"div",4)(6,"div",5)(7,"label"),e._uU(8,"Deposit Bank Account"),e.qZA()(),e.TgZ(9,"div",6)(10,"ng-select",7),e.YNc(11,Re,1,1,"ng-template",8),e.qZA(),e._UZ(12,"validation-error",9),e.qZA()(),e.TgZ(13,"div",4)(14,"div",5)(15,"label"),e._uU(16,"Deposit Date"),e.qZA()(),e.TgZ(17,"div",6)(18,"div",10),e._UZ(19,"input",11,12),e.TgZ(21,"span",13),e.NdJ("click",function(){e.CHM(o);const l=e.MAs(20);return e.KtG(l.toggle())}),e._UZ(22,"img",14),e.qZA()(),e._UZ(23,"validation-error",9),e.qZA()(),e.TgZ(24,"div",4)(25,"div",5)(26,"label"),e._uU(27,"Total Amount"),e.qZA()(),e.TgZ(28,"div",6)(29,"h6",15),e._uU(30),e.ALo(31,"number"),e.qZA()()(),e.TgZ(32,"div",4)(33,"div",5)(34,"label"),e._uU(35,"Commission Amount"),e.qZA()(),e.TgZ(36,"div",6)(37,"div",10)(38,"input",16),e.NdJ("change",function(l){return i.handleCommissionAmountChange(l)}),e.qZA()(),e._UZ(39,"validation-error",9),e.qZA()(),e.TgZ(40,"div",4)(41,"div",5)(42,"label"),e._uU(43,"Commission Percentage"),e.qZA()(),e.TgZ(44,"div",6)(45,"div",10),e._UZ(46,"input",17),e.TgZ(47,"span",18),e._uU(48,"%"),e.qZA()(),e._UZ(49,"validation-error",9),e.qZA()()(),e.ynx(50),e._UZ(51,"app-table-advanced",19),e.BQk(),e.qZA(),e.TgZ(52,"div",20)(53,"button",21),e.NdJ("click",function(){return i.handleCheckRecon()}),e._uU(54,"Check Reconciliation"),e.qZA(),e.TgZ(55,"button",21),e.NdJ("click",function(){return i.save()}),e._uU(56,"Group Reconciliation"),e.qZA(),e.TgZ(57,"button",22),e.NdJ("click",function(){return i._activeModal.close()}),e._uU(58,"Cancel"),e.qZA()()}2&t&&(e.xp6(4),e.Q6J("formGroup",i.formGroup),e.xp6(6),e.Q6J("items",i.bankAccountList),e.xp6(2),e.Q6J("control",i.f.get("bankId"))("errorMessages",e.DdM(20,R)),e.xp6(7),e.Q6J("bsConfig",e.DdM(21,Je)),e.xp6(4),e.Q6J("control",i.f.get("date"))("errorMessages",e.DdM(22,R)),e.xp6(7),e.hij("",e.xi3(31,17,null==i.data?null:i.data.totalAmount,"2.3-3")," JOD"),e.xp6(9),e.Q6J("control",i.f.get("commission"))("errorMessages",e.DdM(23,Se)),e.xp6(10),e.Q6J("control",i.f.get("commission"))("errorMessages",e.DdM(24,Le)),e.xp6(2),e.Q6J("config",i.tableConfig)("columns",i.tableColumns)("data",i.reconList),e.xp6(2),e.Q6J("disabled",i.formGroup.invalid),e.xp6(2),e.Q6J("disabled",i.formGroup.invalid))},dependencies:[s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,f.w9,f.ir,x.V,p.Np,p.Y5,U,I.L,u.JJ]}),n})();const Pe=["myModal"],Oe=["myErrorModal"];function Be(n,r){1&n&&(e.TgZ(0,"span",55),e._uU(1,"Input is required"),e.qZA())}function je(n,r){1&n&&(e.TgZ(0,"span",55),e._uU(1,"Invalid amount"),e.qZA())}function Qe(n,r){if(1&n&&(e.ynx(0),e.YNc(1,Be,2,0,"span",54),e.YNc(2,je,2,0,"span",54),e.BQk()),2&n){const t=e.oxw(2).$implicit;let i,o;e.xp6(1),e.Q6J("ngIf",null==t||null==(i=t.get("comissionAmount"))||null==i.errors?null:i.errors.required),e.xp6(1),e.Q6J("ngIf",null==t||null==(o=t.get("comissionAmount"))||null==o.errors?null:o.errors.amountExceeded)}}function Ye(n,r){if(1&n&&(e.ynx(0),e.YNc(1,Qe,3,2,"ng-container",47),e.BQk()),2&n){const t=e.oxw().$implicit;let i;e.xp6(1),e.Q6J("ngIf",(null==t||null==(i=t.get("comissionAmount"))?null:i.invalid)&&(null==t||null==(i=t.get("comissionAmount"))?null:i.touched)||(null==t||null==(i=t.get("comissionAmount"))?null:i.dirty))}}function Ge(n,r){1&n&&(e.TgZ(0,"span",55),e._uU(1,"Input is required"),e.qZA())}function Ve(n,r){1&n&&(e.TgZ(0,"span",55),e._uU(1,"Invalid amount"),e.qZA())}function He(n,r){if(1&n&&(e.ynx(0),e.YNc(1,Ge,2,0,"span",54),e.YNc(2,Ve,2,0,"span",54),e.BQk()),2&n){const t=e.oxw(2).$implicit;let i,o;e.xp6(1),e.Q6J("ngIf",null==t||null==(i=t.get("netAmount"))||null==i.errors?null:i.errors.required),e.xp6(1),e.Q6J("ngIf",null==t||null==(o=t.get("netAmount"))||null==o.errors?null:o.errors.amountExceeded)}}function Ee(n,r){if(1&n&&(e.ynx(0),e.YNc(1,He,3,2,"ng-container",47),e.BQk()),2&n){const t=e.oxw().$implicit;let i;e.xp6(1),e.Q6J("ngIf",(null==t||null==(i=t.get("netAmount"))?null:i.invalid)&&(null==t||null==(i=t.get("netAmount"))?null:i.touched)||(null==t||null==(i=t.get("netAmount"))?null:i.dirty))}}function $e(n,r){if(1&n&&e._uU(0),2&n){const t=r.item;e.hij(" ",(null==t?null:t.accountName)+"-"+(null==t?null:t.bankNameEnglish)+"-"+(null==t?null:t.accountNumber)," ")}}function ze(n,r){1&n&&(e.TgZ(0,"span",55),e._uU(1,"Input is required"),e.qZA())}function Ke(n,r){if(1&n&&(e.ynx(0),e.YNc(1,ze,2,0,"span",54),e.BQk()),2&n){const t=e.oxw(2).$implicit;let i;e.xp6(1),e.Q6J("ngIf",null==t||null==(i=t.get("depositDate"))||null==i.errors?null:i.errors.required)}}function Xe(n,r){if(1&n&&(e.ynx(0),e.YNc(1,Ke,2,1,"ng-container",47),e.BQk()),2&n){const t=e.oxw().$implicit;let i;e.xp6(1),e.Q6J("ngIf",(null==t||null==(i=t.get("depositDate"))?null:i.invalid)&&(null==t||null==(i=t.get("depositDate"))?null:i.touched)||(null==t||null==(i=t.get("depositDate"))?null:i.dirty))}}const We=function(){return{required:"Input is required"}},et=function(){return{containerClass:"theme-red",isAnimated:!0,showClearButton:!0}};function tt(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"tr",44)(1,"td")(2,"input",45),e.NdJ("change",function(o){const l=e.CHM(t).index,d=e.oxw();return e.KtG(d.handleChangeCheckBox(o,d.reconciliation[l],l))}),e.qZA()(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.ALo(13,"date"),e.qZA(),e.TgZ(14,"td"),e._uU(15),e.qZA(),e.TgZ(16,"td"),e._uU(17),e.qZA(),e.TgZ(18,"td"),e._uU(19),e.qZA(),e.TgZ(20,"td"),e._uU(21),e.ALo(22,"number"),e.qZA(),e.TgZ(23,"td")(24,"input",46),e.NdJ("change",function(o){const l=e.CHM(t).index,d=e.oxw();return e.KtG(d.handleCommissionAmountChange(o,l,d.reconciliation[l]))}),e.qZA(),e.YNc(25,Ye,2,1,"ng-container",47),e.qZA(),e.TgZ(26,"td")(27,"input",48),e.NdJ("change",function(o){const l=e.CHM(t).index,d=e.oxw();return e.KtG(d.handleNetAmountChange(o,l,d.reconciliation[l]))}),e.qZA(),e.YNc(28,Ee,2,1,"ng-container",47),e.qZA(),e.TgZ(29,"td")(30,"ng-select",49),e.YNc(31,$e,1,1,"ng-template",50),e.qZA(),e._UZ(32,"validation-error",51),e.qZA(),e.TgZ(33,"td")(34,"div",4),e._UZ(35,"input",52,53),e.TgZ(37,"span",7),e.NdJ("click",function(){e.CHM(t);const o=e.MAs(36);return e.KtG(o.toggle())}),e._UZ(38,"img",8),e.qZA()(),e.YNc(39,Xe,2,1,"ng-container",47),e.qZA()()}if(2&n){const t=r.$implicit,i=r.index,o=e.oxw();let a,l,d;e.Q6J("formGroupName",i),e.xp6(4),e.Oqu(null==o.reconciliation[i]?null:o.reconciliation[i].cardLast4Digits),e.xp6(2),e.Oqu((null==o.reconciliation[i]?null:o.reconciliation[i].machineID)||"-"),e.xp6(2),e.Oqu(null==o.reconciliation[i]||null==o.reconciliation[i].provider?null:o.reconciliation[i].provider.providerName),e.xp6(2),e.Oqu(null==o.reconciliation[i]?null:o.reconciliation[i].orderCollectionId),e.xp6(2),e.Oqu(e.xi3(13,18,null==o.reconciliation[i]?null:o.reconciliation[i].collectionAt,"mediumDate")),e.xp6(3),e.Oqu(null==o.reconciliation[i]||null==o.reconciliation[i].branch?null:o.reconciliation[i].branch.branchName),e.xp6(2),e.Oqu(null==o.reconciliation[i]||null==o.reconciliation[i].register?null:o.reconciliation[i].register.registersName),e.xp6(2),e.Oqu(null==o.reconciliation[i]||null==o.reconciliation[i].cardType?null:o.reconciliation[i].cardType.translations[0].lookupName),e.xp6(2),e.Oqu(e.xi3(22,21,null==o.reconciliation[i]?null:o.reconciliation[i].cardCollectionJod,"2.3-3")),e.xp6(3),e.Q6J("ngClass",(null==o.reconciliation[i]?null:o.reconciliation[i].isReturn)&&"disabled"),e.xp6(1),e.Q6J("ngIf",null==t||null==(a=t.get("comissionAmount"))?null:a.errors),e.xp6(3),e.Q6J("ngIf",null==t||null==(l=t.get("netAmount"))?null:l.errors),e.xp6(2),e.Q6J("items",o.bankAccountList),e.xp6(2),e.Q6J("control",t.get("bankaccountID"))("errorMessages",e.DdM(24,We)),e.xp6(3),e.Q6J("bsConfig",e.DdM(25,et)),e.xp6(4),e.Q6J("ngIf",null==t||null==(d=t.get("depositDate"))?null:d.errors)}}function it(n,r){1&n&&(e.TgZ(0,"div",56)(1,"div",57)(2,"div",58),e._UZ(3,"img",59),e.TgZ(4,"h5",60),e._uU(5,"Successfully posted!"),e.qZA(),e.TgZ(6,"p",61),e._uU(7,"Your reconciliation is created successfully"),e.qZA()()()())}function nt(n,r){if(1&n&&(e.TgZ(0,"div",56)(1,"div",57)(2,"div",58),e._UZ(3,"img",62),e.TgZ(4,"h5",60),e._uU(5,"Failed to create reconciliation "),e.qZA(),e.TgZ(6,"p",61),e._uU(7),e.qZA()()()()),2&n){const t=e.oxw();e.xp6(7),e.Oqu(t.erromessage)}}const ot=function(){return{containerClass:"theme-red",isAnimated:!0,showClearButton:!0,rangeInputFormat:"MM-DD-YYYY"}};function lt(n,r){if(1&n&&(e.TgZ(0,"div",7)(1,"label",8),e._uU(2,"Reconciliation Amount:"),e.qZA(),e.TgZ(3,"p",9),e._uU(4),e.ALo(5,"number"),e.qZA()()),2&n){const t=e.oxw();e.xp6(4),e.hij("",e.xi3(5,1,null==t.reconciliation[0]?null:t.reconciliation[0].totalAmount,"1.3-3")," JOD")}}function rt(n,r){if(1&n&&(e.TgZ(0,"div",7)(1,"label",8),e._uU(2,"Reconciliation Net Amount:"),e.qZA(),e.TgZ(3,"p",9),e._uU(4),e.ALo(5,"number"),e.qZA()()),2&n){const t=e.oxw();e.xp6(4),e.hij("",e.xi3(5,1,null==t.reconciliation[0]?null:t.reconciliation[0].totalNetAmount,"1.3-3")," JOD")}}function st(n,r){1&n&&e._uU(0),2&n&&e.hij(" ",r.index+1," ")}function ct(n,r){if(1&n&&(e._uU(0),e.ALo(1,"date")),2&n){const t=r.row;e.hij(" ",e.xi3(1,1,null==t?null:t.collectionAt,"dd MMM yyyy")," ")}}function dt(n,r){if(1&n&&e._uU(0),2&n){const t=r.row;e.hij(" ",null==t.provider?null:t.provider.providerName," ")}}function ut(n,r){if(1&n&&e._uU(0),2&n){const t=r.row;e.hij(" ",null==t.branch?null:t.branch.branchName," ")}}function pt(n,r){if(1&n&&e._uU(0),2&n){const t=r.row;e.hij(" ",null==t.register?null:t.register.registersName," ")}}function mt(n,r){if(1&n&&(e._uU(0),e.ALo(1,"number")),2&n){const t=r.row;e.hij(" ",e.xi3(1,1,null==t?null:t.cardCollectionJod,"1.3-3")," JOD ")}}function gt(n,r){if(1&n&&e._uU(0),2&n){const t=r.row;e.hij(" ",(null==t?null:t.commissionRatio)+" %"||0," ")}}function ht(n,r){if(1&n&&(e._uU(0),e.ALo(1,"number")),2&n){const t=r.row;e.hij(" ",e.xi3(1,1,null==t?null:t.commissionAmount,"1.3-3")+" JOD"||0," ")}}function _t(n,r){if(1&n&&(e._uU(0),e.ALo(1,"number")),2&n){const t=r.row;e.hij(" ",e.xi3(1,1,null==t?null:t.cardCollectionJodNet,"1.3-3")," JOD ")}}function ft(n,r){if(1&n&&e._uU(0),2&n){const t=r.row;e.hij(" ",(null==t||null==t.bank?null:t.bank.bankNameEnglish)+" - "+(null==t||null==t.bank?null:t.bank.accountName)+" - "+(null==t||null==t.bank?null:t.bank.accountNumber)," ")}}function Ct(n,r){if(1&n&&(e._uU(0),e.ALo(1,"date")),2&n){const t=r.row;e.hij(" ",e.xi3(1,1,null==t?null:t.cardBankDepositDate,"mediumDate")||"-"," ")}}function bt(n,r){if(1&n&&(e.TgZ(0,"div",45)(1,"span"),e._uU(2),e.qZA(),e._UZ(3,"img",46),e.qZA()),2&n){const t=r.row;e.xp6(2),e.Oqu(null==t||null==t.cardType||null==t.cardType.translations[0]?null:t.cardType.translations[0].lookupName),e.xp6(1),e.s9C("src",null==t.cardType?null:t.cardType.lookupImage,e.LSH)}}const J=function(){return{containerClass:"theme-red",isAnimated:!0,showClearButton:!0,rangeInputFormat:"MM-DD-YYYY"}},At=function(n,r){return{"background-color":n,color:r}},Tt=[{path:"",component:Ie},{path:"reconciliation",component:(()=>{class n{constructor(t,i,o,a,l,d,b,y){this.creditcardservice=t,this.headerService=i,this.modalService=o,this.router=a,this.modalConfig=l,this.fb=d,this._datePipe=b,this._helperService=y,this.searchText=new s.NI(null),this.netAmount=new s.NI(null),this.collectionDate=new s.NI(null),this.unsubscribe=new Z.x,this.isvalid=!0,this.isReturn=!1,this.tableColumns=[],this.searchChequeNo="",this.searchCustomerNo="",this.loading=!1,this.reconciliation=[],this.bankAccountList=[],this.branchList=[],this.totalAllRecordsCount=0,this.page=1,this.total=0,this.limit=6,this.sort=1,this.startDate="",this.tableConfig={paging:!0,filter:{Sort:1,PageSize:this.limit}},this.selectedAmount=0,this.filterParams="",this.selecteddata=[],this.provider=[],this.cardlist=[],this.modalConfig.centered=!0}ngOnInit(){this.headerService.setTitle("Create Reconciliation"),this.initFilterForm(),this.getData(),this.formGroup=this.fb.group({cardsArray:this.fb.array([])}),this.fetcAllData(),this.getBankAccountList()}getData(){const t=this.creditcardservice.GetProviders({pageSize:1e3,status:2001}),i=this.creditcardservice.GetCards(),o=this.creditcardservice.GetBranch({});(0,A.D)([t,i,o]).subscribe(([a,l,d])=>{this.provider=a.data,this.cardlist=l.data,this.branchList=d.data},a=>{},()=>{this.loading=!1})}initFilterForm(){this.filterForm=this.fb.group({providerId:[null],collectionDate:[""],collectionDateFrom:[""],collectionDateTo:[""],cardTypeId:[null],netAmount:[""],last4digits:[""],machineID:[""],branchId:[null],status:[30001]}),this.filterForm.valueChanges.pipe((0,g.b)(500)).subscribe(t=>{this.page=1;let i=this._helperService.trim(t);i?.collectionDate&&(i={...i,collectionDateFrom:this._datePipe.transform(i.collectionDate[0],"yyyy-MM-dd"),collectionDateTo:this._datePipe.transform(i.collectionDate[1],"yyyy-MM-dd")},delete i.collectionDate),this.filterParams=new URLSearchParams(i).toString(),this.fetcAllData()})}fetcAllData(){this.loading=!0;let t="";t=this.filterParams?`${this.filterParams}&pageSize=1000&pageNo=${this.page-1}&sort=${this.sort}`:`status=30001&pageSize=1000&pageNo=${this.page-1}&sort=${this.sort}`,this.creditcardservice.GetReconHistory(t).subscribe(i=>{i&&(this.reconciliation=i.data||[],this.totalAllRecordsCount=i?.totalRecordCount,this.total=i?.totalRecordCount,this.cardsArray.clear(),this.reconciliation=this.reconciliation.map((o,a)=>(this.cardsArray.push(this.initFormGroup(o)),{...o,checked:!1})))}).add(()=>this.loading=!1)}getBankAccountList(){this.creditcardservice.getBankAccounts("pageSize=1000&status=2001&accountType=15010").subscribe(t=>{this.bankAccountList=t.data})}get cardsArray(){return this.formGroup.get("cardsArray")}getNotReturnedCardTransactions(){let t=this.cardsArray.getRawValue().filter(i=>i?.reconcilationIds>0);t.length&&(this.isReturn=t.every(i=>!i.isReturn))}groupReconciliation(){let t=this.cardsArray.getRawValue().filter(o=>o?.reconcilationIds>0&&!o.isReturn);const i=this.modalService.open(Fe,{size:"lg"});i.componentInstance.data={cardIds:t,totalAmount:this.selectedAmount},i.componentInstance.eventData.subscribe(o=>{this.selectedAmount=0,this.isReturn=!1,this.fetcAllData(),i.dismiss()})}initFormGroup(t){const i=this.fb.group({reconcilationIds:[null],comissionAmount:[""],netAmount:[null],bankaccountID:[null],depositDate:[new Date],checked:[!1],isReturn:[t?.isReturn],cardCollectionJod:[t?.cardCollectionJod]});return t&&t.isReturn&&(i.get("comissionAmount")?.setValue("0"),i.get("comissionAmount")?.disable(),i.get("netAmount")?.setValue(t?.collectedAmount),i.get("netAmount")?.disable()),i}handleCommissionAmountChange(t,i,o){let a=t.target.value;if(a){let l=o?.cardCollectionJod;if(a>l)return void this.cardsArray.at(i).get("comissionAmount")?.setErrors({amountExceeded:!0});this.cardsArray.at(i).get("netAmount")?.setValue((l-a).toFixed(3))}}handleNetAmountChange(t,i,o){let a=t.target.value;if(a){let l=o?.cardCollectionJod;if(a>l)return void this.cardsArray.at(i).get("netAmount")?.setErrors({amountExceeded:!0});this.cardsArray.at(i).get("comissionAmount")?.setValue((l-a).toFixed(3))}}checkAll(t){let i=t.target.checked;this.selectedAmount=0,this.reconciliation.forEach((o,a)=>{i?(this.cardsArray.at(a).get("checked")?.setValue(!0),this.cardsArray.at(a).get("reconcilationIds")?.setValue(o?.ordersCardsCollectionId),this.setValidator("comissionAmount",s.kI.required,a),this.setValidator("netAmount",s.kI.required,a),this.setValidator("depositDate",s.kI.required,a),this.setValidator("bankaccountID",s.kI.required,a),this.selectedAmount+=o.cardCollectionJod):(this.cardsArray.at(a).get("checked")?.setValue(!1),this.cardsArray.at(a).get("reconcilationIds")?.setValue(null),this.setValidator("comissionAmount",null,a),this.setValidator("netAmount",null,a),this.setValidator("depositDate",null,a),this.setValidator("bankaccountID",null,a))}),this.getNotReturnedCardTransactions()}handleChangeCheckBox(t,i,o){t.target.checked?(this.cardsArray.at(o).get("reconcilationIds")?.setValue(i?.ordersCardsCollectionId),this.setValidator("comissionAmount",s.kI.required,o),this.setValidator("netAmount",s.kI.required,o),this.setValidator("bankaccountID",s.kI.required,o),this.selectedAmount+=i?.cardCollectionJod):(this.cardsArray.at(o).get("reconcilationIds")?.setValue(null),this.setValidator("comissionAmount",null,o),this.setValidator("netAmount",null,o),this.setValidator("depositDate",null,o),this.setValidator("bankaccountID",null,o),this.selectedAmount-=i?.cardCollectionJod),this.getNotReturnedCardTransactions()}setValidator(t,i,o){const a=this.cardsArray.at(o).get(t);a&&i?(a.setValidators(i),a.updateValueAndValidity()):i||(a?.clearValidators(),a?.updateValueAndValidity())}onPostReconcilationIds(){let t=this.cardsArray.getRawValue().filter(i=>i.checked).map(i=>({reconcilationIds:i?.reconcilationIds,commission:i?.comissionAmount,cardCollectionJodNet:i?.netAmount,cardBankDepositDate:i?.depositDate,bankaccountID:i?.bankaccountID}));this.creditcardservice.ReconcilationIds(t).subscribe(i=>{i.isSuccess&&(this.responseModal("success","Reconciliation successfully done."),this.fetcAllData(),this.selectedAmount=0)},i=>{this.responseModal("error",i?.error?.errors[0]?.ErrorMessageEn)}).add(()=>this.loading=!1)}responseModal(t,i){const o=this.modalService.open(q.e);o.componentInstance.type=t,o.componentInstance.message=i}openmdel(){this.modalService.open(this.event,{ariaLabelledBy:"modal-basic-title"}).result.then(t=>{this.closeResult=`Closed with: ${t}`},t=>{this.closeResult=`Dismissed ${this.getDismissReason(t)}`})}openmdelerroe(){this.modalService.open(this.eventerror,{ariaLabelledBy:"modal-basic-title"}).result.then(t=>{this.closeResult=`Closed with: ${t}`},t=>{this.closeResult=`Dismissed ${this.getDismissReason(t)}`})}getDismissReason(t){return t===C.If.ESC?"by pressing ESC":t===C.If.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${t}`}sortByCardLast4Digits(){this.sort=3==this.sort?1:2==this.sort?3:2,this.fetcAllData()}sortByProviderName(){this.sort=5==this.sort?1:4==this.sort?5:4,this.fetcAllData()}sortByOrderCollectionId(){this.sort=7==this.sort?1:6==this.sort?7:6,this.fetcAllData()}sortByCollectionAt(){this.sort=9==this.sort?1:8==this.sort?9:8,this.fetcAllData()}sortByBranchName(){this.sort=11==this.sort?1:10==this.sort?11:10,this.fetcAllData()}sortByRegisterName(){this.sort=11==this.sort?1:10==this.sort?11:10,this.fetcAllData()}sortByCardType(){this.sort=13==this.sort?1:12==this.sort?13:12,this.fetcAllData()}sortByCardCollectionJod(){this.sort=15==this.sort?1:14==this.sort?15:14,this.fetcAllData()}onPageChange(t){this.page=t,this.fetcAllData()}modelClose(t){1==t?(this.modalService.dismissAll(),this.router.navigate(["credit-card"],{queryParams:{num:2}})):this.modalService.dismissAll()}validateInput(t){const i=t.target.value;/^[0-9]*\.?[0-9]*$/.test(i)||(t.target.value=i.replace(/[^0-9.]/g,""))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(T.$),e.Y36(v.r),e.Y36(C.FF),e.Y36(m.F0),e.Y36(C.NM),e.Y36(s.qu),e.Y36(u.uU),e.Y36(N.W))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-create-reconciliation"]],viewQuery:function(t,i){if(1&t&&(e.Gf(Pe,5),e.Gf(Oe,5)),2&t){let o;e.iGM(o=e.CRH())&&(i.event=o.first),e.iGM(o=e.CRH())&&(i.eventerror=o.first)}},features:[e._Bn([u.uU])],decls:127,vars:61,consts:[[3,"formGroup"],[1,"row"],[1,"col-3","mb-3"],["formControlName","providerId","placeholder","Provider","bindLabel","providerName","bindValue","providerId",1,"flex-grow-1","mt-3","mt-md-0",3,"items"],[1,"input-group"],["type","text","placeholder","Collection Date","formControlName","collectionDate","bsDaterangepicker","",1,"form-control","custom-input-field",3,"bsConfig"],["toDate","bsDaterangepicker"],[1,"input-group-text","cursor-pointer",3,"click"],["src","/assets/images/calendar.png","alt","",1,"calender"],["formControlName","cardTypeId","placeholder","Search By Card","bindLabel","name.lookupName","bindValue","id",1,"flex-grow-1","mt-3","mt-md-0",3,"items"],[1,"input-group-text"],[1,"fa-solid","fa-search"],["type","text","placeholder","Net Amount","formControlName","netAmount",1,"form-control","height-45"],["type","text","placeholder","Last 4 Digits","formControlName","last4digits",1,"form-control","height-45"],["type","text","placeholder","Merchant ID","formControlName","machineID",1,"form-control","height-45"],["formControlName","branchId","placeholder","Search By Branch","bindLabel","branchName","bindValue","branchId",1,"flex-grow-1","mt-3","mt-md-0",3,"items"],[1,"col-12","mb-3","d-flex","justify-content-end"],[1,"btn","btn-add",3,"click"],[1,"row","mt-2"],[1,"col-lg-12","text-heading"],[1,"col-lg-6","text-heading"],[1,"col-lg-5","offset-1"],[1,"col-lg-9","text-end","text-heading"],[1,"col-lg-3","text-end"],[1,"table-advanced","custom-table","mt-3"],[1,"table-wrapper","table-responsive"],[1,"table"],["scope","col"],[1,"btn","d-flex","gap-2","flex-column","align-items-start","justify-content-start",3,"disabled"],["type","checkbox",1,"form-check-input","input-checkbox",3,"change"],[1,"btn",3,"disabled","click"],[1,"fa-solid","fa-arrow-up-long"],[1,"fa-solid","fa-arrow-down-long"],[1,"btn",3,"disabled"],["scope","col","width","15%"],["formArrayName","cardsArray"],[3,"formGroupName",4,"ngFor","ngForOf"],[1,"col-lg-12","mt-3","text-end"],["routerLink","/credit-card",1,"btn","btn-cancel","me-2"],[1,"btn","btn-add","me-2",3,"disabled","click"],[1,"btn","btn-add",3,"disabled","click"],["class","modal fade w-100 modal-dialog-centered","id","exampleModalToggle","aria-hidden","true","aria-labelledby","exampleModalToggleLabel","tabindex","-1"],["myModal",""],["myErrorModal",""],[3,"formGroupName"],["type","checkbox","formControlName","checked",1,"form-check-input","input-checkbox",3,"change"],["type","text","formControlName","comissionAmount","decimalNumber","",1,"form-control",3,"ngClass","change"],[4,"ngIf"],["type","text","formControlName","netAmount","decimalNumber","",1,"form-control",3,"change"],["placeholder","Bank Account","formControlName","bankaccountID","bindLabel","accountName","bindValue","accountId",3,"items"],["ng-option-tmp",""],[3,"control","errorMessages"],["type","text","formControlName","depositDate","placeholder","Select Date","bsDatepicker","",1,"form-control","custom-input-field",3,"bsConfig"],["drp","bsDatepicker"],["class","text-danger",4,"ngIf"],[1,"text-danger"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-body","text-center"],["src","../../../assets/svg/check-one.svg","alt","","srcset","",1,"mt-4"],[1,"mt-4"],[1,"mt-3","mb-4"],["src","../../../assets/svg/close-circle.svg","alt","","srcset","",1,"mt-2"]],template:function(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"form",0)(1,"div",1)(2,"div",2),e._UZ(3,"ng-select",3),e.qZA(),e.TgZ(4,"div",2)(5,"div",4),e._UZ(6,"input",5,6),e.TgZ(8,"span",7),e.NdJ("click",function(){e.CHM(o);const l=e.MAs(7);return e.KtG(l.toggle())}),e._UZ(9,"img",8),e.qZA()()(),e.TgZ(10,"div",2),e._UZ(11,"ng-select",9),e.qZA(),e.TgZ(12,"div",2)(13,"div",4)(14,"span",10),e._UZ(15,"i",11),e.qZA(),e._UZ(16,"input",12),e.qZA()(),e.TgZ(17,"div",2)(18,"div",4)(19,"span",10),e._UZ(20,"i",11),e.qZA(),e._UZ(21,"input",13),e.qZA()(),e.TgZ(22,"div",2)(23,"div",4)(24,"span",10),e._UZ(25,"i",11),e.qZA(),e._UZ(26,"input",14),e.qZA()(),e.TgZ(27,"div",2),e._UZ(28,"ng-select",15),e.qZA(),e.TgZ(29,"div",16)(30,"button",17),e.NdJ("click",function(){return i.filterForm.reset({status:"30001"})}),e._uU(31,"Clear Filters"),e.qZA()()()(),e.TgZ(32,"div",18)(33,"div",19)(34,"h5"),e._uU(35),e.ALo(36,"number"),e.qZA()()(),e.TgZ(37,"div",18)(38,"div",20)(39,"h5"),e._uU(40,"Unreconciled Cards Transactions List"),e.qZA()(),e.TgZ(41,"div",21)(42,"div",1),e._UZ(43,"div",22),e.TgZ(44,"div",23)(45,"p"),e._uU(46),e.qZA()()()(),e.TgZ(47,"div",24)(48,"form",0)(49,"div",25)(50,"table",26)(51,"thead")(52,"tr")(53,"th",27)(54,"button",28),e._uU(55," Select All "),e.TgZ(56,"input",29),e.NdJ("change",function(l){return i.checkAll(l)}),e.qZA()()(),e.TgZ(57,"th",27)(58,"button",30),e.NdJ("click",function(){return i.sortByCardLast4Digits()}),e._uU(59," Last 4 Digit "),e._UZ(60,"i",31)(61,"i",32),e.qZA()(),e.TgZ(62,"th",27)(63,"button",33),e._uU(64,"Merchant ID"),e.qZA()(),e.TgZ(65,"th",27)(66,"button",30),e.NdJ("click",function(){return i.sortByProviderName()}),e._uU(67," Provider "),e._UZ(68,"i",31)(69,"i",32),e.qZA()(),e.TgZ(70,"th",27)(71,"button",30),e.NdJ("click",function(){return i.sortByOrderCollectionId()}),e._uU(72," Invoice "),e._UZ(73,"i",31)(74,"i",32),e.qZA()(),e.TgZ(75,"th",27)(76,"button",30),e.NdJ("click",function(){return i.sortByCollectionAt()}),e._uU(77," Date "),e._UZ(78,"i",31)(79,"i",32),e.qZA()(),e.TgZ(80,"th",27)(81,"button",30),e.NdJ("click",function(){return i.sortByBranchName()}),e._uU(82," Branch Name "),e._UZ(83,"i",31)(84,"i",32),e.qZA()(),e.TgZ(85,"th",27)(86,"button",30),e.NdJ("click",function(){return i.sortByRegisterName()}),e._uU(87," Register Name "),e._UZ(88,"i",31)(89,"i",32),e.qZA()(),e.TgZ(90,"th",27)(91,"button",30),e.NdJ("click",function(){return i.sortByCardType()}),e._uU(92," Card Type "),e._UZ(93,"i",31)(94,"i",32),e.qZA()(),e.TgZ(95,"th",27)(96,"button",30),e.NdJ("click",function(){return i.sortByCardCollectionJod()}),e._uU(97," Amount "),e._UZ(98,"i",31)(99,"i",32),e.qZA()(),e.TgZ(100,"th",27)(101,"button",33),e._uU(102," Commission Amount"),e.qZA()(),e.TgZ(103,"th",27)(104,"button",33),e._uU(105," Net Amount"),e.qZA()(),e.TgZ(106,"th",27)(107,"button",33),e._uU(108,"Bank Account Name"),e.qZA()(),e.TgZ(109,"th",34)(110,"button",33),e._uU(111,"Bank Deposit Date"),e.qZA()()()(),e.TgZ(112,"tbody",35),e.YNc(113,tt,40,26,"tr",36),e.qZA()()()()(),e.TgZ(114,"div",37)(115,"button",38)(116,"span"),e._uU(117,"Close"),e.qZA()(),e.TgZ(118,"button",39),e.NdJ("click",function(){return i.groupReconciliation()}),e._uU(119,"Group Reconciliation"),e.qZA(),e.TgZ(120,"button",40),e.NdJ("click",function(){return i.onPostReconcilationIds()}),e.TgZ(121,"span"),e._uU(122,"Post"),e.qZA()()()(),e.YNc(123,it,8,0,"ng-template",41,42,e.W1O),e.YNc(125,nt,8,1,"ng-template",41,43,e.W1O)}2&t&&(e.Q6J("formGroup",i.filterForm),e.xp6(3),e.Q6J("items",i.provider),e.xp6(3),e.Q6J("bsConfig",e.DdM(60,ot)),e.xp6(5),e.Q6J("items",i.cardlist),e.xp6(17),e.Q6J("items",i.branchList),e.xp6(7),e.hij("Selected Amount: ",e.xi3(36,57,i.selectedAmount,"1.3-3")," JOD"),e.xp6(11),e.hij("Total No. ",i.total,""),e.xp6(2),e.Q6J("formGroup",i.formGroup),e.xp6(6),e.Q6J("disabled",0==i.reconciliation.length),e.xp6(4),e.Q6J("disabled",0==i.reconciliation.length),e.xp6(2),e.ekj("active",2==i.sort),e.xp6(1),e.ekj("active",3==i.sort),e.xp6(2),e.Q6J("disabled",0==i.reconciliation.length),e.xp6(3),e.Q6J("disabled",0==i.reconciliation.length),e.xp6(2),e.ekj("active",4==i.sort),e.xp6(1),e.ekj("active",5==i.sort),e.xp6(2),e.Q6J("disabled",0==i.reconciliation.length),e.xp6(2),e.ekj("active",6==i.sort),e.xp6(1),e.ekj("active",7==i.sort),e.xp6(2),e.Q6J("disabled",0==i.reconciliation.length),e.xp6(2),e.ekj("active",8==i.sort),e.xp6(1),e.ekj("active",9==i.sort),e.xp6(2),e.Q6J("disabled",0==i.reconciliation.length),e.xp6(2),e.ekj("active",10==i.sort),e.xp6(1),e.ekj("active",11==i.sort),e.xp6(2),e.Q6J("disabled",0==i.reconciliation.length),e.xp6(2),e.ekj("active",10==i.sort),e.xp6(1),e.ekj("active",11==i.sort),e.xp6(2),e.Q6J("disabled",0==i.reconciliation.length),e.xp6(2),e.ekj("active",12==i.sort),e.xp6(1),e.ekj("active",13==i.sort),e.xp6(2),e.Q6J("disabled",0==i.reconciliation.length),e.xp6(2),e.ekj("active",14==i.sort),e.xp6(1),e.ekj("active",15==i.sort),e.xp6(2),e.Q6J("disabled",0==i.reconciliation.length),e.xp6(3),e.Q6J("disabled",0==i.reconciliation.length),e.xp6(3),e.Q6J("disabled",0==i.reconciliation.length),e.xp6(3),e.Q6J("disabled",0==i.reconciliation.length),e.xp6(3),e.Q6J("ngForOf",i.cardsArray.controls),e.xp6(5),e.Q6J("disabled",!i.isReturn),e.xp6(2),e.Q6J("disabled",i.formGroup.invalid||0==i.selectedAmount))},dependencies:[u.mk,u.sg,u.O5,m.rH,s._Y,s.Fj,s.Wl,s.JJ,s.JL,s.sg,s.u,s.x0,s.CE,f.w9,f.ir,p.Np,p.Y5,p.FR,p.TB,U,I.L,u.JJ,u.uU],styles:[".applyMargin[_ngcontent-%COMP%]{margin-top:2.5rem}.total[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:18px;font-weight:600;margin:15px 0 0;padding:10px 0}.total[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:500;font-size:16px;line-height:19px;color:#929eae;margin:0;padding:10px 0}.card-table[_ngcontent-%COMP%]{border:.5px solid #f4f4f4;box-shadow:3px 7px 12px #0000002e;-webkit-box-shadow:3px 7px 12px 0px rgba(0,0,0,.18);-moz-box-shadow:3px 7px 12px 0px rgba(0,0,0,.18)}.btn-provide[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff;outline:none;border:none;padding:8px 14px;border-radius:4px;font-size:12px;width:80px}.btn-disabled[_ngcontent-%COMP%]{background-color:#c5c6c7;color:#fff;outline:none;border:none;padding:8px 14px;border-radius:4px;font-size:12px;width:80px}.pagination[_ngcontent-%COMP%]{display:flex;justify-content:end;align-items:center;gap:8px}.play-left[_ngcontent-%COMP%]{color:#eceaea;transform:rotate(180deg);margin-right:5px}.play-right[_ngcontent-%COMP%]{color:#eceaea}.dropdownBox[_ngcontent-%COMP%]{position:absolute;width:150px;height:48px;background:#4e9aff;border-radius:8px}.headButton[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:95px;height:34.2px;border-radius:8px}.headButtonText[_ngcontent-%COMP%]{font-family:Kumbh Sans;font-size:14px;font-weight:600;line-height:17px;letter-spacing:0em;text-align:left}.menu[_ngcontent-%COMP%]{width:180px;filter:drop-shadow(0px 10px 20px rgba(0,0,0,.1))}.menu2[_ngcontent-%COMP%]{width:235px;filter:drop-shadow(0px 10px 20px rgba(0,0,0,.1))}.more-filter-drop[_ngcontent-%COMP%]{height:46px;width:150px;background:#4e9aff;border-radius:8px;color:#fff;outline:none;border:none}.dropdown-item[_ngcontent-%COMP%]{padding:12px;display:flex;justify-content:flex-start;align-items:center}.checkBox[_ngcontent-%COMP%]{accent-color:#dc3545;width:20px;height:20px}.dropdownFilters[_ngcontent-%COMP%]{border-radius:8px;display:flex;justify-content:space-between;align-items:center;gap:8px;border:1px solid #dc3545}.filterFlex[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:center;gap:8px;flex-wrap:wrap}.btn-edit[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px}p[_ngcontent-%COMP%]{font-weight:500;font-size:16px;line-height:19px;color:#929eae;margin:0}.btn-cancel[_ngcontent-%COMP%]{padding:12px 24px;background-color:#f8f8f8;border-radius:8px;color:red}.modal-content[_ngcontent-%COMP%]{border:0px}"]}),n})()},{path:"reconciliation-details",component:(()=>{class n{constructor(t,i,o,a,l,d){this.route=t,this.fb=i,this.creditcardservice=o,this._helperService=a,this._datePipe=l,this.headerService=d,this.searchChequeText=new s.NI(null),this.searchText=new s.NI(null),this.unsubscribe=new Z.x,this.tableColumns=[],this.searchChequeNo="",this.searchCustomerNo="",this.loading=!1,this.chequeList=[],this.cardlist=[],this.branchList=[],this.page=1,this.total=0,this.limit=6,this.sort=1,this.startDate="",this.tableConfig={paging:!0,filter:{Sort:1,PageSize:this.limit}},this.filterParams="";const b=this.route.snapshot.queryParamMap.get("reconciliationHistoryid");b&&(this.reconsilationstepid=b)}ngOnInit(){this.headerService.setTitle("Reconciliation History > Reconciliation Details"),this.getData(),this.initFilterForm(),this.initTableColumns(),this.GetReconciliationTable(this.reconsilationstepid),this.getDetails()}initFilterForm(){this.filterForm=this.fb.group({providerId:[null],collectionDate:[""],depositDate:[""],cardTypeId:[null],last4digits:[""],machineID:[""],branchId:[null],reconciliationId:[this.reconsilationstepid]}),this.filterForm.valueChanges.pipe((0,g.b)(500)).subscribe(t=>{this.page=1;let i=this._helperService.trim(t);i?.collectionDate&&(i={...i,collectionDateFrom:this._datePipe.transform(i.collectionDate[0],"yyyy-MM-dd"),collectionDateTo:this._datePipe.transform(i.collectionDate[1],"yyyy-MM-dd")},delete i.collectionDate),i?.depositDate&&(i={...i,bankDepositDateFrom:this._datePipe.transform(i.depositDate[0],"yyyy-MM-dd"),bankDepositDateTo:this._datePipe.transform(i.depositDate[1],"yyyy-MM-dd")},delete i.depositDate),this.filterParams=new URLSearchParams(i).toString(),this.getDetails()})}resetFilterForm(){this.filterForm.reset({reconciliationId:this.reconsilationstepid})}getDetails(){let t="";t=this.filterParams?`${this.filterParams}&pageSize=6&pageNo=${this.page-1}&sort=${this.sort}`:`reconciliationId=${this.reconsilationstepid}&pageSize=6&pageNo=${this.page-1}&sort=${this.sort}`,this.creditcardservice.ReconciledTransactionsList(t).subscribe(i=>{this.chequeList=i.data,this.total=i.totalRecordCount,this.cardsData=i.info})}getData(){const t=this.creditcardservice.GetProviders({pageSize:1e3,status:2001}),i=this.creditcardservice.GetCards(),o=this.creditcardservice.GetBranch({});(0,A.D)([t,i,o]).subscribe(([a,l,d])=>{this.provider=a.data,this.cardlist=l.data,this.branchList=d.data},a=>{},()=>{this.loading=!1})}initTableColumns(){this.tableColumns=[{key:"No",label:"No.",canSort:!1},{key:"cardLast4Digits",label:"Last 4 Digit",canSort:!0},{key:"provider",label:"Provider",canSort:!0},{key:"machineID",label:"Merchant ID"},{key:"machineReceiptNumber",label:"Machine Receipt Number",canSort:!0},{key:"collectionAt",label:"Collection Date",canSort:!0},{key:"branch",label:"Branch Name",canSort:!0},{key:"register",label:"Register Name",canSort:!0},{key:"cardType",label:"Card Type",canSort:!0},{key:"cardCollectionJod",label:"Amount",canSort:!0},{key:"commissionRatio",label:"Commission Ratio"},{key:"commissionAmount",label:"Commission Amount"},{key:"cardCollectionJodNet",label:"Net Amount:",canSort:!0},{key:"bankDepositAccount",label:"Bank Deposit Account"},{key:"cardBankDepositDate",label:"Bank Deposit Date"}]}onSortChange(t){if(t?.direction&&t?.column)switch(t.column){case"cardLast4Digits":this.tableConfig.filter.Sort="desc"===t.direction?3:2;break;case"reconciliationDetailId":this.tableConfig.filter.Sort="desc"===t.direction?5:4;break;case"provider":this.tableConfig.filter.Sort="desc"===t.direction?7:6;break;case"machineReceiptNumber":this.tableConfig.filter.Sort="desc"===t.direction?9:8;break;case"collectionAt":this.tableConfig.filter.Sort="desc"===t.direction?11:10;break;case"branch":this.tableConfig.filter.Sort="desc"===t.direction?13:12;break;case"register":this.tableConfig.filter.Sort="desc"===t.direction?15:14;break;case"cardType":this.tableConfig.filter.Sort="desc"===t.direction?17:16;break;case"cardCollectionJod":this.tableConfig.filter.Sort="desc"===t.direction?19:18;break;case"cardCollectionJodNet":this.tableConfig.filter.Sort="desc"===t.direction?21:20}else this.tableConfig.filter.Sort=1;this.GetReconciliationTable(this.reconsilationstepid)}onPageChange(t){this.page=t,this.getDetails()}GetReconciliationTable(t){this.tableConfig.filter.PageNo=this.page-1,this.tableConfig.filter.ReconciliationId=parseInt(t);const i=this.creditcardservice.GetReconciliationHistory(this.tableConfig.filter);(0,A.D)([i]).subscribe(([o])=>{o&&(this.reconciliation=o.data,this.extractedTime=this.reconciliation[0]?.createdAt)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m.gz),e.Y36(s.qu),e.Y36(T.$),e.Y36(N.W),e.Y36(u.uU),e.Y36(v.r))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-reconciliation-details"]],decls:110,vars:40,consts:[[1,"row","mt-2"],[1,"col-lg-12","text-heading"],[1,"mb-3"],[1,"col-12","mb-4"],[1,"row"],[1,"col-3"],[1,"rh-card"],[1,"col-md-3"],[1,"mb-1","label"],[1,"P-light"],["class","col-md-3",4,"ngIf"],[3,"formGroup"],[1,"col-3","mb-3"],[1,"input-group"],[1,"input-group-text"],[1,"fa-solid","fa-search"],["type","text","placeholder","Last 4 Digits","formControlName","last4digits",1,"form-control","height-45"],["formControlName","providerId","placeholder","Provider","bindLabel","providerName","bindValue","providerId",1,"flex-grow-1","mt-3","mt-md-0",3,"items"],["type","text","placeholder","Collection Date","formControlName","collectionDate","bsDaterangepicker","",1,"form-control","custom-input-field",3,"bsConfig"],["toDate","bsDaterangepicker"],[1,"input-group-text","cursor-pointer",3,"click"],["src","/assets/images/calendar.png","alt","",1,"calender"],["formControlName","branchId","placeholder","Search By Branch","bindLabel","branchName","bindValue","branchId",1,"flex-grow-1","mt-3","mt-md-0",3,"items"],["type","text","placeholder","Deposit Date","formControlName","depositDate","bsDaterangepicker","",1,"form-control","custom-input-field",3,"bsConfig"],["depositDate","bsDaterangepicker"],["formControlName","cardTypeId","placeholder","Search By Card","bindLabel","name.lookupName","bindValue","id",1,"flex-grow-1","mt-3","mt-md-0",3,"items"],["type","text","placeholder","Merchant ID","formControlName","machineID",1,"form-control","height-45"],[1,"col-12","mb-3","d-flex","justify-content-end"],[1,"btn","btn-add",3,"click"],[1,"col-lg-12","text-heading","mt-2"],[1,"text-end"],[1,"col-lg-12","mt-4"],[3,"config","columns","data","loading","page","total","limit","sortUpdated","pageUpdated"],["libTableAdvancedColumn","No"],["libTableAdvancedColumn","collectionAt"],["libTableAdvancedColumn","provider"],["libTableAdvancedColumn","branch"],["libTableAdvancedColumn","register"],["libTableAdvancedColumn","cardCollectionJod"],["libTableAdvancedColumn","commissionRatio"],["libTableAdvancedColumn","commissionAmount"],["libTableAdvancedColumn","cardCollectionJodNet"],["libTableAdvancedColumn","bankDepositAccount"],["libTableAdvancedColumn","cardBankDepositDate"],["libTableAdvancedColumn","cardType"],[1,"d-flex","flex-column"],["alt","","srcset","","width","55",3,"src"]],template:function(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"h5",2),e._uU(3,"Reconciliation Details"),e.qZA()(),e.TgZ(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"h6"),e._uU(9,"Reconciliation Amount"),e.qZA(),e.TgZ(10,"h6")(11,"b"),e._uU(12),e.ALo(13,"number"),e.qZA(),e._uU(14," JOD"),e.qZA()()(),e.TgZ(15,"div",5)(16,"div",6)(17,"h6"),e._uU(18,"Commission Amount"),e.qZA(),e.TgZ(19,"h6")(20,"b"),e._uU(21),e.ALo(22,"number"),e.qZA(),e._uU(23," JOD"),e.qZA()()(),e.TgZ(24,"div",5)(25,"div",6)(26,"h6"),e._uU(27,"Net Amount"),e.qZA(),e.TgZ(28,"h6")(29,"b"),e._uU(30),e.ALo(31,"number"),e.qZA(),e._uU(32," JOD"),e.qZA()()()()(),e.TgZ(33,"div",7)(34,"label",8),e._uU(35,"Created by:"),e.qZA(),e.TgZ(36,"p",9),e._uU(37),e.qZA()(),e.TgZ(38,"div",7)(39,"label",8),e._uU(40,"Date:"),e.qZA(),e.TgZ(41,"p",9),e._uU(42),e.ALo(43,"date"),e.qZA()(),e.TgZ(44,"div",7)(45,"label",8),e._uU(46,"Time:"),e.qZA(),e.TgZ(47,"p",9),e._uU(48),e.ALo(49,"date"),e.qZA()(),e.YNc(50,lt,6,4,"div",10),e.YNc(51,rt,6,4,"div",10),e.TgZ(52,"div",7)(53,"label",8),e._uU(54,"Reconciliation Number:"),e.qZA(),e.TgZ(55,"p",9),e._uU(56),e.qZA()()(),e.TgZ(57,"form",11)(58,"div",4)(59,"div",12)(60,"div",13)(61,"span",14),e._UZ(62,"i",15),e.qZA(),e._UZ(63,"input",16),e.qZA()(),e.TgZ(64,"div",12),e._UZ(65,"ng-select",17),e.qZA(),e.TgZ(66,"div",12)(67,"div",13),e._UZ(68,"input",18,19),e.TgZ(70,"span",20),e.NdJ("click",function(){e.CHM(o);const l=e.MAs(69);return e.KtG(l.toggle())}),e._UZ(71,"img",21),e.qZA()()(),e.TgZ(72,"div",12),e._UZ(73,"ng-select",22),e.qZA(),e.TgZ(74,"div",12)(75,"div",13),e._UZ(76,"input",23,24),e.TgZ(78,"span",20),e.NdJ("click",function(){e.CHM(o);const l=e.MAs(77);return e.KtG(l.toggle())}),e._UZ(79,"img",21),e.qZA()()(),e.TgZ(80,"div",12),e._UZ(81,"ng-select",25),e.qZA(),e.TgZ(82,"div",12)(83,"div",13)(84,"span",14),e._UZ(85,"i",15),e.qZA(),e._UZ(86,"input",26),e.qZA()(),e.TgZ(87,"div",27)(88,"button",28),e.NdJ("click",function(){return i.resetFilterForm()}),e._uU(89,"Clear Filters"),e.qZA()()()(),e.TgZ(90,"div",0)(91,"div",29)(92,"h5"),e._uU(93,"Reconciled Transactions List"),e.qZA(),e.TgZ(94,"h6",30),e._uU(95),e.qZA()(),e.TgZ(96,"div",31)(97,"app-table-advanced",32),e.NdJ("sortUpdated",function(l){return i.onSortChange(l)})("pageUpdated",function(l){return i.onPageChange(l)}),e.YNc(98,st,1,1,"ng-template",33),e.YNc(99,ct,2,4,"ng-template",34),e.YNc(100,dt,1,1,"ng-template",35),e.YNc(101,ut,1,1,"ng-template",36),e.YNc(102,pt,1,1,"ng-template",37),e.YNc(103,mt,2,4,"ng-template",38),e.YNc(104,gt,1,1,"ng-template",39),e.YNc(105,ht,2,4,"ng-template",40),e.YNc(106,_t,2,4,"ng-template",41),e.YNc(107,ft,1,1,"ng-template",42),e.YNc(108,Ct,2,4,"ng-template",43),e.YNc(109,bt,4,2,"ng-template",44),e.qZA()()()}2&t&&(e.xp6(12),e.Oqu(e.xi3(13,23,null==i.cardsData?null:i.cardsData.totalReconciliationAmount,"2.3-3")),e.xp6(9),e.Oqu(e.xi3(22,26,null==i.cardsData?null:i.cardsData.totalCommissionAmount,"2.3-3")),e.xp6(9),e.Oqu(e.xi3(31,29,null==i.cardsData?null:i.cardsData.totalNetAmount,"2.3-3")),e.xp6(7),e.Oqu(i.reconciliation&&null!=i.reconciliation[0]&&i.reconciliation[0].createdBy.fullName?null==i.reconciliation[0]?null:i.reconciliation[0].createdBy.fullName:"-"),e.xp6(5),e.Oqu(i.reconciliation&&null!=i.reconciliation[0]&&i.reconciliation[0].createdAt?e.xi3(43,32,null==i.reconciliation[0]?null:i.reconciliation[0].createdAt,"dd MMM yyyy"):"-"),e.xp6(6),e.Oqu(e.xi3(49,35,i.extractedTime,"shortTime")),e.xp6(2),e.Q6J("ngIf",i.reconciliation),e.xp6(1),e.Q6J("ngIf",i.reconciliation),e.xp6(5),e.Oqu(i.reconciliation&&null!=i.reconciliation[0]&&i.reconciliation[0].reconciliationHistoryId?null==i.reconciliation[0]?null:i.reconciliation[0].reconciliationHistoryId:"-"),e.xp6(1),e.Q6J("formGroup",i.filterForm),e.xp6(8),e.Q6J("items",i.provider),e.xp6(3),e.Q6J("bsConfig",e.DdM(38,J)),e.xp6(5),e.Q6J("items",i.branchList),e.xp6(3),e.Q6J("bsConfig",e.DdM(39,J)),e.xp6(5),e.Q6J("items",i.cardlist),e.xp6(14),e.hij("Total No. : ",i.total,""),e.xp6(2),e.Q6J("config",i.tableConfig)("columns",i.tableColumns)("data",i.chequeList)("loading",i.loading)("page",i.page)("total",i.total)("limit",i.limit))},dependencies:[u.O5,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,f.w9,x.V,p.FR,p.TB,k.y,u.JJ,u.uU],styles:[".label[_ngcontent-%COMP%]{font-weight:700;font-size:16px}.P-light[_ngcontent-%COMP%]{color:#9b9b9b;font-size:15px}.rh-card[_ngcontent-%COMP%]{padding:20px;border-radius:5px;box-shadow:0 0 8px 1px #00000014;background:white}.rh-card[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:18px;font-weight:600}"]}),n})()},{path:"payment-details",component:(()=>{class n{constructor(t,i,o,a){this.route=t,this.creditcardservice=i,this.headerService=o,this.router=a,this.loading=!1,this.tableConfig={paging:!0,filter:{}};const l=this.route.snapshot.queryParamMap.get("ordersCardsCollectionId");l&&(this.tableConfig.filter.OrdersCardsCollectionId=l)}ngOnInit(){this.headerService.setTitle("Credit Cards Payments > Payment Details View"),this.getdetial()}getdetial(){this.creditcardservice.getCardsCollectionDetial(this.tableConfig.filter).subscribe(t=>{if(t){this.data=t;const o=t.settledAt,a=new Date(t.collectionAt),l=new Date(o);this.extractedDate=a.toLocaleDateString(),this.extractedTime=a.toLocaleTimeString(),this.extractedDatesettled=l.toLocaleDateString(),this.extractedTimesettled=l.toLocaleTimeString(),this.lookupname=t.statusObj.translations[0].lookupName,this.lookupcolor=t.statusObj.lookupBGColor,this.lookupTextColor=t.statusObj.lookupTextColor}}).add(()=>this.loading=!1)}close(){this.router.navigate(["credit-card"])}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m.gz),e.Y36(T.$),e.Y36(v.r),e.Y36(m.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-payment-detail-view"]],decls:171,vars:51,consts:[[1,"cr-card"],[1,"wizard-content"],[1,"top-heading"],[1,"btn-light","collected-btn",3,"ngStyle"],[1,"row"],[1,"col-lg-4","col-md-6","filterFlex"],[1,"form-group","input-group","search-box","p-3"],[1,"input-group","search-box","p-3"],["alt","","width","35",1,"me-3",3,"src"],[1,"row","mt-2"],[1,"col-2","filterFlex"],[1,"col-md-6"],[1,"row","mb-4"],[1,"col-lg-3","col-md-6","filterFlex"],[1,"form-group","input-group"],[1,"input-group"],[1,"row","my-2"],[1,"my-5"],[1,"col-md-11"],[1,"col-md-1"],[1,"btns-group"],["type","button",1,"btn","btn-cancel",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h5"),e._uU(4," Customer Name: "),e.TgZ(5,"span"),e._uU(6),e.qZA()(),e.TgZ(7,"p",3),e._uU(8),e.qZA()()(),e.TgZ(9,"div",1)(10,"div",4)(11,"div",5)(12,"label")(13,"b"),e._uU(14,"Paid Amount"),e.qZA()(),e.TgZ(15,"div",6),e._uU(16),e.ALo(17,"number"),e.ALo(18,"number"),e.qZA()(),e.TgZ(19,"div",5)(20,"label")(21,"b"),e._uU(22,"Card Type"),e.qZA()(),e.TgZ(23,"div",7),e._UZ(24,"img",8),e._uU(25),e.qZA()(),e.TgZ(26,"div",5)(27,"label")(28,"b"),e._uU(29,"Last 4 digits of the card"),e.qZA()(),e.TgZ(30,"div",7),e._uU(31),e.qZA()()(),e.TgZ(32,"div",9)(33,"div",5)(34,"label")(35,"b"),e._uU(36,"Payer name"),e.qZA()(),e.TgZ(37,"div",6),e._uU(38),e.qZA()(),e.TgZ(39,"div",5)(40,"label")(41,"b"),e._uU(42,"Machine Receipt No."),e.qZA()(),e.TgZ(43,"div",7),e._uU(44),e.qZA()(),e.TgZ(45,"div",10)(46,"label")(47,"b"),e._uU(48,"Merchant ID"),e.qZA()(),e.TgZ(49,"div",7),e._uU(50),e.qZA()(),e.TgZ(51,"div",10)(52,"label")(53,"b"),e._uU(54,"Bank Deposit Date"),e.qZA()(),e.TgZ(55,"div",7),e._uU(56),e.ALo(57,"date"),e.qZA()()(),e.TgZ(58,"div",9)(59,"div",5)(60,"label")(61,"b"),e._uU(62,"Terminal Provider"),e.qZA()(),e.TgZ(63,"div",6),e._UZ(64,"img",8),e._uU(65),e.qZA()(),e.TgZ(66,"div",5)(67,"label")(68,"b"),e._uU(69,"Commission Ratio"),e.qZA()(),e.TgZ(70,"div",7),e._uU(71),e.qZA()(),e.TgZ(72,"div",5)(73,"label")(74,"b"),e._uU(75,"Net Amount"),e.qZA()(),e.TgZ(76,"div",7),e._uU(77),e.ALo(78,"number"),e.qZA()()()()(),e.TgZ(79,"div",4)(80,"div",11)(81,"div",0)(82,"div",1)(83,"div",2)(84,"h5"),e._uU(85,"Collection Details"),e.qZA()()(),e.TgZ(86,"div",12)(87,"div",13)(88,"label")(89,"b"),e._uU(90,"Branch"),e.qZA()(),e.TgZ(91,"div",14),e._uU(92),e.qZA()(),e.TgZ(93,"div",13)(94,"label")(95,"b"),e._uU(96,"Register Name"),e.qZA()(),e.TgZ(97,"div",15),e._uU(98),e.qZA()(),e.TgZ(99,"div",13)(100,"label")(101,"b"),e._uU(102,"Register No."),e.qZA()(),e.TgZ(103,"div",15),e._uU(104),e.qZA()(),e.TgZ(105,"div",13)(106,"label")(107,"b"),e._uU(108,"Session No."),e.qZA()(),e.TgZ(109,"div",15),e._uU(110),e.qZA()()(),e.TgZ(111,"h5")(112,"b"),e._uU(113,"Registered By"),e.qZA()(),e.TgZ(114,"div",16)(115,"div",13)(116,"label")(117,"b"),e._uU(118,"Employee"),e.qZA()(),e.TgZ(119,"div",14),e._uU(120),e.qZA()(),e.TgZ(121,"div",13)(122,"label")(123,"b"),e._uU(124,"Date"),e.qZA()(),e.TgZ(125,"div",15),e._uU(126),e.ALo(127,"date"),e.qZA()(),e.TgZ(128,"div",13)(129,"label")(130,"b"),e._uU(131,"Time"),e.qZA()(),e.TgZ(132,"div",15),e._uU(133),e.ALo(134,"date"),e.qZA()()()()(),e.TgZ(135,"div",11)(136,"div",0)(137,"div",1)(138,"div",2)(139,"h5"),e._uU(140,"Settlement Details"),e.qZA()(),e.TgZ(141,"h5",17)(142,"b"),e._uU(143,"Settled By"),e.qZA()(),e.TgZ(144,"div",16)(145,"div",13)(146,"label")(147,"b"),e._uU(148,"Employee"),e.qZA()(),e.TgZ(149,"div",14),e._uU(150),e.qZA()(),e.TgZ(151,"div",13)(152,"label")(153,"b"),e._uU(154,"Date"),e.qZA()(),e.TgZ(155,"div",15),e._uU(156),e.ALo(157,"date"),e.qZA()(),e.TgZ(158,"div",13)(159,"label")(160,"b"),e._uU(161,"Time"),e.qZA()(),e.TgZ(162,"div",15),e._uU(163),e.ALo(164,"date"),e.qZA()()()()()(),e.TgZ(165,"div",4),e._UZ(166,"div",18),e.TgZ(167,"div",19)(168,"div",20)(169,"button",21),e.NdJ("click",function(){return i.close()}),e._uU(170,"Close"),e.qZA()()()()()),2&t&&(e.xp6(6),e.Oqu(null==i.data||null==i.data.customer?null:i.data.customer.customerName),e.xp6(1),e.Q6J("ngStyle",e.WLB(48,At,i.lookupcolor,i.lookupTextColor)),e.xp6(1),e.Oqu(i.lookupname),e.xp6(8),e.hij(" ",e.lcZ(17,25,null==i.data?null:i.data.cardCollectionJod)?e.xi3(18,27,null==i.data?null:i.data.cardCollectionJod,"1.3-3")+" JOD":"-"," "),e.xp6(8),e.s9C("src",(null==i.data||null==i.data.cardType?null:i.data.cardType.lookupImage)||"",e.LSH),e.xp6(1),e.hij(" ",(null==i.data||null==i.data.cardType||null==i.data.cardType.translations[0]?null:i.data.cardType.translations[0].lookupName)||"-"," "),e.xp6(6),e.hij(" ",(null==i.data?null:i.data.cardLast4Digits)||"-"," "),e.xp6(7),e.hij(" ",(null==i.data?null:i.data.cardPayerName)||"-"," "),e.xp6(6),e.hij(" ",(null==i.data?null:i.data.machineReceiptNumber)||"-"," "),e.xp6(6),e.hij(" ",(null==i.data?null:i.data.machineID)||"-"," "),e.xp6(6),e.hij(" ",e.xi3(57,30,null==i.data?null:i.data.cardBankDepositDate,"mediumDate")||"-"," "),e.xp6(8),e.s9C("src",(null==i.data||null==i.data.provider?null:i.data.provider.imageFile)||"",e.LSH),e.xp6(1),e.hij(" ",(null==i.data||null==i.data.provider?null:i.data.provider.providerName)||"-"," "),e.xp6(6),e.hij(" ",(30001==(null==i.data||null==i.data.statusObj?null:i.data.statusObj.lookupId)?"-":(null==i.data?null:i.data.commissionRatio)&&(null==i.data?null:i.data.commissionRatio)+" %")||"-"," "),e.xp6(6),e.hij(" ",(30001==(null==i.data||null==i.data.statusObj?null:i.data.statusObj.lookupId)?"-":(null==i.data?null:i.data.cardCollectionJodNet)&&e.xi3(78,33,null==i.data?null:i.data.cardCollectionJodNet,"2.3-3")+" JOD")||"-"," "),e.xp6(15),e.hij(" ",(null==i.data||null==i.data.branch?null:i.data.branch.branchName)||"-"," "),e.xp6(6),e.hij(" ",(null==i.data||null==i.data.register?null:i.data.register.registersName)||"-"," "),e.xp6(6),e.hij(" ",(null==i.data||null==i.data.register?null:i.data.register.registerId)||"-"," "),e.xp6(6),e.hij(" ",(null==i.data?null:i.data.registerSessionId)||"-"," "),e.xp6(10),e.hij(" ",(null==i.data.collectedBy?null:i.data.collectedBy.fullName)||"-"," "),e.xp6(6),e.hij(" ",e.xi3(127,36,i.data.collectionAt,"dd MMM yyyy")," "),e.xp6(7),e.hij(" ",e.xi3(134,39,i.data.collectionAt,"h:mm a")," "),e.xp6(17),e.hij(" ",(null==i.data||null==i.data.settledBy?null:i.data.settledBy.fullName)||"-"," "),e.xp6(6),e.hij(" ",e.xi3(157,42,i.data.settledAt,"dd MMM yyyy")," "),e.xp6(7),e.hij(" ",e.xi3(164,45,i.data.settledAt,"h:mm a")," "))},dependencies:[u.PC,u.JJ,u.uU]}),n})()}];let Zt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[m.Bz.forChild(Tt),m.Bz]}),n})();var xt=c(9541);let yt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[u.ez,Zt,L.Y4,w.JF,w.Ed,F.m,xt.vQ,s.u5,s.UX,C.IJ]}),n})()}}]);