"use strict";(self.webpackChunkDX_Admin_FE=self.webpackChunkDX_Admin_FE||[]).push([[294],{2294:(Tl,pe,h)=>{h.r(pe),h.d(pe,{DepositChequeModule:()=>ql});var p=h(6895),Pe=h(7705),W=h(529),Ye=h(4466),y=h(3127),e=h(4650),_e=h(940),Be=h(9106),X=h(5861),R=h(7579),L=h(8372),P=h(1884),Y=h(2722),B=h(4128),u=h(4006),M=h(4280),f=(()=>{return(i=f||(f={}))[i.Bounce=29001]="Bounce",i[i.Withdraw=29002]="Withdraw",i[i.Replace=29003]="Replace",i[i.Redeposit=29004]="Redeposit",i[i.Collect=29006]="Collect",i[i.Postpone=29011]="Postpone",i[i.PendingReturn=29013]="PendingReturn",i[i.PendingReplace=29014]="PendingReplace",i[i.PendingPostpone=29015]="PendingPostpone",i[i.PendingRedeposited=29016]="PendingRedeposited",i[i.PaidInCash=29017]="PaidInCash",f;var i})(),b=(()=>{return(i=b||(b={}))[i.Deposited=28001]="Deposited",i[i.ReDeposited=28002]="ReDeposited",i[i.Withdrawn=28003]="Withdrawn",i[i.Bounced=28004]="Bounced",i[i.Replaced=28005]="Replaced",i[i.Collected=28006]="Collected",i[i.Postponed=28007]="Postponed",i[i.PendingWithdraw=28008]="PendingWithdraw",i[i.PendingReplace=28009]="PendingReplace",i[i.PendingPostpone=28010]="PendingPostpone",i[i.PendingReDeposit=28011]="PendingReDeposit",i[i.PaidInCash=28014]="PaidInCash",b;var i})(),E=(()=>{return(i=E||(E={}))[i.TreasuryTeam=46]="TreasuryTeam",i[i.CreditAndCollection=47]="CreditAndCollection",E;var i})(),C=h(2340),ee=h(3855),T=h(9086),te=h(629);let Z=(()=>{class i{constructor(t,n){this.http=t,this.authService=n,this.fileToBase64=function(){var o=(0,X.Z)(function*(l){return new Promise((s,r)=>{const c=new FileReader;c.readAsDataURL(l),c.onload=()=>{s("application/pdf"!==l.type?{fileType:l.type,base64:c.result,file:l,fileName:l.name}:{fileType:l.type,file:l,fileName:l.name})},c.onerror=d=>r(d)})});return function(l){return o.apply(this,arguments)}}()}getDepositCheques(t){const n={Authorization:"Bearer "+localStorage.getItem("token")};return this.http.get((0,ee.B)((0,T.Z)(C.N.apiUrl2,"/Cheques/GetDepositedCheques"),t),{headers:n})}getPermissions(t){const n={Authorization:"Bearer "+localStorage.getItem("token")};return this.http.get(C.N.apiUrl2+"/User/GetUserPermissions?userId="+this.authService.userId+"&portalId="+t,{headers:n})}getLookups(t,n){const o={Authorization:"Bearer "+localStorage.getItem("token")};let l="";return l=n?`/Lookups/GetLookups?${n}`:`/Lookups/GetLookups?lookupTypeId=${t}`,this.http.get(C.N.apiUrl2+l,{headers:o})}getActionReasons(t){const n={Authorization:"Bearer "+localStorage.getItem("token")};return this.http.get(C.N.apiUrl+`/ChequesActionsManagement/GetReasons${t}`,{headers:n})}getDueCheques(t){const n={Authorization:"Bearer "+localStorage.getItem("token")};return this.http.get(C.N.apiUrl2+`/Cheques/GetDueCheques${t}`,{headers:n})}getSageBanksAccounts(t){const n={Authorization:"Bearer "+localStorage.getItem("token")};return this.http.get(C.N.apiUrl+`/Mainfund/GetSageBanksAccounts${t}`,{headers:n})}getBankLookups(t){const n={Authorization:"Bearer "+localStorage.getItem("token")};return this.http.get(C.N.apiUrl2+"/Lookups/GetLookups?lookupTypeId="+t+"&PageNo=0&PageSize=1000",{headers:n})}getChequesActionsLog(t){const n={Authorization:"Bearer "+localStorage.getItem("token")};return this.http.get(C.N.apiUrl2+"/Cheques/GetChequesActionsLog?chequeId="+t,{headers:n})}getChequeDetails(t){const n={Authorization:"Bearer "+localStorage.getItem("token")};return this.http.get(C.N.apiUrl2+"/Cheques/GetChequeDetails?ChequeId="+t,{headers:n})}markDelivered(t){const n={Authorization:"Bearer "+localStorage.getItem("token")};return this.http.post((0,T.Z)(C.N.apiUrl2,"/Cheques/MarkDelivered"),t,{headers:n})}updateCheque(t){const n={Authorization:"Bearer "+localStorage.getItem("token")};return this.http.post((0,T.Z)(C.N.apiUrl2,"/Cheques/UpdateCheque"),t,{headers:n})}confirmChequeAction(t){const n={Authorization:"Bearer "+localStorage.getItem("token")};return this.http.post((0,T.Z)(C.N.apiUrl2,"/Cheques/ConfirmChequeAction"),t,{headers:n})}rejectChequeAction(t){const n={Authorization:"Bearer "+localStorage.getItem("token")};return this.http.post((0,T.Z)(C.N.apiUrl2,"/Cheques/RejectChequeAction"),t,{headers:n})}actionOnCheques(t){const n={Authorization:"Bearer "+localStorage.getItem("token")};return this.http.post((0,T.Z)(C.N.apiUrl2,"/Cheques/ActionsOnCheques"),t,{headers:n})}actionOnChequesMulti(t){const n={Authorization:"Bearer "+localStorage.getItem("token")};return this.http.post((0,T.Z)(C.N.apiUrl2,"/Cheques/ActionsOnChequesMulti"),t,{headers:n})}uploadFile(t){const n={Authorization:"Bearer "+localStorage.getItem("token")};return this.http.post((0,T.Z)(C.N.apiUrl2,"/Upload/UploadFile"),t,{headers:n})}uploadChequeImage(t){const n={Authorization:"Bearer "+localStorage.getItem("token")};return this.http.post((0,T.Z)(C.N.apiUrl2,"/Cheques/UploadChequeImage"),t,{headers:n})}getChequeActionDetails(t,n){const o={Authorization:"Bearer "+localStorage.getItem("token")};return this.http.get((0,T.Z)(C.N.apiUrl2,"/Cheques/GetChequeActionDetails?ChequeId="+t+"&ActionId="+n),{headers:o})}GetDashboardCard(){const t={Authorization:"Bearer "+localStorage.getItem("token")};return this.http.get((0,T.Z)(C.N.apiUrl2,"/Dashboard/GetDashboardCards"),{headers:t})}GetChequesAgingList(t){const n={Authorization:"Bearer "+localStorage.getItem("token")};return this.http.get((0,ee.B)((0,T.Z)(C.N.apiUrl2,"/Dashboard/GetChequesAgingList"),t),{headers:n})}GetChequesAgingGraph(t){const n={Authorization:"Bearer "+localStorage.getItem("token")};return this.http.get((0,ee.B)((0,T.Z)(C.N.apiUrl2,"/Dashboard/GetChequesAgingTotals"),t),{headers:n})}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(W.eN),e.LFG(te.e))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var x=h(9061),ne=h(7185),J=h(4349),q=h(6573),ie=h(8424),Ee=h(1481);function je(i,a){if(1&i&&(e.ynx(0),e._UZ(1,"img",7),e.BQk()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("src",t.file,e.LSH)}}function Ve(i,a){if(1&i&&(e.TgZ(0,"div",8),e._UZ(1,"img",9)(2,"br"),e.TgZ(3,"a",10),e._uU(4,"click to open pdf "),e.qZA()()),2&i){const t=e.oxw(3);e.xp6(3),e.s9C("href",t.file,e.LSH)}}function Ge(i,a){if(1&i&&(e.ynx(0),e.YNc(1,je,2,1,"ng-container",1),e.YNc(2,Ve,5,1,"ng-template",null,6,e.W1O),e.BQk()),2&i){const t=e.MAs(3),n=e.oxw(2);e.xp6(1),e.Q6J("ngIf","png"==n.fileType||"jpeg"==n.fileType||"jpg"==n.fileType)("ngIfElse",t)}}function He(i,a){1&i&&(e.TgZ(0,"p",11),e._uU(1,"No attachemnt..."),e.qZA())}function ze(i,a){if(1&i&&(e.ynx(0),e.YNc(1,Ge,4,2,"ng-container",1),e.YNc(2,He,2,0,"ng-template",null,5,e.W1O),e.BQk()),2&i){const t=e.MAs(3),n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.file)("ngIfElse",t)}}function $e(i,a){if(1&i&&(e.ynx(0),e._UZ(1,"img",7),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("src",t.file,e.LSH)}}function Ke(i,a){if(1&i&&(e.TgZ(0,"div",8),e._UZ(1,"img",9)(2,"br"),e.TgZ(3,"a",10),e._uU(4,"click to open pdf "),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(3),e.Q6J("href",t.file,e.LSH)}}function We(i,a){if(1&i&&(e.YNc(0,$e,2,1,"ng-container",1),e.YNc(1,Ke,5,1,"ng-template",null,6,e.W1O)),2&i){const t=e.MAs(2),n=e.oxw();e.Q6J("ngIf","image/png"==n.fileType||"image/jpeg"==n.fileType||"image/jpg"==n.fileType)("ngIfElse",t)}}let Xe=(()=>{class i{constructor(t,n){this._activeModal=t,this.sanitizer=n,this.fileType=""}ngOnInit(){this.data?.isUploaded?(this.fileType=this.data.uploadedFile.fileType,this.file=this.viewFile(this.data.uploadedFile.file)):this.fileType=this.getFileType(this.file)}getFileType(t){return t?.split(".").pop().trim()}viewFile(t){let n=URL.createObjectURL(t);return this.sanitizer.bypassSecurityTrustResourceUrl(n)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(x.Kz),e.Y36(Ee.H7))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-view-uploaded-file"]],inputs:{file:"file",data:"data"},decls:7,vars:2,consts:[[1,"modal-body","p-2"],[4,"ngIf","ngIfElse"],["newlyUploaded",""],[1,"d-flex","justify-content-end"],["type","button",1,"btn","btn-cancel",3,"click"],["noFile",""],["pdf",""],[1,"w-100",3,"src"],[1,"d-flex","justify-content-center","flex-column","align-items-center"],["height","80","width","80","src","/assets/images/pdf.png","alt",""],["target","_blank",1,"text-decoration-none","text-capitalize",3,"href"],[1,"mx-0","my-3"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0),e.YNc(1,ze,4,2,"ng-container",1),e.YNc(2,We,3,2,"ng-template",null,2,e.W1O),e.TgZ(4,"div",3)(5,"button",4),e.NdJ("click",function(){return n._activeModal.close("Close click")}),e._uU(6," Close "),e.qZA()()()),2&t){const o=e.MAs(3);e.xp6(1),e.Q6J("ngIf",!(null!=n.data&&n.data.isUploaded))("ngIfElse",o)}},dependencies:[p.O5]}),i})();function et(i,a){if(1&i&&(e.TgZ(0,"a",8),e._UZ(1,"img",9),e.qZA()),2&i){const t=e.oxw();e.s9C("href",t.file,e.LSH),e.Q6J("ngClass",(null==t.disableElements?null:t.disableElements.disableDownload)&&"disable-elm")}}function tt(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"img",10),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.fileAction("reset"))}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("ngClass",(null==t.disableElements?null:t.disableElements.disableReset)&&"disable-elm")}}function nt(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"img",11),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.fileAction("remove"))}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("ngClass",(null==t.disableElements?null:t.disableElements.disableRemove)&&"disable-elm")}}let k=(()=>{class i{constructor(t){this._modalService=t,this.fileReset=new e.vpe,this.removeFile=new e.vpe,this.reset=!1,this.remove=!1,this.download=!1,this.fileName=""}ngOnInit(){}fileAction(t){"view"==t?this.openFileModal():"reset"==t?this.fileReset.emit(!0):"remove"==t&&this.removeFile.emit(!0)}openFileModal(){const t=this._modalService.open(Xe);this.data?.isUploaded?t.componentInstance.data=this.data:t.componentInstance.file=this.file}getFileType(t){return t?.split("/").pop()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(x.FF))},i.\u0275cmp=e.Xpm({type:i,selectors:[["view-file"]],inputs:{file:"file",data:"data",reset:"reset",remove:"remove",download:"download",disableElements:"disableElements"},outputs:{fileReset:"fileReset",removeFile:"removeFile"},decls:9,vars:5,consts:[["ngbAutoFocus","",1,"file-item",3,"ngClass"],[1,"d-flex","gap-3","align-items-center","justify-content-between"],[1,"m-0","green-clr"],[1,"d-flex","gap-2","align-items-center"],["src","/assets/images/eye.svg",1,"cursor-pointer","pt-1",3,"ngClass","click"],["target","_blank",3,"href","ngClass",4,"ngIf"],["src","/assets/images/repeat.svg","class","cursor-pointer pt-1",3,"ngClass","click",4,"ngIf"],["height","22","src","/assets/images/delete.svg","class","cursor-pointer pt-1",3,"ngClass","click",4,"ngIf"],["target","_blank",3,"href","ngClass"],["src","/assets/images/download.svg"],["src","/assets/images/repeat.svg",1,"cursor-pointer","pt-1",3,"ngClass","click"],["height","22","src","/assets/images/delete.svg",1,"cursor-pointer","pt-1",3,"ngClass","click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"label",2),e._uU(3,"Attachment"),e.qZA(),e.TgZ(4,"div",3)(5,"img",4),e.NdJ("click",function(){return n.fileAction("view")}),e.qZA(),e.YNc(6,et,2,2,"a",5),e.YNc(7,tt,1,1,"img",6),e.YNc(8,nt,1,1,"img",7),e.qZA()()()),2&t&&(e.Q6J("ngClass",(null==n.disableElements?null:n.disableElements.disableAll)&&"disable-elm"),e.xp6(5),e.Q6J("ngClass",(null==n.disableElements?null:n.disableElements.disableView)&&"disable-elm"),e.xp6(1),e.Q6J("ngIf",n.download),e.xp6(1),e.Q6J("ngIf",n.reset),e.xp6(1),e.Q6J("ngIf",n.remove))},dependencies:[p.mk,p.O5],styles:[".file-item[_ngcontent-%COMP%]{padding:10px;border-radius:5px;border:1px solid green;background:white;max-width:100%}.file-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{line-height:1;color:green;font-weight:600}"]}),i})();var oe=h(7711);let j=(()=>{class i{constructor(t,n){this.renderer=t,this.el=n,this.maxLength=0}onInput(t){const n=t.target;n.value.length>this.maxLength&&(n.value=n.value.slice(0,this.maxLength),t.preventDefault())}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.Qsj),e.Y36(e.SBq))},i.\u0275dir=e.lG2({type:i,selectors:[["","appMaxCharacters",""]],hostBindings:function(t,n){1&t&&e.NdJ("input",function(l){return n.onInput(l)})},inputs:{maxLength:["appMaxCharacters","maxLength"]}}),i})();const it=["fileRef"];function ot(i,a){1&i&&(e.TgZ(0,"span",17)(1,"span"),e._uU(2,"Bounced By: "),e.TgZ(3,"span",18),e._uU(4," Sofy"),e.qZA()(),e.TgZ(5,"span",19),e._uU(6,"Bounced: "),e.TgZ(7,"span",18),e._uU(8," 14/12/2022"),e.qZA()()())}function at(i,a){if(1&i&&(e.TgZ(0,"span",17)(1,"p",20),e._uU(2),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(1),e.Udp("color",null==t.details[0]||null==t.details[0].statusObj?null:t.details[0].statusObj.lookupTextColor)("background-color",null==t.details[0]||null==t.details[0].statusObj?null:t.details[0].statusObj.lookupBGColor),e.xp6(1),e.hij(" ",null==t.details[0]||null==t.details[0].statusObj||null==t.details[0].statusObj.translations?null:t.details[0].statusObj.translations[0].lookupName," ")}}function lt(i,a){if(1&i&&e._UZ(0,"img",23),2&i){const t=e.oxw(2).$implicit;e.Q6J("src",null==t?null:t.bankLogo,e.LSH)}}function st(i,a){if(1&i&&(e.TgZ(0,"p"),e.YNc(1,lt,1,1,"img",22),e._uU(2),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",null==t?null:t.bankLogo),e.xp6(1),e.Oqu((null==t?null:t.bank)||"---")}}function rt(i,a){if(1&i&&(e.TgZ(0,"div",21)(1,"p"),e._uU(2),e.qZA(),e.TgZ(3,"p"),e._uU(4),e._UZ(5,"br"),e._uU(6),e.qZA(),e.YNc(7,st,3,2,"p",1),e.TgZ(8,"p"),e._uU(9),e.ALo(10,"date"),e.qZA(),e.TgZ(11,"p"),e._uU(12),e.ALo(13,"number"),e.qZA(),e.TgZ(14,"p"),e._uU(15),e.qZA(),e.TgZ(16,"p"),e._uU(17),e.ALo(18,"number"),e.qZA()()),2&i){const t=a.$implicit;e.xp6(2),e.Oqu((null==t?null:t.chequeNo)||"---"),e.xp6(2),e.hij("",null==t||null==t.customer?null:t.customer.customerName," "),e.xp6(2),e.Oqu(null==t||null==t.customer?null:t.customer.mobile),e.xp6(1),e.Q6J("ngIf",null==t?null:t.bank),e.xp6(2),e.Oqu(e.xi3(10,9,null==t?null:t.chequeDate,"dd MMM yyyy")||"---"),e.xp6(3),e.Oqu(e.xi3(13,12,null==t?null:t.collectedAmount,".3")||"---"),e.xp6(3),e.AsE("",null==t||null==t.currency[0]?null:t.currency[0].lookupName," (",(null==t||null==t.currency[0]?null:t.currency[0].currencyRate)||1,")"),e.xp6(2),e.Oqu(e.xi3(18,15,null==t?null:t.chequeCollectionJod,".3")||"---")}}const he=function(){return{containerClass:"theme-red",isAnimated:!0,showClearButton:!0}};function ct(i,a){if(1&i&&(e.TgZ(0,"div",7)(1,"div",24)(2,"div",25)(3,"label",26),e._uU(4,"Bank Confirmation Date *"),e.qZA(),e.TgZ(5,"div",27),e._UZ(6,"input",28),e.TgZ(7,"span",29),e._UZ(8,"i",30),e.qZA()()()()()),2&i){const t=e.oxw(2);e.xp6(6),e.Q6J("formControl",t.bankConfirmationDate)("bsConfig",e.DdM(2,he))}}function ut(i,a){1&i&&(e.TgZ(0,"th"),e._uU(1,"Receipt Voucher No *"),e.qZA())}function dt(i,a){if(1&i&&(e.TgZ(0,"th"),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.AsE(" ",t.actionTypeId==t.chequeActionEnum.PaidInCash?"Receipt Copy ":"Attachment "," ",t.actionTypeId!=t.chequeActionEnum.Bounce?"*":""," ")}}function pt(i,a){1&i&&(e.TgZ(0,"th"),e._uU(1,"Reason Type *"),e.qZA())}function _t(i,a){1&i&&(e.TgZ(0,"th"),e._uU(1,"Cheque Collection Date"),e.qZA())}function ht(i,a){1&i&&(e.TgZ(0,"th"),e._uU(1,"Next Action"),e.qZA())}const ge=function(){return{required:"Input is required"}};function gt(i,a){if(1&i&&(e.TgZ(0,"td"),e._UZ(1,"input",38)(2,"validation-error",39),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Q6J("control",t.get("receiptVoucherNumber"))("errorMessages",e.DdM(2,ge))}}const mt=function(i){return{isUploaded:!0,uploadedFile:i}};function ft(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"view-file",47),e.NdJ("removeFile",function(o){e.CHM(t);const l=e.oxw(2).index,s=e.oxw(3);return e.KtG(s.removeFileHandle(o,l))}),e.qZA()}if(2&i){const t=e.oxw(2).index,n=e.oxw(3);e.Q6J("remove",!0)("data",e.VKq(2,mt,n.filesToUpload[t]))}}function Ct(i,a){1&i&&(e.TgZ(0,"span",49),e._uU(1,"Input is required"),e.qZA())}function xt(i,a){if(1&i&&(e.ynx(0),e.YNc(1,Ct,2,0,"span",48),e.BQk()),2&i){const t=e.oxw(3).$implicit;let n;e.xp6(1),e.Q6J("ngIf",null==t||null==(n=t.get("attachment"))||null==n.errors?null:n.errors.required)}}function bt(i,a){if(1&i&&(e.ynx(0),e.YNc(1,xt,2,1,"ng-container",1),e.BQk()),2&i){const t=e.oxw(2).$implicit;let n;e.xp6(1),e.Q6J("ngIf",(null==t||null==(n=t.get("attachment"))?null:n.invalid)&&(null==t||null==(n=t.get("attachment"))?null:n.touched)||(null==t||null==(n=t.get("attachment"))?null:n.dirty))}}function qt(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"td")(1,"div",40)(2,"div",41),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().index,l=e.oxw(3);return e.KtG(l.fileRefs.toArray()[o].nativeElement.click())}),e._UZ(3,"img",42),e.TgZ(4,"h4",43),e._uU(5,"Drag & drop files"),e.qZA()(),e.YNc(6,ft,1,4,"view-file",44),e.qZA(),e.TgZ(7,"input",45,46),e.NdJ("change",function(o){e.CHM(t);const l=e.oxw().index,s=e.oxw(3);return e.KtG(s.onFileSelected(o,l))}),e.qZA(),e.YNc(9,bt,2,1,"ng-container",1),e.qZA()}if(2&i){const t=e.oxw(),n=t.index,o=t.$implicit,l=e.oxw(3);let s;e.xp6(6),e.Q6J("ngIf",null==l.filesToUpload[n]?null:l.filesToUpload[n].file),e.xp6(1),e.uIk("accept",l.acceptedFileTypes),e.xp6(2),e.Q6J("ngIf",null==o||null==(s=o.get("attachment"))?null:s.errors)}}function vt(i,a){1&i&&(e.TgZ(0,"span",49),e._uU(1,"Input is required"),e.qZA())}function Tt(i,a){if(1&i&&(e.ynx(0),e.YNc(1,vt,2,0,"span",48),e.BQk()),2&i){const t=e.oxw(3).$implicit;let n;e.xp6(1),e.Q6J("ngIf",null==t||null==(n=t.get("reasonId"))||null==n.errors?null:n.errors.required)}}function Dt(i,a){if(1&i&&(e.ynx(0),e.YNc(1,Tt,2,1,"ng-container",1),e.BQk()),2&i){const t=e.oxw(2).$implicit;let n;e.xp6(1),e.Q6J("ngIf",(null==t||null==(n=t.get("reasonId"))?null:n.invalid)&&(null==t||null==(n=t.get("reasonId"))?null:n.touched)||(null==t||null==(n=t.get("reasonId"))?null:n.dirty))}}function Zt(i,a){if(1&i&&(e.TgZ(0,"td"),e._UZ(1,"ng-select",50),e.YNc(2,Dt,2,1,"ng-container",1),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw(3);let o;e.xp6(1),e.Q6J("items",n.reasonList),e.xp6(1),e.Q6J("ngIf",null==t||null==(o=t.get("reasonId"))?null:o.errors)}}function At(i,a){1&i&&(e.TgZ(0,"td"),e._UZ(1,"input",51),e.qZA()),2&i&&(e.xp6(1),e.Q6J("bsConfig",e.DdM(1,he)))}function yt(i,a){if(1&i&&(e.TgZ(0,"td"),e._UZ(1,"ng-select",52)(2,"validation-error",39),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw(3);e.xp6(1),e.Q6J("appendTo",n.body)("items",n.actionList),e.xp6(1),e.Q6J("control",t.get("nextAllowedAction"))("errorMessages",e.DdM(4,ge))}}function wt(i,a){if(1&i&&(e.TgZ(0,"tr",36),e.YNc(1,gt,3,3,"td",1),e.YNc(2,qt,10,3,"td",1),e.YNc(3,Zt,3,2,"td",1),e.YNc(4,At,2,2,"td",1),e.YNc(5,yt,3,5,"td",1),e.TgZ(6,"td"),e._UZ(7,"textarea",37),e.qZA()()),2&i){const t=a.index,n=e.oxw(3);e.Q6J("formGroupName",t),e.xp6(1),e.Q6J("ngIf",n.actionType.id==n.chequeActionEnum.PaidInCash),e.xp6(1),e.Q6J("ngIf",n.actionType.id!=n.chequeActionEnum.Redeposit&&n.actionType.id!=n.chequeActionEnum.Collect),e.xp6(1),e.Q6J("ngIf",n.actionType.id!=n.chequeActionEnum.Collect&&n.actionType.id!=n.chequeActionEnum.PaidInCash),e.xp6(1),e.Q6J("ngIf",n.actionType.id==n.chequeActionEnum.Bounce),e.xp6(1),e.Q6J("ngIf",n.actionType.id==n.chequeActionEnum.Withdraw),e.xp6(2),e.Q6J("appMaxCharacters",200)}}function kt(i,a){if(1&i&&(e.TgZ(0,"div",53),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.hij(" ",t.messageError," ")}}function Nt(i,a){if(1&i&&(e.TgZ(0,"div",31)(1,"table",32)(2,"thead")(3,"tr"),e.YNc(4,ut,2,0,"th",1),e.YNc(5,dt,2,2,"th",1),e.YNc(6,pt,2,0,"th",1),e.YNc(7,_t,2,0,"th",1),e.YNc(8,ht,2,0,"th",1),e.TgZ(9,"th"),e._uU(10,"Note"),e.qZA()()(),e.TgZ(11,"tbody",33),e.YNc(12,wt,8,7,"tr",34),e.qZA()(),e.YNc(13,kt,2,1,"div",35),e.qZA()),2&i){const t=e.oxw(2);e.xp6(4),e.Q6J("ngIf",t.actionType.id==t.chequeActionEnum.PaidInCash),e.xp6(1),e.Q6J("ngIf",t.actionType.id!=t.chequeActionEnum.Redeposit&&t.actionType.id!=t.chequeActionEnum.Collect),e.xp6(1),e.Q6J("ngIf",t.actionType.id!=t.chequeActionEnum.Collect&&t.actionType.id!=t.chequeActionEnum.PaidInCash),e.xp6(1),e.Q6J("ngIf",t.actionType.id==t.chequeActionEnum.Bounce),e.xp6(1),e.Q6J("ngIf",t.actionType.id==t.chequeActionEnum.Withdraw),e.xp6(4),e.Q6J("ngForOf",t.formArray.controls),e.xp6(1),e.Q6J("ngIf",t.messageError)}}function It(i,a){1&i&&(e.TgZ(0,"button",54),e._uU(1," Confirm "),e.qZA())}function Ut(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",3)(1,"form",4),e.NdJ("ngSubmit",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.saveForm())}),e.TgZ(2,"div",5)(3,"div")(4,"h5"),e._uU(5),e.qZA(),e.TgZ(6,"p"),e._uU(7),e.qZA()(),e.YNc(8,ot,9,0,"span",6),e.YNc(9,at,3,5,"span",6),e.qZA(),e.TgZ(10,"div",7)(11,"div",8)(12,"h6",9),e._uU(13,"Cheque No."),e.qZA(),e.TgZ(14,"h6",9),e._uU(15,"Customer Name"),e.qZA(),e.TgZ(16,"h6",9),e._uU(17,"Cheque Bank Name"),e.qZA(),e.TgZ(18,"h6",9),e._uU(19,"Due Date"),e.qZA(),e.TgZ(20,"h6",9),e._uU(21,"Amount"),e.qZA(),e.TgZ(22,"h6",9),e._uU(23,"Currency"),e.qZA(),e.TgZ(24,"h6",9),e._uU(25," Amount (JOD)"),e.qZA()(),e.TgZ(26,"div",10),e.YNc(27,rt,19,18,"div",11),e.qZA()(),e.YNc(28,ct,9,3,"div",12),e.YNc(29,Nt,14,7,"div",13),e.TgZ(30,"div",14)(31,"button",15),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.dismissModal())}),e._uU(32," Close "),e.qZA(),e.YNc(33,It,2,0,"button",16),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.reasonForm),e.xp6(4),e.Oqu(t.title),e.xp6(2),e.hij("You are about to ",null==t.actionType||null==t.actionType.name?null:t.actionType.name[0].lookupName," the following cheque"),e.xp6(1),e.Q6J("ngIf",!t.isConfirmShow),e.xp6(1),e.Q6J("ngIf",t.isConfirmShow),e.xp6(18),e.Q6J("ngForOf",t.details),e.xp6(1),e.Q6J("ngIf",t.actionTypeId==t.chequeActionEnum.Bounce||t.actionTypeId==t.chequeActionEnum.Collect),e.xp6(1),e.Q6J("ngIf",t.detailShow),e.xp6(4),e.Q6J("ngIf",t.isConfirmShow)}}function Mt(i,a){1&i&&e._UZ(0,"app-loading")}function Jt(i,a){if(1&i&&(e.TgZ(0,"div",55)(1,"div",56)(2,"h5"),e._UZ(3,"i",57),e._uU(4),e.qZA()()()),2&i){const t=e.oxw();e.xp6(4),e.hij(" ",t.message,"")}}let me=(()=>{class i{constructor(t,n,o,l,s){this.formBuilder=t,this.deposiService=n,this.modalService=o,this.toastrService=l,this._datePipe=s,this.title="",this.isConfirmShow=!1,this.detailShow=!1,this.sendtoLoadData=new e.vpe,this.message="",this.messageError="",this.isLoading=!1,this.saveSubmitted=!1,this.reasonList=[],this.filesToUpload=[],this.acceptedFileTypes="image/*,application/pdf",this.chequeActionEnum=f,this.actionList=[{name:"Pay In Cash",id:f.PaidInCash},{name:"Replace",id:f.Replace}],this.fileRefs=new e.n_E,this.actionTypeId=0,this.bankConfirmationDate=new u.NI(new Date)}ngOnInit(){console.log(this.details),this.initForm()}getActionReasons(){this.deposiService.getActionReasons(`?actionId=${this.actionType.id}&pageSize=1000`).subscribe(n=>{this.reasonList=n.data})}initForm(){this.reasonForm=this.formBuilder.group({chequeArray:this.formBuilder.array([this.initFormGroup()])}),this.getActionReasons(),this.actionTypeId=this.actionType?.id,this.actionType.id!=f.Redeposit&&this.actionType.id!=f.Collect&&(this.formArray.clear(),this.details.forEach((t,n)=>{this.formArray.push(this.initFormGroup()),this.actionType.id!=f.Bounce&&this.setValidator("attachment",u.kI.required,n),this.actionType.id!=f.PaidInCash&&this.setValidator("reasonId",u.kI.required,n),this.actionType.id==f.PaidInCash&&this.setValidator("receiptVoucherNumber",u.kI.required,n),this.actionType.id==f.Withdraw&&this.setValidator("nextAllowedAction",u.kI.required,n)}))}initFormGroup(){return this.formBuilder.group({receiptVoucherNumber:[""],chequeCollectionDate:[new Date],note:[""],attachment:[null],reasonId:[null],nextAllowedAction:[null]})}get formArray(){return this.reasonForm.get("chequeArray")}setValidator(t,n,o){const l=this.formArray.at(o).get(t);l&&n&&(l.setValidators(n),l.updateValueAndValidity())}dismissModal(){this.modalService.dismissAll()}close(){this.sendtoLoadData.emit("true")}onFileSelected(t,n){[...t.target.files].forEach(l=>{this.deposiService.fileToBase64(l).then(s=>{this.uploadFile(l,n),this.filesToUpload[n]=s})})}removeFileHandle(t,n){this.filesToUpload.splice(n,1),this.formArray.at(n).get("attachment")?.setValue(""),this.fileRefs.toArray()[n].nativeElement.value=null}uploadFile(t,n){const o=new FormData;o.append("Folder","ChequeImages"),o.append("File",t),this.deposiService.uploadFile(o).subscribe(l=>{l.isSuccess&&this.formArray.at(n).get("attachment")?.setValue(l.data)})}get f(){return this.reasonForm}saveForm(){if(this.isConfirmShow&&this.f.valid){let t=[];if(this.details.length>1){let n=this.formArray.value;this.details.forEach((l,s)=>{let r=n[s]?.receiptVoucherNumber||"",c=this._datePipe.transform(n[s]?.chequeCollectionDate,"yyyy-MM-dd")||"",d={depositedChequeId:l.id,actionFile:n[s]?.attachment,reasonId:n[s]?.reasonId,notes:n[s]?.note,...r?{receiptVoucherNumber:r}:{},...c?{chequeCollectionDate:c}:{}};t.push(d)}),this.submitData({actionId:this.actionType.id,cheques:t})}else this.details.forEach((n,o)=>{this.isLoading=!0;let l=new FormData;l.append("BankConfirmationDate",this._datePipe.transform(this.bankConfirmationDate.value,"yyyy-MM-dd")||""),l.append("DepositedChequeId",n?.id.toString()),l.append("ActionId",this.actionType.id.toString()),l.append("Notes",this.formArray.value[o]?.note),l.append("ActionFile",this.filesToUpload[0]?.file||""),l.append("ReasonId",this.formArray.value[o]?.reasonId||""),this.actionTypeId==f.PaidInCash&&l.append("ReceiptVoucherNumber",this.formArray.value[o]?.receiptVoucherNumber||""),this.actionTypeId==f.Bounce&&l.append("chequeCollectionDate",this._datePipe.transform(this.formArray.value[o]?.chequeCollectionDate,"yyyy-MM-dd")||""),this.actionTypeId==f.Withdraw&&l.append("nextAllowedAction",this.formArray.value[o]?.nextAllowedAction||""),this.submitData(l)})}else this.f.markAllAsTouched()}submitData(t){let n;n=1==this.details.length?this.deposiService.actionOnCheques(t):this.deposiService.actionOnChequesMulti(t),n.subscribe({next:o=>{o.isSuccess&&(this.responseModal("success",`Your ${this.actionType?.name?.[0].lookupName.toLowerCase()} action successfully performed`),this.sendtoLoadData.emit(!0))},error:o=>{this.responseModal("error",o?.error?.errors[0].errorMessageEn)}}).add(()=>this.isLoading=!1)}responseModal(t,n){const o=this.modalService.open(M.e);o.componentInstance.type=t,o.componentInstance.message=n}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(u.qu),e.Y36(Z),e.Y36(x.FF),e.Y36(ne._W),e.Y36(p.uU))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-deposit-cheque-modal"]],viewQuery:function(t,n){if(1&t&&e.Gf(it,5),2&t){let o;e.iGM(o=e.CRH())&&(n.fileRefs=o)}},inputs:{details:"details",actionType:"actionType",title:"title",isConfirmShow:"isConfirmShow",detailShow:"detailShow"},outputs:{sendtoLoadData:"sendtoLoadData"},decls:3,vars:3,consts:[["class","modal-body","ngbAutoFocus","",4,"ngIf"],[4,"ngIf"],["class","modal-body",4,"ngIf"],["ngbAutoFocus","",1,"modal-body"],[3,"formGroup","ngSubmit"],[1,"page-heading"],["class","text-end",4,"ngIf"],[1,"modal-cr-card"],[1,"card-head","grid-container"],[1,"title"],[1,"card-content"],["class","pb-4 grid-container",4,"ngFor","ngForOf"],["class","modal-cr-card",4,"ngIf"],["class","detail-content simple-table",4,"ngIf"],[1,"btns-group"],["type","button",1,"btn","btn-cancel",3,"click"],["type","submit","class","btn btn-save",4,"ngIf"],[1,"text-end"],[1,"soft-text"],[1,"last-content"],[1,"collected-btn"],[1,"pb-4","grid-container"],["height","25","width","25",3,"src",4,"ngIf"],["height","25","width","25",3,"src"],[1,"row"],[1,"col-4"],[1,"fw-500","mb-2"],[1,"input-group"],["type","text","placeholder","Collection Date","bsDatepicker","","placement","bottom",1,"form-control",3,"formControl","bsConfig"],[1,"input-group-text"],[1,"fa-regular","fa-calendar"],[1,"detail-content","simple-table"],[1,"table"],["formArrayName","chequeArray"],[3,"formGroupName",4,"ngFor","ngForOf"],["class","alert alert-danger text-center mt-3 mb-3 my-2","role","alert",4,"ngIf"],[3,"formGroupName"],["formControlName","note",1,"form-control","custom-input-field",3,"appMaxCharacters"],["type","text","placeholder","Receipt voucher no","formControlName","receiptVoucherNumber",1,"form-control"],[3,"control","errorMessages"],[1,"d-flex","flex-column"],[1,"file-uploader-sm","mb-2","d-flex","gap-2","justify-content-center","align-items-center",3,"click"],["height","30","src","assets/images/uploader.png"],[1,"font-14","mb-0"],[3,"remove","data","removeFile",4,"ngIf"],["type","file","hidden","",3,"change"],["fileRef",""],[3,"remove","data","removeFile"],["class","text-danger",4,"ngIf"],[1,"text-danger"],["placeholder","Reason Type","bindLabel","chequeActionReason","bindValue","actionReasonID","formControlName","reasonId",3,"items"],["type","text","formControlName","chequeCollectionDate","placeholder","Cheque Collection Date","bsDatepicker","","placement","bottom",1,"form-control",2,"height","46px",3,"bsConfig"],["placeholder","Select an Action","formControlName","nextAllowedAction","bindLabel","name","bindValue","id",3,"appendTo","items"],["role","alert",1,"alert","alert-danger","text-center","mt-3","mb-3","my-2"],["type","submit",1,"btn","btn-save"],[1,"modal-body"],[1,"message"],[1,"fa-regular","fa-circle-check"]],template:function(t,n){1&t&&(e.YNc(0,Ut,34,9,"div",0),e.YNc(1,Mt,1,0,"app-loading",1),e.YNc(2,Jt,5,1,"div",2)),2&t&&(e.Q6J("ngIf",!n.message&&!n.isLoading),e.xp6(1),e.Q6J("ngIf",n.isLoading),e.xp6(1),e.Q6J("ngIf",n.message))},dependencies:[p.sg,p.O5,u._Y,u.Fj,u.JJ,u.JL,u.oH,u.sg,u.u,u.x0,u.CE,J.w9,q.Np,q.Y5,ie.N,k,oe.L,j,p.JJ,p.uU],styles:[".grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1.5fr repeat(5,1fr);gap:10px}"]}),i})();var V=h(2687),fe=h(2216),Ce=h(3117),St=h(2439);let Qt=(()=>{class i{constructor(t){this.ngControl=t}onBlur(){const t=this.ngControl?.control;t&&"string"==typeof t?.value&&this.ngControl.control?.setValue(t.value.trim())}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(u.a5))},i.\u0275dir=e.lG2({type:i,selectors:[["input","trimOnBlurInput",""],["textarea","trimOnBlurInput",""]],hostBindings:function(t,n){1&t&&e.NdJ("blur",function(){return n.onBlur()})}}),i})();const Ot=["fileRef"];function Ft(i,a){if(1&i&&(e.TgZ(0,"span",27)(1,"p",28),e._uU(2),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(1),e.Udp("color",null==t.details[0]||null==t.details[0].statusObj?null:t.details[0].statusObj.lookupTextColor)("background-color",null==t.details[0]||null==t.details[0].statusObj?null:t.details[0].statusObj.lookupBGColor),e.xp6(1),e.hij(" ",null==t.details[0]||null==t.details[0].statusObj||null==t.details[0].statusObj.translations?null:t.details[0].statusObj.translations[0].lookupName," ")}}function Rt(i,a){if(1&i&&(e.TgZ(0,"p"),e._UZ(1,"img",32),e._uU(2),e.qZA()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.Q6J("src",null==t||null==t.bank?null:t.bank.imagePath,e.LSH),e.xp6(1),e.hij(" ",(null==t||null==t.bank||null==t.bank.translations||null==t.bank.translations[0]?null:t.bank.translations[0].lookupName)||"---"," ")}}function Lt(i,a){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Rt,3,2,"p",1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",null==t||null==t.bank||null==t.bank.translations||null==t.bank.translations[0]?null:t.bank.translations[0].lookupName)}}function Pt(i,a){if(1&i&&(e.TgZ(0,"p"),e._UZ(1,"img",32),e._uU(2),e.qZA()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.Q6J("src",null==t||null==t.bank?null:t.bank.imagePath,e.LSH),e.xp6(1),e.Oqu((null==t?null:t.bank)||"---")}}function Yt(i,a){if(1&i&&e.YNc(0,Pt,3,2,"p",1),2&i){const t=e.oxw().$implicit;e.Q6J("ngIf",null==t?null:t.bank)}}function Bt(i,a){if(1&i&&(e.TgZ(0,"div",29)(1,"p"),e._uU(2),e.qZA(),e.TgZ(3,"p"),e._uU(4),e._UZ(5,"br"),e._uU(6),e.qZA(),e.YNc(7,Lt,2,1,"div",30),e.YNc(8,Yt,1,1,"ng-template",null,31,e.W1O),e.TgZ(10,"p"),e._uU(11),e.ALo(12,"date"),e.qZA(),e.TgZ(13,"p"),e._uU(14),e.ALo(15,"number"),e.qZA(),e.TgZ(16,"p"),e._uU(17),e.qZA(),e.TgZ(18,"p"),e._uU(19),e.ALo(20,"number"),e.qZA()()),2&i){const t=a.$implicit,n=e.MAs(9);e.xp6(2),e.Oqu((null==t?null:t.chequeNo)||"---"),e.xp6(2),e.hij("",null==t||null==t.customer?null:t.customer.customerName," "),e.xp6(2),e.Oqu(null==t||null==t.customer?null:t.customer.mobile),e.xp6(1),e.Q6J("ngIf",null==t||null==t.bank?null:t.bank.translations)("ngIfElse",n),e.xp6(4),e.Oqu(e.xi3(12,10,null==t?null:t.chequeDate,"dd MMM yyyy")||"---"),e.xp6(3),e.Oqu(e.xi3(15,13,null==t?null:t.collectedAmount,".3")||"---"),e.xp6(3),e.AsE("",null==t||null==t.currency[0]?null:t.currency[0].lookupName," (",(null==t||null==t.currency[0]?null:t.currency[0].currencyRate)||1,")"),e.xp6(2),e.Oqu(e.xi3(20,16,null==t?null:t.chequeCollectionJod,".3")||"---")}}function Et(i,a){1&i&&(e.TgZ(0,"span",56),e._uU(1,"Input is required"),e.qZA())}function jt(i,a){if(1&i&&(e.ynx(0),e.YNc(1,Et,2,0,"span",55),e.BQk()),2&i){const t=e.oxw(2).$implicit;let n;e.xp6(1),e.Q6J("ngIf",null==t||null==(n=t.get("ChequeNo"))||null==n.errors?null:n.errors.required)}}function Vt(i,a){if(1&i&&(e.ynx(0),e.YNc(1,jt,2,1,"ng-container",1),e.BQk()),2&i){const t=e.oxw().$implicit;let n;e.xp6(1),e.Q6J("ngIf",(null==t||null==(n=t.get("ChequeNo"))?null:n.invalid)&&(null==t||null==(n=t.get("ChequeNo"))?null:n.touched)||(null==t||null==(n=t.get("ChequeNo"))?null:n.dirty))}}function Gt(i,a){1&i&&(e.TgZ(0,"span",56),e._uU(1,"Input is required"),e.qZA())}function Ht(i,a){if(1&i&&(e.ynx(0),e.YNc(1,Gt,2,0,"span",55),e.BQk()),2&i){const t=e.oxw(2).$implicit;let n;e.xp6(1),e.Q6J("ngIf",null==t||null==(n=t.get("ChequeDate"))||null==n.errors?null:n.errors.required)}}function zt(i,a){if(1&i&&(e.ynx(0),e.YNc(1,Ht,2,1,"ng-container",1),e.BQk()),2&i){const t=e.oxw().$implicit;let n;e.xp6(1),e.Q6J("ngIf",(null==t||null==(n=t.get("ChequeDate"))?null:n.invalid)&&(null==t||null==(n=t.get("ChequeDate"))?null:n.touched)||(null==t||null==(n=t.get("ChequeDate"))?null:n.dirty))}}function $t(i,a){1&i&&(e.TgZ(0,"span",56),e._uU(1,"Input is required"),e.qZA())}function Kt(i,a){if(1&i&&(e.ynx(0),e.YNc(1,$t,2,0,"span",55),e.BQk()),2&i){const t=e.oxw(2).$implicit;let n;e.xp6(1),e.Q6J("ngIf",null==t||null==(n=t.get("BankId"))||null==n.errors?null:n.errors.required)}}function Wt(i,a){if(1&i&&(e.ynx(0),e.YNc(1,Kt,2,1,"ng-container",1),e.BQk()),2&i){const t=e.oxw().$implicit;let n;e.xp6(1),e.Q6J("ngIf",(null==t||null==(n=t.get("BankId"))?null:n.invalid)&&(null==t||null==(n=t.get("BankId"))?null:n.touched)||(null==t||null==(n=t.get("BankId"))?null:n.dirty))}}function Xt(i,a){1&i&&(e.TgZ(0,"span",56),e._uU(1,"Input is required"),e.qZA())}function en(i,a){if(1&i&&(e.ynx(0),e.YNc(1,Xt,2,0,"span",55),e.BQk()),2&i){const t=e.oxw(2).$implicit;let n;e.xp6(1),e.Q6J("ngIf",null==t||null==(n=t.get("ReasonId"))||null==n.errors?null:n.errors.required)}}function tn(i,a){if(1&i&&(e.ynx(0),e.YNc(1,en,2,1,"ng-container",1),e.BQk()),2&i){const t=e.oxw().$implicit;let n;e.xp6(1),e.Q6J("ngIf",(null==t||null==(n=t.get("ReasonId"))?null:n.invalid)&&(null==t||null==(n=t.get("ReasonId"))?null:n.touched)||(null==t||null==(n=t.get("ReasonId"))?null:n.dirty))}}function nn(i,a){1&i&&(e.TgZ(0,"span",56),e._uU(1,"Input is required"),e.qZA())}function on(i,a){if(1&i&&(e.ynx(0),e.YNc(1,nn,2,0,"span",55),e.BQk()),2&i){const t=e.oxw(2).$implicit;let n;e.xp6(1),e.Q6J("ngIf",null==t||null==(n=t.get("ChequeCustomer"))||null==n.errors?null:n.errors.required)}}function an(i,a){if(1&i&&(e.ynx(0),e.YNc(1,on,2,1,"ng-container",1),e.BQk()),2&i){const t=e.oxw().$implicit;let n;e.xp6(1),e.Q6J("ngIf",(null==t||null==(n=t.get("ChequeCustomer"))?null:n.invalid)&&(null==t||null==(n=t.get("ChequeCustomer"))?null:n.touched)||(null==t||null==(n=t.get("ChequeCustomer"))?null:n.dirty))}}const ln=function(i){return{isUploaded:!0,uploadedFile:i}};function sn(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"view-file",57),e.NdJ("removeFile",function(o){e.CHM(t);const l=e.oxw().index,s=e.oxw(2);return e.KtG(s.removeFileHandle(o,l))}),e.qZA()}if(2&i){const t=e.oxw().index,n=e.oxw(2);e.Q6J("remove",!0)("data",e.VKq(2,ln,n.filesToUpload[t]))}}function rn(i,a){1&i&&(e.TgZ(0,"span",56),e._uU(1,"Input is required"),e.qZA())}function cn(i,a){if(1&i&&(e.ynx(0),e.YNc(1,rn,2,0,"span",55),e.BQk()),2&i){const t=e.oxw(2).$implicit;let n;e.xp6(1),e.Q6J("ngIf",null==t||null==(n=t.get("Attachment"))||null==n.errors?null:n.errors.required)}}function un(i,a){if(1&i&&(e.ynx(0),e.YNc(1,cn,2,1,"ng-container",1),e.BQk()),2&i){const t=e.oxw().$implicit;let n;e.xp6(1),e.Q6J("ngIf",(null==t||null==(n=t.get("Attachment"))?null:n.invalid)&&(null==t||null==(n=t.get("Attachment"))?null:n.touched)||(null==t||null==(n=t.get("Attachment"))?null:n.dirty))}}const dn=function(){return{containerClass:"theme-red",isAnimated:!0,showClearButton:!0}};function pn(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"tr",33)(1,"td"),e._UZ(2,"input",34),e.qZA(),e.TgZ(3,"td"),e._UZ(4,"input",35),e.YNc(5,Vt,2,1,"ng-container",1),e.qZA(),e.TgZ(6,"td")(7,"div",36),e._UZ(8,"input",37,38),e.TgZ(10,"span",39),e.NdJ("click",function(){e.CHM(t);const o=e.MAs(9);return e.KtG(o.toggle())}),e._UZ(11,"img",40),e.qZA()(),e.YNc(12,zt,2,1,"ng-container",1),e.qZA(),e.TgZ(13,"td"),e._UZ(14,"ng-select",41),e.YNc(15,Wt,2,1,"ng-container",1),e.qZA(),e.TgZ(16,"td"),e._UZ(17,"ng-select",42),e.YNc(18,tn,2,1,"ng-container",1),e.qZA(),e.TgZ(19,"td"),e._UZ(20,"input",43),e.YNc(21,an,2,1,"ng-container",1),e.qZA(),e.TgZ(22,"td")(23,"div",44)(24,"input",45),e.NdJ("click",function(o){const s=e.CHM(t).index,r=e.oxw(2);return e.KtG(r.sameCustomer(s,o))}),e.qZA(),e.TgZ(25,"label",46),e._uU(26," Same Customer "),e.qZA()()(),e.TgZ(27,"td")(28,"div",47)(29,"div",48),e.NdJ("click",function(){const l=e.CHM(t).index,s=e.oxw(2);return e.KtG(s.fileRefs.toArray()[l].nativeElement.click())}),e._UZ(30,"img",49),e.TgZ(31,"h4",50),e._uU(32,"Drag & drop files"),e.qZA()(),e.YNc(33,sn,1,4,"view-file",51),e.qZA(),e.TgZ(34,"input",52,53),e.NdJ("change",function(o){const s=e.CHM(t).index,r=e.oxw(2);return e.KtG(r.onFileSelected(o,s))}),e.qZA(),e.YNc(36,un,2,1,"ng-container",1),e.qZA(),e.TgZ(37,"td"),e._UZ(38,"textarea",54),e.qZA()()}if(2&i){const t=a.$implicit,n=a.index,o=e.oxw(2);let l,s,r,c,d,_;e.Q6J("formGroupName",n),e.xp6(5),e.Q6J("ngIf",null==t||null==(l=t.get("ChequeNo"))?null:l.errors),e.xp6(3),e.Q6J("bsConfig",e.DdM(13,dn)),e.xp6(4),e.Q6J("ngIf",null==t||null==(s=t.get("ChequeDate"))?null:s.errors),e.xp6(2),e.Q6J("items",o.bankList),e.xp6(1),e.Q6J("ngIf",null==t||null==(r=t.get("BankId"))?null:r.errors),e.xp6(2),e.Q6J("items",o.reasonList),e.xp6(1),e.Q6J("ngIf",null==t||null==(c=t.get("ReasonId"))?null:c.errors),e.xp6(3),e.Q6J("ngIf",null==t||null==(d=t.get("ChequeCustomer"))?null:d.errors),e.xp6(12),e.Q6J("ngIf",null==o.filesToUpload[n]?null:o.filesToUpload[n].file),e.xp6(1),e.uIk("accept",o.acceptedFileTypes),e.xp6(2),e.Q6J("ngIf",null==t||null==(_=t.get("Attachment"))?null:_.errors),e.xp6(2),e.Q6J("appMaxCharacters",200)}}function _n(i,a){if(1&i&&(e.TgZ(0,"button",58),e._UZ(1,"fa-icon",59),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("icon",t.faCircleNotch)("spin",!0)}}function hn(i,a){if(1&i&&(e.TgZ(0,"div",60),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.messageError," ")}}function gn(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",3)(1,"div",4)(2,"h5"),e._uU(3,"Replace Cheque "),e._UZ(4,"br"),e.TgZ(5,"span",5),e._uU(6,"You are about to Replace the following Cheque"),e.qZA()(),e.YNc(7,Ft,3,5,"span",6),e.qZA(),e.TgZ(8,"div",3)(9,"div",7)(10,"h6",8),e._uU(11,"Cheque No. "),e.qZA(),e.TgZ(12,"h6",8),e._uU(13,"Customer Name"),e.qZA(),e.TgZ(14,"h6",8),e._uU(15,"Cheque Bank Name"),e.qZA(),e.TgZ(16,"h6",8),e._uU(17,"Due Date"),e.qZA(),e.TgZ(18,"h6",8),e._uU(19,"Amount"),e.qZA(),e.TgZ(20,"h6",8),e._uU(21,"Currency"),e.qZA(),e.TgZ(22,"h6",8),e._uU(23," Amount (JOD)"),e.qZA()(),e.TgZ(24,"div",9),e.YNc(25,Bt,21,19,"div",10),e.qZA()(),e.TgZ(26,"form",11),e.NdJ("ngSubmit",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onSubmit())}),e.TgZ(27,"div",12)(28,"div",13)(29,"div",14)(30,"h5",15),e._uU(31," New Cheque "),e.qZA()()(),e.TgZ(32,"div",16)(33,"table",17)(34,"thead")(35,"tr")(36,"th"),e._uU(37,"Amount to Pay"),e.qZA(),e.TgZ(38,"th"),e._uU(39,"Cheque No *"),e.qZA(),e.TgZ(40,"th"),e._uU(41,"Date *"),e.qZA(),e.TgZ(42,"th",18),e._uU(43,"Bank *"),e.qZA(),e.TgZ(44,"th"),e._uU(45,"Reason Id *"),e.qZA(),e.TgZ(46,"th"),e._uU(47,"Cheque Drawer Name"),e.qZA(),e.TgZ(48,"th"),e._uU(49,"Same Customer *"),e.qZA(),e.TgZ(50,"th"),e._uU(51,"Attachment *"),e.qZA(),e.TgZ(52,"th"),e._uU(53,"Note"),e.qZA()()(),e.TgZ(54,"tbody",19),e.YNc(55,pn,39,14,"tr",20),e.qZA()()(),e.TgZ(56,"div",21)(57,"div",22)(58,"button",23),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.close())}),e._uU(59,"Close"),e.qZA(),e.TgZ(60,"button",24),e._uU(61," Confirm "),e.qZA(),e.YNc(62,_n,2,2,"button",25),e.qZA()(),e.YNc(63,hn,2,1,"div",26),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(7),e.Q6J("ngIf",t.details),e.xp6(18),e.Q6J("ngForOf",t.details),e.xp6(1),e.Q6J("formGroup",t.form),e.xp6(29),e.Q6J("ngForOf",t.formArray.controls),e.xp6(7),e.Q6J("ngIf",t.loading),e.xp6(1),e.Q6J("ngIf",t.messageError)}}function mn(i,a){1&i&&e._UZ(0,"app-loading")}function fn(i,a){if(1&i&&(e.TgZ(0,"div",61)(1,"div",62)(2,"h5"),e._UZ(3,"i",63),e._uU(4),e.qZA()()()),2&i){const t=e.oxw();e.xp6(4),e.hij(" ",t.message,"")}}let ae=(()=>{class i{constructor(t,n,o,l,s,r){this.fb=t,this.toastrService=n,this.depositservice=o,this.modalService=l,this._datePipe=s,this._activeModal=r,this.details=[],this.isLoading=!1,this.faXmark=V.g82,this.faCloudArrowUp=V.wEO,this.faCircleNotch=V.IJ7,this.loading=!1,this.bankList=[],this.message="",this.messageError="",this.isStatus=!1,this.submitted=!1,this.unsubscribe=new R.x,this.filesToUpload=[],this.reasonList=[],this.acceptedFileTypes="image/*,application/pdf",this.sendtoLoadData=new e.vpe,this.fileRefs=new e.n_E}ngOnInit(){console.log(this.details),this.form=this.fb.group({chequeArray:this.fb.array([this.initFormGroup()])}),this.depositservice.getBankLookups(11).subscribe(t=>{this.makeBankList(t.data||[])}),this.getActionReasons(),this.formArray.clear(),this.details.forEach((t,n)=>{this.formArray.push(this.initFormGroup()),this.formArray.at(n).get("AmountToPay")?.setValue(t?.chequeCollectionJod),this.formArray.at(n).get("ChequeCustomer")?.setValue(t?.customer?.customerName||null),this.formArray.at(n).get("Customer")?.setValue(!0)})}get formArray(){return this.form.get("chequeArray")}initFormGroup(){return this.fb.group({AmountToPay:[{value:"",disabled:!0}],ChequeNo:["",[u.kI.required]],ChequeDate:["",[u.kI.required]],BankId:[null,[u.kI.required]],ChequeCustomer:["",[u.kI.required]],ReasonId:[null,[u.kI.required]],Customer:!1,Attachment:[null,[u.kI.required]],Note:["",[u.kI.maxLength(200)]]})}getActionReasons(){this.depositservice.getActionReasons(`?actionId=${this.actionType.id}&pageSize=1000`).subscribe(n=>{this.reasonList=n.data})}sameCustomer(t,n){n.target.checked?this.formArray.at(t).get("ChequeCustomer")?.setValue(this.details[0]?.customer?.customerName):this.formArray.at(t).get("ChequeCustomer")?.setValue(null)}makeBankList(t){let n=[];if(t.length>0)for(let o=0;o<t.length;o++){const l=t[o];n.push({id:l.id,bankName:l?.name?.[0].lookupName})}this.bankList=n}onFileSelected(t,n){[...t.target.files].forEach(l=>{this.depositservice.fileToBase64(l).then(s=>{this.uploadFile(l,n),this.filesToUpload[n]=s})})}uploadFile(t,n){const o=new FormData;o.append("Folder","ChequeImages"),o.append("File",t),this.depositservice.uploadFile(o).subscribe(l=>{l.isSuccess&&this.formArray.at(n).get("Attachment")?.setValue(l.data)})}removeFileHandle(t,n){this.filesToUpload.splice(n,1),this.formArray.at(n).get("Attachment")?.setValue(""),this.fileRefs.toArray()[n].nativeElement.value=null}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}bankSelected(t){this.form.get("BankId")?.setValue(t)}remove(t){"ChequeNo"==t?this.form.get("ChequeNo")?.setValue(null):"ChequeCustomer"==t&&(this.form.get("ChequeCustomer")?.setValue(""),this.form.get("Customer")?.setValue(!1))}removeCollectionDateFilter(){this.form.get("ChequeDate")?.patchValue("")}onSubmit(){if(this.form.valid){if(this.form.valid){let t,n;if(this.submitted=!0,this.isLoading=!0,this.details.length>1){let o=[];this.details.forEach((l,s)=>{let r=this.formArray.value,c={depositedChequeId:l.id,chequeNo:""+r[s].ChequeNo,chequeDate:this._datePipe.transform(r[s].ChequeDate,"yyyy-MM-dd"),bankId:r[s].BankId,chequeCustomer:r[s].ChequeCustomer,actionFile:r[s].Attachment,reasonId:r[s].ReasonId,notes:r[s].Note};o.push(c)}),t={actionId:this.actionType.id,cheques:o}}else{const o=new FormData;let l=this.formArray.value[0],s=this._datePipe.transform(l.ChequeDate,"yyyy-MM-dd")||"";o.append("DepositedChequeId",this.details[0].id),o.append("ActionId",this.actionType.id),o.append("ChequeNo",l.ChequeNo),o.append("ChequeDate",s),o.append("BankId",l.BankId),o.append("ChequeCustomer",l.ChequeCustomer),o.append("ActionFile",this.filesToUpload[0].file),o.append("ReasonId",l.ReasonId),o.append("Notes",l.Note),t=o}n=this.details.length>1?this.depositservice.actionOnChequesMulti(t):this.depositservice.actionOnCheques(t),n.subscribe({next:o=>{o.isSuccess&&(this.responseModal("success",`Your ${this.actionType?.name?.[0].lookupName} Action Successfully Performed`),this.sendtoLoadData.emit(!0))},error:o=>{this.responseModal("error",o?.error?.errors[0].errorMessageEn)}}).add(()=>this.isLoading=!1)}}else this.form.markAllAsTouched()}responseModal(t,n){const o=this.modalService.open(M.e);o.componentInstance.type=t,o.componentInstance.message=n}get formControls(){return this.form.controls}close(){this._activeModal.close()}get formValid(){return this.form.controls}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(u.qu),e.Y36(ne._W),e.Y36(Z),e.Y36(x.FF),e.Y36(p.uU),e.Y36(x.Kz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-replace-cheque"]],viewQuery:function(t,n){if(1&t&&e.Gf(Ot,5),2&t){let o;e.iGM(o=e.CRH())&&(n.fileRefs=o)}},inputs:{actionType:"actionType",details:"details"},outputs:{sendtoLoadData:"sendtoLoadData"},features:[e._Bn([p.uU])],decls:3,vars:3,consts:[["class","cr-card",4,"ngIf"],[4,"ngIf"],["class","modal-body",4,"ngIf"],[1,"cr-card"],[1,"top-heading"],[1,"heading-break"],["class","text-end",4,"ngIf"],[1,"card-head","grid-container"],[1,"title"],[1,"card-content"],["class","grid-container mb-3",4,"ngFor","ngForOf"],[3,"formGroup","ngSubmit"],[1,"row","mt-2"],[1,"col-12"],[1,"top-heading","bb-none"],[1,"heading"],[1,"col-12","simple-table"],[1,"table"],["width","10%"],["formArrayName","chequeArray"],[3,"formGroupName",4,"ngFor","ngForOf"],[1,"col-md-12"],[1,"btns-group"],["type","button",1,"btn","btn-cancel",3,"click"],["type","submit",1,"btn","btn-save"],["type","button","class","btn btn-save btn-load","disabled","",4,"ngIf"],["class","alert alert-danger text-center mt-3 mb-3 my-2","role","alert",4,"ngIf"],[1,"text-end"],[1,"collected-btn"],[1,"grid-container","mb-3"],[4,"ngIf","ngIfElse"],["banks",""],["height","25","width","25",3,"src"],[3,"formGroupName"],["formControlName","AmountToPay","type","text",1,"form-control","custom-input-field"],["formControlName","ChequeNo","numbersOnly","","type","number","trimOnBlurInput","","placeholder","Type name","autocomplete","off",1,"form-control","custom-input-field"],[1,"input-group"],["type","text","formControlName","ChequeDate","placeholder","Select Date","bsDatepicker","",1,"form-control","custom-input-field",3,"bsConfig"],["drp","bsDatepicker"],[1,"input-group-text","cursor-pointer",3,"click"],["src","/assets/images/calendar.png","alt","",1,"calender"],["placeholder","Bank","bindLabel","bankName","bindValue","id","formControlName","BankId",3,"items"],["placeholder","Reason Type","bindLabel","chequeActionReason","bindValue","actionReasonID","formControlName","ReasonId",3,"items"],["formControlName","ChequeCustomer","alphabetOnly","","type","text","placeholder","Type name","autocomplete","off","trimOnBlurInput","",1,"form-control","custom-input-field"],[1,"form-check","form-check-inline"],["type","checkbox","formControlName","Customer",1,"form-check-input",3,"click"],["for","indoor",1,"form-check-label"],[1,"d-flex","flex-column"],[1,"file-uploader-sm","mb-2","d-flex","gap-2","justify-content-center","align-items-center",3,"click"],["height","30","src","assets/images/uploader.png"],[1,"font-14","mb-0"],[3,"remove","data","removeFile",4,"ngIf"],["type","file","hidden","",3,"change"],["fileRef",""],["formControlName","Note",1,"form-control","custom-input-field",3,"appMaxCharacters"],["class","text-danger",4,"ngIf"],[1,"text-danger"],[3,"remove","data","removeFile"],["type","button","disabled","",1,"btn","btn-save","btn-load"],[3,"icon","spin"],["role","alert",1,"alert","alert-danger","text-center","mt-3","mb-3","my-2"],[1,"modal-body"],[1,"message"],[1,"fa-regular","fa-circle-check"]],template:function(t,n){1&t&&(e.YNc(0,gn,64,6,"div",0),e.YNc(1,mn,1,0,"app-loading",1),e.YNc(2,fn,5,1,"div",2)),2&t&&(e.Q6J("ngIf",!n.isLoading),e.xp6(1),e.Q6J("ngIf",n.isLoading),e.xp6(1),e.Q6J("ngIf",n.message))},dependencies:[p.sg,p.O5,u._Y,u.Fj,u.wV,u.Wl,u.JJ,u.JL,u.sg,u.u,u.x0,u.CE,fe.BN,J.w9,q.Np,q.Y5,ie.N,Ce.Y,St.A,Qt,k,j,p.JJ,p.uU],styles:[".grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:.7fr 1.5fr repeat(5,1fr);gap:10px}"]}),i})();function Cn(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",11),e.NdJ("click",function(){const o=e.CHM(t),l=o.$implicit,s=o.index,r=e.oxw();return e.KtG(r.chooseDeposit(l,s))}),e._uU(1),e.qZA()}if(2&i){const t=a.$implicit,n=e.oxw();e.ekj("active",t.id===n.selectedValue),e.xp6(1),e.hij(" ",t.name," ")}}function xn(i,a){if(1&i&&(e.TgZ(0,"div",14)(1,"div",15)(2,"h6",16),e._uU(3," Cheque drawer name "),e.qZA(),e.TgZ(4,"p"),e._uU(5),e.qZA()()()),2&i){const t=e.oxw().$implicit;e.xp6(5),e.Oqu(t.drawerName)}}function bn(i,a){if(1&i&&(e.TgZ(0,"div",14)(1,"div",15)(2,"h6",16),e._uU(3," Customer Name "),e.qZA(),e.TgZ(4,"p"),e._uU(5),e.qZA()()()),2&i){const t=e.oxw().$implicit;e.xp6(5),e.Oqu(null==t.customer?null:t.customer.customerName)}}function qn(i,a){1&i&&(e.TgZ(0,"div",35),e._UZ(1,"img",36),e.TgZ(2,"h3",37),e._uU(3,"No Image to display"),e.qZA()())}function vn(i,a){if(1&i&&e._UZ(0,"button",50),2&i){const t=a.index;e.ekj("active",0===t),e.uIk("data-bs-slide-to",t)("aria-current",0===t?"true":null)("aria-label","Slide "+(t+1))}}function Tn(i,a){if(1&i&&(e.TgZ(0,"div",51),e._UZ(1,"img",52),e.qZA()),2&i){const t=a.$implicit;e.ekj("active",0===a.index),e.xp6(1),e.Q6J("src",null==t?null:t.imagePath,e.LSH)}}function Dn(i,a){if(1&i&&(e.TgZ(0,"div",38)(1,"div",39),e.YNc(2,vn,1,5,"button",40),e.qZA(),e.TgZ(3,"div",6)(4,"div",41)(5,"button",42),e._UZ(6,"span",43),e.TgZ(7,"span",44),e._uU(8,"Previous"),e.qZA()()(),e.TgZ(9,"div",45)(10,"div",46),e.YNc(11,Tn,2,3,"div",47),e.qZA()(),e.TgZ(12,"div",41)(13,"button",48),e._UZ(14,"span",49),e.TgZ(15,"span",44),e._uU(16,"Next"),e.qZA()()()()()),2&i){const t=e.oxw(3);e.xp6(2),e.Q6J("ngForOf",null==t.details?null:t.details.chequeImages),e.xp6(9),e.Q6J("ngForOf",null==t.details?null:t.details.chequeImages)}}function Zn(i,a){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,qn,4,0,"div",33),e.YNc(2,Dn,17,2,"div",34),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",0==(null==t||null==t.chequeImages?null:t.chequeImages.length)),e.xp6(1),e.Q6J("ngIf",(null==t||null==t.chequeImages?null:t.chequeImages.length)>0)}}function An(i,a){1&i&&(e.TgZ(0,"div",35),e._UZ(1,"img",36),e.TgZ(2,"h3",37),e._uU(3,"No Image to display"),e.qZA()())}function yn(i,a){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,An,4,0,"div",33),e._UZ(2,"img",53),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",!(null!=t&&t.chequeImages)),e.xp6(1),e.Q6J("src",null==t?null:t.chequeImage,e.LSH)}}function wn(i,a){if(1&i&&(e.ynx(0),e._UZ(1,"view-file",54),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("file",null==t?null:t.actionFile)("download",!0)}}function kn(i,a){1&i&&(e.TgZ(0,"p"),e._uU(1,"---"),e.qZA())}function Nn(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",6)(1,"div",12)(2,"div",13)(3,"div",6)(4,"div",14)(5,"div",15)(6,"h6",16),e._uU(7," Amount to Pay "),e.qZA(),e.TgZ(8,"p"),e._uU(9),e.qZA()()(),e.TgZ(10,"div",14)(11,"div",15)(12,"h6",16),e._uU(13," Cheque No "),e.qZA(),e.TgZ(14,"p"),e._uU(15),e.qZA()()(),e.TgZ(16,"div",14)(17,"div",15)(18,"h6",16),e._uU(19," Date "),e.qZA(),e.TgZ(20,"p"),e._uU(21),e.ALo(22,"date"),e.qZA()()(),e.TgZ(23,"div",14)(24,"h6",16),e._uU(25," Bank "),e.qZA(),e.TgZ(26,"p"),e._uU(27),e.qZA()(),e.YNc(28,xn,6,1,"div",17),e.YNc(29,bn,6,1,"div",17),e.TgZ(30,"div",18)(31,"div",19)(32,"div",20)(33,"div")(34,"div")(35,"div",21)(36,"h5"),e._uU(37),e.qZA(),e.TgZ(38,"button",22),e._uU(39),e.qZA()(),e.YNc(40,Zn,3,2,"div",23),e.YNc(41,yn,3,2,"div",23),e.qZA()()()()(),e.TgZ(42,"div",24)(43,"div",6)(44,"div",25)(45,"div",26)(46,"p"),e._uU(47,"Action Reason"),e.qZA(),e.TgZ(48,"p",27),e._uU(49),e.qZA()()(),e.TgZ(50,"div",25)(51,"div",26)(52,"p"),e._uU(53,"Action Attachment"),e.qZA(),e.YNc(54,wn,2,2,"ng-container",28),e.YNc(55,kn,2,0,"ng-template",null,29,e.W1O),e.qZA()(),e.TgZ(57,"div",30)(58,"div",26)(59,"p"),e._uU(60,"Action Note"),e.qZA(),e.TgZ(61,"p",27),e._uU(62),e.qZA()()()()()()()(),e.TgZ(63,"div",18)(64,"div",31)(65,"button",32),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.close())}),e._uU(66,"Close"),e.qZA()()()()}if(2&i){const t=a.$implicit,n=e.MAs(56),o=e.oxw();e.xp6(9),e.hij("",t.chequeCollectionJod," JOD"),e.xp6(6),e.Oqu(t.chequeNo),e.xp6(6),e.Oqu(e.xi3(22,19,t.chequeDate,"dd-MM-yyyy")),e.xp6(6),e.Oqu(null==t||null==t.bank||null==t.bank.translations||null==t.bank.translations[0]?null:t.bank.translations[0].lookupName),e.xp6(1),e.Q6J("ngIf",1==o.selectedValue),e.xp6(1),e.Q6J("ngIf",2==o.selectedValue),e.xp6(8),e.Oqu(o.selectedCheque.name),e.xp6(1),e.Udp("color",null==t||null==t.statusObj?null:t.statusObj.lookupTextColor)("background-color",null==t||null==t.statusObj?null:t.statusObj.lookupBGColor),e.Q6J("disabled",!0),e.xp6(1),e.hij(" ",null==t||null==t.statusObj||null==t.statusObj.translations||null==t.statusObj.translations[0]?null:t.statusObj.translations[0].lookupName," "),e.xp6(1),e.Q6J("ngIf",2==o.selectedValue),e.xp6(1),e.Q6J("ngIf",1==o.selectedValue),e.xp6(8),e.Oqu((null==t||null==t.reason?null:t.reason.chequeActionReason)||"---"),e.xp6(5),e.Q6J("ngIf",null==t?null:t.actionFile)("ngIfElse",n),e.xp6(8),e.Oqu((null==t?null:t.notes)||"---")}}let le=(()=>{class i{constructor(){this.selectedValue=1,this.replacedCheque=[],this.details=[],this.sendtoLoadData=new e.vpe}ngOnInit(){}chooseDeposit(t,n){this.selectedValue=n+1,this.selectedCheque=t}getdepositTypes(){this.replacedCheque=[{id:1,name:"V1 Cheque Details",children:[{ChequeId:1,ChequeAmount:"500JOD",ChequeNumber:345465,ChequeDate:"16-june-2023",ChauqeBankID:"Arab Bank",ChauqeName:"Muhammad Ali sami mahmood",Customer:!0,Note:"No note has been added"}]},{id:2,name:"V2 Cheque Details",children:[{ChequeId:2,ChequeAmount:"1000JOD",ChequeNumber:100017,ChequeDate:"20-june-2023",ChauqeBankID:"National Bank",ChauqeName:"Muhammad Sami",Customer:!1,Note:"Cheque replaced by the help of owner"}]},{id:3,name:"V3 Cheque Details",children:[{ChequeId:3,ChequeAmount:"1500JOD",ChequeNumber:345617,ChequeDate:"10-june-2023",ChauqeBankID:"Arab Bank",ChauqeName:"Muhammad Sami Ibrahim",Customer:!0,Note:"no comment"}]}]}close(){this.sendtoLoadData.emit()}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-replaced-cheque-detail-view"]],inputs:{replacedCheque:"replacedCheque",details:"details",selectedCheque:"selectedCheque"},outputs:{sendtoLoadData:"sendtoLoadData"},decls:22,vars:7,consts:[[1,"modal-body"],[1,"cr-replace-heading"],[1,"d-flex","right-title"],[1,"d-flex"],[1,"bold"],[1,"card-page"],[1,"row"],[1,"col-md-9"],[1,"btn-tabs"],["type","button","class","btn",3,"active","click",4,"ngFor","ngForOf"],["class","row",4,"ngFor","ngForOf"],["type","button",1,"btn",3,"click"],[1,"cr-replace-view"],[1,"cr-replace-head"],[1,"col-lg-3","col-sm-6"],[1,"block"],[1,"title"],["class","col-lg-3 col-sm-6",4,"ngIf"],[1,"col-lg-12"],[1,"cr-card","mt-3"],[1,"wizard-content"],[1,"top-heading"],["type","button",1,"btn","btn-light","collected-btn",3,"disabled"],[4,"ngIf"],[1,"col-md-12","mt-3"],[1,"col-4"],[1,"d-flex","flex-column"],[1,"txt-light"],[4,"ngIf","ngIfElse"],["noActionFile",""],[1,"col-12","mt-2"],[1,"btns-group"],["type","button",1,"btn","btn-cancel",3,"click"],["class","no-image-display",4,"ngIf"],["id","carouselExampleIndicators1","class","carousel slide","data-bs-ride","carousel",4,"ngIf"],[1,"no-image-display"],["src","https://cdn.dribbble.com/users/1785628/screenshots/5605512/media/097297f8e21d501ba45d7ce437ed77bd.gif","alt",""],[1,"text-center"],["id","carouselExampleIndicators1","data-bs-ride","carousel",1,"carousel","slide"],[1,"carousel-indicators"],["type","button","data-bs-target","#carouselExampleIndicators1",3,"active",4,"ngFor","ngForOf"],[1,"col-lg-1"],["type","button","data-bs-target","#carouselExampleIndicators1","data-bs-slide","prev",1,"carousel-control-prev"],["aria-hidden","true",1,"carousel-control-prev-icon"],[1,"visually-hidden"],[1,"col-lg-10"],[1,"carousel-inner"],["class","carousel-item",3,"active",4,"ngFor","ngForOf"],["type","button","data-bs-target","#carouselExampleIndicators1","data-bs-slide","next",1,"carousel-control-next"],["aria-hidden","true",1,"carousel-control-next-icon"],["type","button","data-bs-target","#carouselExampleIndicators1"],[1,"carousel-item"],["alt","...",1,"d-block","w-100",3,"src"],[1,"d-block","w-100",3,"src"],[3,"file","download"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h6"),e._uU(3,"Replace Cheque Details View"),e.qZA(),e.TgZ(4,"div",2)(5,"div",3)(6,"h5"),e._uU(7,"Replace By:"),e.qZA(),e.TgZ(8,"p"),e._uU(9),e.qZA()(),e.TgZ(10,"div",3)(11,"h5",4),e._uU(12,"Replace Date:"),e.qZA(),e.TgZ(13,"p"),e._uU(14),e.ALo(15,"date"),e.qZA()()()(),e.TgZ(16,"div",5)(17,"div",6)(18,"div",7)(19,"div",8),e.YNc(20,Cn,2,3,"button",9),e.qZA()()(),e.YNc(21,Nn,67,22,"div",10),e.qZA()()),2&t&&(e.xp6(9),e.Oqu(null==n.details||null==n.details.createdBy?null:n.details.createdBy.fullName),e.xp6(5),e.Oqu(e.xi3(15,4,null==n.details?null:n.details.createdAt,"dd/MM/yyyy")),e.xp6(6),e.Q6J("ngForOf",n.replacedCheque),e.xp6(1),e.Q6J("ngForOf",n.selectedCheque.children))},dependencies:[p.sg,p.O5,k,p.uU]}),i})();const In=["fileRef"];function Un(i,a){if(1&i&&(e.TgZ(0,"p"),e._UZ(1,"img",28),e._uU(2),e.qZA()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.Q6J("src",null==t||null==t.bank?null:t.bank.imagePath,e.LSH),e.xp6(1),e.hij(" ",(null==t||null==t.bank||null==t.bank.translations||null==t.bank.translations[0]?null:t.bank.translations[0].lookupName)||"---"," ")}}function Mn(i,a){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Un,3,2,"p",1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",null==t||null==t.bank||null==t.bank.translations||null==t.bank.translations[0]?null:t.bank.translations[0].lookupName)}}function Jn(i,a){if(1&i&&(e.TgZ(0,"p"),e._UZ(1,"img",28),e._uU(2),e.qZA()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.Q6J("src",null==t||null==t.bank?null:t.bank.imagePath,e.LSH),e.xp6(1),e.Oqu((null==t?null:t.bank)||"---")}}function Sn(i,a){if(1&i&&e.YNc(0,Jn,3,2,"p",1),2&i){const t=e.oxw().$implicit;e.Q6J("ngIf",null==t?null:t.bank)}}function Qn(i,a){if(1&i&&(e.TgZ(0,"div",25)(1,"p"),e._uU(2),e.qZA(),e.TgZ(3,"p"),e._uU(4),e._UZ(5,"br"),e._uU(6),e.qZA(),e.YNc(7,Mn,2,1,"div",26),e.YNc(8,Sn,1,1,"ng-template",null,27,e.W1O),e.TgZ(10,"p"),e._uU(11),e.ALo(12,"date"),e.qZA(),e.TgZ(13,"p"),e._uU(14),e.ALo(15,"number"),e.qZA(),e.TgZ(16,"p"),e._uU(17),e.qZA(),e.TgZ(18,"p"),e._uU(19),e.ALo(20,"number"),e.qZA()()),2&i){const t=a.$implicit,n=e.MAs(9);e.xp6(2),e.Oqu((null==t?null:t.chequeNo)||"---"),e.xp6(2),e.hij("",null==t||null==t.customer?null:t.customer.customerName," "),e.xp6(2),e.Oqu(null==t||null==t.customer?null:t.customer.mobile),e.xp6(1),e.Q6J("ngIf",null==t||null==t.bank?null:t.bank.translations)("ngIfElse",n),e.xp6(4),e.Oqu(e.xi3(12,10,null==t?null:t.chequeDate,"dd MMM yyyy")||"---"),e.xp6(3),e.Oqu(e.xi3(15,13,null==t?null:t.collectedAmount,".3")||"---"),e.xp6(3),e.AsE("",null==t||null==t.currency[0]?null:t.currency[0].lookupName," (",(null==t||null==t.currency[0]?null:t.currency[0].currencyRate)||1,")"),e.xp6(2),e.Oqu(e.xi3(20,16,null==t?null:t.chequeCollectionJod,".3")||"---")}}const On=function(i){return{isUploaded:!0,uploadedFile:i}};function Fn(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"view-file",44),e.NdJ("removeFile",function(o){e.CHM(t);const l=e.oxw().index,s=e.oxw(2);return e.KtG(s.removeFileHandle(o,l))}),e.qZA()}if(2&i){const t=e.oxw().index,n=e.oxw(2);e.Q6J("remove",!0)("data",e.VKq(2,On,n.filesToUpload[t]))}}function Rn(i,a){1&i&&(e.TgZ(0,"span",46),e._uU(1,"Input is required"),e.qZA())}function Ln(i,a){if(1&i&&(e.ynx(0),e.YNc(1,Rn,2,0,"span",45),e.BQk()),2&i){const t=e.oxw(2).$implicit;let n;e.xp6(1),e.Q6J("ngIf",null==t||null==(n=t.get("attachment"))||null==n.errors?null:n.errors.required)}}function Pn(i,a){if(1&i&&(e.ynx(0),e.YNc(1,Ln,2,1,"ng-container",1),e.BQk()),2&i){const t=e.oxw().$implicit;let n;e.xp6(1),e.Q6J("ngIf",(null==t||null==(n=t.get("attachment"))?null:n.invalid)&&(null==t||null==(n=t.get("attachment"))?null:n.touched)||(null==t||null==(n=t.get("attachment"))?null:n.dirty))}}function Yn(i,a){1&i&&(e.TgZ(0,"span",46),e._uU(1,"Input is required"),e.qZA())}function Bn(i,a){if(1&i&&(e.ynx(0),e.YNc(1,Yn,2,0,"span",45),e.BQk()),2&i){const t=e.oxw(2).$implicit;let n;e.xp6(1),e.Q6J("ngIf",null==t||null==(n=t.get("chequeDate"))||null==n.errors?null:n.errors.required)}}function En(i,a){if(1&i&&(e.ynx(0),e.YNc(1,Bn,2,1,"ng-container",1),e.BQk()),2&i){const t=e.oxw().$implicit;let n;e.xp6(1),e.Q6J("ngIf",(null==t||null==(n=t.get("chequeDate"))?null:n.invalid)&&(null==t||null==(n=t.get("chequeDate"))?null:n.touched)||(null==t||null==(n=t.get("chequeDate"))?null:n.dirty))}}function jn(i,a){1&i&&(e.TgZ(0,"span",46),e._uU(1,"Input is required"),e.qZA())}function Vn(i,a){if(1&i&&(e.ynx(0),e.YNc(1,jn,2,0,"span",45),e.BQk()),2&i){const t=e.oxw(2).$implicit;let n;e.xp6(1),e.Q6J("ngIf",null==t||null==(n=t.get("reasonId"))||null==n.errors?null:n.errors.required)}}function Gn(i,a){if(1&i&&(e.ynx(0),e.YNc(1,Vn,2,1,"ng-container",1),e.BQk()),2&i){const t=e.oxw().$implicit;let n;e.xp6(1),e.Q6J("ngIf",(null==t||null==(n=t.get("reasonId"))?null:n.invalid)&&(null==t||null==(n=t.get("reasonId"))?null:n.touched)||(null==t||null==(n=t.get("reasonId"))?null:n.dirty))}}const Hn=function(){return{containerClass:"theme-red",isAnimated:!0,showClearButton:!0}};function zn(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"tr",29)(1,"td")(2,"div",30)(3,"div",31),e.NdJ("click",function(){const l=e.CHM(t).index,s=e.oxw(2);return e.KtG(s.fileRefs.toArray()[l].nativeElement.click())}),e._UZ(4,"img",32),e.TgZ(5,"h4",33),e._uU(6,"Drag & drop files"),e.qZA()(),e.YNc(7,Fn,1,4,"view-file",34),e.qZA(),e.TgZ(8,"input",35,36),e.NdJ("change",function(o){const s=e.CHM(t).index,r=e.oxw(2);return e.KtG(r.onFileSelected(o,s))}),e.qZA(),e.YNc(10,Pn,2,1,"ng-container",1),e.qZA(),e.TgZ(11,"td")(12,"div",37),e._UZ(13,"input",38,39),e.TgZ(15,"span",40),e.NdJ("click",function(){e.CHM(t);const o=e.MAs(14);return e.KtG(o.toggle())}),e._UZ(16,"img",41),e.qZA()(),e.YNc(17,En,2,1,"ng-container",1),e.qZA(),e.TgZ(18,"td"),e._UZ(19,"ng-select",42),e.YNc(20,Gn,2,1,"ng-container",1),e.qZA(),e.TgZ(21,"td"),e._UZ(22,"textarea",43),e.qZA()()}if(2&i){const t=a.$implicit,n=a.index,o=e.oxw(2);let l,s,r;e.Q6J("formGroupName",n),e.xp6(7),e.Q6J("ngIf",null==o.filesToUpload[n]?null:o.filesToUpload[n].file),e.xp6(1),e.uIk("accept",o.acceptedFileTypes),e.xp6(2),e.Q6J("ngIf",null==t||null==(l=t.get("attachment"))?null:l.errors),e.xp6(3),e.Q6J("bsConfig",e.DdM(9,Hn)),e.xp6(4),e.Q6J("ngIf",null==t||null==(s=t.get("chequeDate"))?null:s.errors),e.xp6(2),e.Q6J("items",o.reasonList),e.xp6(1),e.Q6J("ngIf",null==t||null==(r=t.get("reasonId"))?null:r.errors),e.xp6(2),e.Q6J("appMaxCharacters",200)}}function $n(i,a){if(1&i&&(e.TgZ(0,"button",47),e._UZ(1,"fa-icon",48),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("icon",t.faCircleNotch)("spin",!0)}}function Kn(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"h5"),e._uU(3,"Postponse Cheque "),e._UZ(4,"br"),e.TgZ(5,"span",4),e._uU(6,"You are about to Postpone the following Cheque"),e.qZA()(),e.TgZ(7,"span",5)(8,"p",6),e._uU(9),e.qZA()()(),e.TgZ(10,"div",2)(11,"div",7)(12,"h6",8),e._uU(13,"Cheque No. "),e.qZA(),e.TgZ(14,"h6",8),e._uU(15,"Customer Name"),e.qZA(),e.TgZ(16,"h6",8),e._uU(17,"Cheque Bank Name"),e.qZA(),e.TgZ(18,"h6",8),e._uU(19,"Due Date"),e.qZA(),e.TgZ(20,"h6",8),e._uU(21,"Amount"),e.qZA(),e.TgZ(22,"h6",8),e._uU(23,"Currency"),e.qZA(),e.TgZ(24,"h6",8),e._uU(25," Amount (JOD)"),e.qZA()(),e.TgZ(26,"div",9),e.YNc(27,Qn,21,19,"div",10),e.qZA()(),e.TgZ(28,"form",11),e.NdJ("submit",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onSubmit())}),e.TgZ(29,"div",12)(30,"div",13)(31,"div",14)(32,"h5",15),e._uU(33,"New Cheque Date"),e.qZA()()(),e.TgZ(34,"div",16)(35,"table",17)(36,"thead")(37,"tr")(38,"th"),e._uU(39,"Attahment *"),e.qZA(),e.TgZ(40,"th"),e._uU(41,"New Cheque Date *"),e.qZA(),e.TgZ(42,"th"),e._uU(43,"Reason Type *"),e.qZA(),e.TgZ(44,"th"),e._uU(45,"Note"),e.qZA()()(),e.TgZ(46,"tbody",18),e.YNc(47,zn,23,10,"tr",19),e.qZA()()(),e.TgZ(48,"div",20)(49,"div",21)(50,"button",22),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.close())}),e._uU(51,"Close"),e.qZA(),e.TgZ(52,"button",23),e._uU(53," Confirm "),e.qZA(),e.YNc(54,$n,2,2,"button",24),e.qZA()()()()()}if(2&i){const t=e.oxw();e.xp6(8),e.Udp("color",null==t.details[0]||null==t.details[0].statusObj?null:t.details[0].statusObj.lookupTextColor)("background-color",null==t.details[0]||null==t.details[0].statusObj?null:t.details[0].statusObj.lookupBGColor),e.xp6(1),e.hij(" ",null==t.details[0]||null==t.details[0].statusObj||null==t.details[0].statusObj.translations?null:t.details[0].statusObj.translations[0].lookupName," "),e.xp6(18),e.Q6J("ngForOf",t.details),e.xp6(1),e.Q6J("formGroup",t.form),e.xp6(19),e.Q6J("ngForOf",t.formArray.controls),e.xp6(7),e.Q6J("ngIf",t.loading)}}function Wn(i,a){1&i&&e._UZ(0,"app-loading")}let xe=(()=>{class i{constructor(t,n,o,l,s){this.fb=t,this.depositservice=n,this.modalService=o,this._datePipe=l,this._activeModal=s,this.details=[],this.isLoading=!1,this.loading=!1,this.unsubscribe=new R.x,this.faCircleNotch=V.IJ7,this.reasonList=[],this.filesToUpload=[],this.acceptedFileTypes="image/*,application/pdf",this.sendtoLoadData=new e.vpe,this.fileRefs=new e.n_E}ngOnInit(){this.form=this.fb.group({chequeArray:this.fb.array([this.initFormGroup()])}),this.getActionReasons(),this.formArray.clear(),this.details.forEach(t=>{this.formArray.push(this.initFormGroup())})}initFormGroup(){return this.fb.group({chequeDate:["",[u.kI.required]],note:[""],attachment:[null,[u.kI.required]],reasonId:[null,[u.kI.required]]})}get formArray(){return this.form.get("chequeArray")}getActionReasons(){this.depositservice.getActionReasons(`?actionId=${this.actionType.id}&pageSize=1000`).subscribe(n=>{this.reasonList=n.data})}onSubmit(){if(!this.f.valid)return void this.f.markAllAsTouched();let t,n;if(this.isLoading=!0,this.details.length>1){let o=[];this.details.forEach((l,s)=>{let r=this.formArray.value,c={depositedChequeId:l.id,newChequeDate:this._datePipe.transform(r[s].chequeDate,"yyyy-MM-dd"),actionFile:r[s].attachment,reasonId:r[s].reasonId,notes:r[s].note};o.push(c)}),t={actionId:this.actionType.id,cheques:o}}else{const o=new FormData;let l=this.formArray.value[0];o.append("DepositedChequeId",this.details[0].id),o.append("ActionId",this.actionType.id);let s=this._datePipe.transform(l.chequeDate,"yyyy-MM-dd")||"";o.append("NewChequeDate",s),o.append("Notes",l.note),o.append("ActionFile",this.filesToUpload[0].file),o.append("ReasonId",l.reasonId),t=o}n=this.details.length>1?this.depositservice.actionOnChequesMulti(t):this.depositservice.actionOnCheques(t),n.subscribe({next:o=>{o.isSuccess&&(this.responseModal("success",`Your ${this.actionType?.name?.[0].lookupName} Action Successfully Performed`),this.sendtoLoadData.emit(!0))},error:o=>{this.responseModal("error",o?.error?.errors[0].errorMessageEn)}}).add(()=>this.isLoading=!1)}responseModal(t,n){const o=this.modalService.open(M.e);o.componentInstance.type=t,o.componentInstance.message=n}close(){this._activeModal.close()}get f(){return this.form}onFileSelected(t,n){[...t.target.files].forEach(l=>{this.depositservice.fileToBase64(l).then(s=>{this.uploadFile(l,n),this.filesToUpload[n]=s})})}removeFileHandle(t,n){this.filesToUpload.splice(n,1),this.formArray.at(n).get("attachment")?.setValue(""),this.fileRefs.toArray()[n].nativeElement.value=null}uploadFile(t,n){const o=new FormData;o.append("Folder","ChequeImages"),o.append("File",t),this.depositservice.uploadFile(o).subscribe(l=>{l.isSuccess&&this.formArray.at(n).get("attachment")?.setValue(l.data)})}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(u.qu),e.Y36(Z),e.Y36(x.FF),e.Y36(p.uU),e.Y36(x.Kz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-postpone-cheque"]],viewQuery:function(t,n){if(1&t&&e.Gf(In,5),2&t){let o;e.iGM(o=e.CRH())&&(n.fileRefs=o)}},inputs:{actionType:"actionType",details:"details"},outputs:{sendtoLoadData:"sendtoLoadData"},features:[e._Bn([p.uU])],decls:2,vars:2,consts:[["class","cr-card",4,"ngIf"],[4,"ngIf"],[1,"cr-card"],[1,"top-heading"],[1,"heading-break"],[1,"text-end"],[1,"collected-btn"],[1,"card-head","grid-container"],[1,"title"],[1,"card-content"],["class","grid-container mb-3",4,"ngFor","ngForOf"],[3,"formGroup","submit"],[1,"row","mt-2"],[1,"col-12"],[1,"top-heading","bb-none"],[1,"heading"],[1,"col-12","simple-table"],[1,"table"],["formArrayName","chequeArray"],[3,"formGroupName",4,"ngFor","ngForOf"],[1,"col-md-12"],[1,"btns-group"],["type","button",1,"btn","btn-cancel",3,"click"],["type","submit",1,"btn","btn-save"],["type","button","class","btn btn-save btn-load","disabled","",4,"ngIf"],[1,"grid-container","mb-3"],[4,"ngIf","ngIfElse"],["banks",""],["height","25","width","25",3,"src"],[3,"formGroupName"],[1,"d-flex","flex-column"],[1,"file-uploader-sm","mb-2","d-flex","gap-2","justify-content-center","align-items-center",3,"click"],["height","30","src","assets/images/uploader.png"],[1,"font-14","mb-0"],[3,"remove","data","removeFile",4,"ngIf"],["type","file","hidden","",3,"change"],["fileRef",""],[1,"input-group"],["type","text","formControlName","chequeDate","placeholder","Select Date","bsDatepicker","",1,"form-control","custom-input-field",3,"bsConfig"],["drp","bsDatepicker"],[1,"input-group-text","cursor-pointer",3,"click"],["src","/assets/images/calendar.png","alt","",1,"calender"],["placeholder","Reason Type","bindLabel","chequeActionReason","bindValue","actionReasonID","formControlName","reasonId",3,"items"],["formControlName","note",1,"form-control","custom-input-field",3,"appMaxCharacters"],[3,"remove","data","removeFile"],["class","text-danger",4,"ngIf"],[1,"text-danger"],["type","button","disabled","",1,"btn","btn-save","btn-load"],[3,"icon","spin"]],template:function(t,n){1&t&&(e.YNc(0,Kn,55,9,"div",0),e.YNc(1,Wn,1,0,"app-loading",1)),2&t&&(e.Q6J("ngIf",!n.isLoading),e.xp6(1),e.Q6J("ngIf",n.isLoading))},dependencies:[p.sg,p.O5,u._Y,u.Fj,u.JJ,u.JL,u.sg,u.u,u.x0,u.CE,fe.BN,J.w9,q.Np,q.Y5,ie.N,k,j,p.JJ,p.uU],styles:[".grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:.7fr 1.5fr repeat(5,1fr);gap:10px}"]}),i})(),Xn=(()=>{class i{constructor(t){this.apiService=t,this.permissions=[],this.apiService.getPermissions(17004).subscribe(n=>{n.isSuccess&&(this.permissions=n.data)})}checkPermission(t,n,o){if(this.permissions){const l=this.permissions.find(c=>c.permissionCatId===t);if(!l)return!1;const s=l.permissionSubCategories.find(c=>c.permissionSubCatId===n);if(!s)return!1;const r=s.permissionItems.find(c=>c.permissionItemId===o);return!!r&&r.selected}return!1}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(Z))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var ei=h(1265),be=h(1785),qe=h(8219),ve=h(9973),Te=h(5746);const De=function(){return{containerClass:"theme-red",isAnimated:!0,showClearButton:!0}};function ti(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",11)(1,"button",55)(2,"input",56),e.NdJ("bsValueChange",function(o){e.CHM(t);const l=e.oxw();return e.KtG(l.onDateValueChange(o))}),e.qZA(),e.TgZ(3,"i",57),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.removeCollectionDateFilter())}),e.qZA()()()}2&i&&(e.xp6(2),e.Q6J("bsConfig",e.DdM(1,De)))}function ni(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",11)(1,"button",55)(2,"input",58),e.NdJ("bsValueChange",function(o){e.CHM(t);const l=e.oxw();return e.KtG(l.onDueDateValueChange(o))}),e.qZA(),e.TgZ(3,"i",57),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.removeDueCollectionDateFilter())}),e.qZA()()()}2&i&&(e.xp6(2),e.Q6J("bsConfig",e.DdM(1,De)))}function ii(i,a){1&i&&(e.TgZ(0,"span"),e._uU(1,"All"),e.qZA())}function oi(i,a){if(1&i&&(e.TgZ(0,"div",65),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.xp6(1),e.hij(" ",t+","," ")}}function ai(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"a",15)(1,"input",66),e.NdJ("change",function(o){const s=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.applybank(s,o))}),e.qZA(),e._uU(2),e.qZA()}if(2&i){const t=a.$implicit;e.xp6(1),e.Q6J("value",t.id),e.xp6(1),e.hij(" \xa0 ",null==t||null==t.name?null:t.name[0].lookupName," ")}}function li(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",11)(1,"button",59),e._uU(2," Cheque Bank : "),e.YNc(3,ii,2,0,"span",60),e.YNc(4,oi,2,1,"div",61),e._UZ(5,"i",62),e.TgZ(6,"i",57),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.removebankFilter())}),e.qZA()(),e.TgZ(7,"ul",63)(8,"li"),e.YNc(9,ai,3,2,"a",64),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(3),e.Q6J("ngIf",0==t.newDropdownbank.length),e.xp6(1),e.Q6J("ngForOf",t.newDropdownbank),e.xp6(5),e.Q6J("ngForOf",t.banksList)}}function si(i,a){if(1&i&&e._uU(0),2&i){const t=a.item;e.hij(" ",(null==t?null:t.accountName)+"-"+(null==t?null:t.bankNameEnglish)+"-"+(null==t?null:t.accountNumber)," ")}}function ri(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",11)(1,"div",67)(2,"ng-select",68),e.NdJ("ngModelChange",function(o){e.CHM(t);const l=e.oxw();return e.KtG(l.markaziaModel=o)})("change",function(o){e.CHM(t);const l=e.oxw();return e.KtG(l.handleMarkaziaBankChange(o))}),e.YNc(3,si,1,1,"ng-template",69),e.qZA(),e.TgZ(4,"i",57),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.removeMarkaziaBank())}),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("items",t.markaziaBankList)("multiple",!0)("ngModel",t.markaziaModel)("closeOnSelect",!1)}}function ci(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",11)(1,"button",55)(2,"input",70),e.NdJ("input",function(o){e.CHM(t);const l=e.oxw();return e.KtG(l.inputvalue(o))}),e.qZA(),e.TgZ(3,"i",57),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.removeAmount())}),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("formControl",t.displayAmount)}}function ui(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"input",72),e.NdJ("ngModelChange",function(o){e.CHM(t);const l=e.oxw().row;return e.KtG(l.checked=o)})("click",function(o){e.CHM(t);const l=e.oxw().row,s=e.oxw();return e.KtG(s.getSelectedItem(l,o))}),e.qZA()}if(2&i){const t=e.oxw().row;e.s9C("value",t),e.Q6J("ngModel",t.checked)}}function di(i,a){if(1&i&&e.YNc(0,ui,1,2,"input",71),2&i){const t=e.oxw();e.Q6J("ngIf",t.showMultiSelect)}}function pi(i,a){if(1&i&&e._uU(0),2&i){const t=a.row;e.hij(" ",null==t?null:t.chequeNo," ")}}function _i(i,a){if(1&i&&e._uU(0),2&i){const t=a.row;e.hij(" ",null==t.customer?null:t.customer.customerName," ")}}function hi(i,a){1&i&&e._uU(0),2&i&&e.hij(" ",a.row.bank," ")}function gi(i,a){1&i&&(e._uU(0),e.ALo(1,"number")),2&i&&e.hij(" ",e.xi3(1,1,a.row.collectedAmount,"1.3-3")," JOD ")}function mi(i,a){1&i&&(e._uU(0),e.ALo(1,"number")),2&i&&e.hij(" ",e.xi3(1,1,a.row.chequeCollectionJod,"1.3-3")," ")}function fi(i,a){if(1&i&&(e.TgZ(0,"div",73)(1,"span"),e._uU(2),e.qZA(),e.TgZ(3,"small",74),e._uU(4),e.qZA()()),2&i){const t=a.row;e.xp6(2),e.Oqu(null==t||null==t.currency[0]?null:t.currency[0].lookupName),e.xp6(2),e.hij("Ex. Rate ",null==t||null==t.currency[0]?null:t.currency[0].currencyRate,"")}}function Ci(i,a){1&i&&(e._uU(0),e.ALo(1,"date")),2&i&&e.hij(" ",e.xi3(1,1,a.row.chequeDate,"dd MMM yyyy")," ")}function xi(i,a){1&i&&(e._uU(0),e.ALo(1,"date")),2&i&&e.hij(" ",e.xi3(1,1,a.row.collectedAt,"dd MMM yyyy")," ")}function bi(i,a){if(1&i&&(e.TgZ(0,"div",73)(1,"span"),e._uU(2),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.qZA(),e.TgZ(5,"span"),e._uU(6),e.qZA()()),2&i){const t=a.row;e.xp6(2),e.Oqu(null==t||null==t.account?null:t.account.bankNameEnglish),e.xp6(2),e.Oqu(null==t||null==t.account?null:t.account.bankNameArabic),e.xp6(2),e.Oqu(null==t||null==t.account?null:t.account.accountNumber)}}function qi(i,a){if(1&i&&(e.TgZ(0,"p",75),e._uU(1),e.qZA()),2&i){const t=a.row;e.Udp("color",null==t||null==t.statusObj?null:t.statusObj.lookupTextColor)("background-color",null==t||null==t.statusObj?null:t.statusObj.lookupBGColor),e.xp6(1),e.hij(" ",null==t||null==t.statusObj||null==t.statusObj.translations?null:t.statusObj.translations[0].lookupName," ")}}function vi(i,a){1&i&&(e.ynx(0),e.TgZ(1,"span",81),e._UZ(2,"i",82),e.qZA(),e.BQk())}function Ti(i,a){1&i&&(e.ynx(0),e.TgZ(1,"span",81),e._UZ(2,"i",82),e.qZA(),e.BQk())}function Di(i,a){1&i&&(e.ynx(0),e.TgZ(1,"span",81),e._UZ(2,"i",82),e.qZA(),e.BQk())}const N=function(i){return[i]};function Zi(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"a",83),e._UZ(2,"i",84),e.qZA(),e.BQk()),2&i){const t=e.oxw(2).row;e.xp6(1),e.Q6J("routerLink",e.VKq(1,N,"/deposit-cheque/detail/"+t.id))}}function Ai(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"a",83),e._UZ(2,"i",84),e.qZA(),e.BQk()),2&i){const t=e.oxw(2).row;e.xp6(1),e.Q6J("routerLink",e.VKq(1,N,"/deposit-cheque/detail/"+t.id))}}function yi(i,a){if(1&i&&(e.ynx(0)(1,77),e.YNc(2,vi,3,0,"ng-container",78),e.YNc(3,Ti,3,0,"ng-container",78),e.YNc(4,Di,3,0,"ng-container",78),e.YNc(5,Zi,3,3,"ng-container",78),e.YNc(6,Ai,3,3,"ng-container",79),e.BQk()()),2&i){const t=e.oxw().row,n=e.oxw();e.xp6(1),e.Q6J("ngSwitch",null==t||null==t.statusObj?null:t.statusObj.lookupId),e.xp6(1),e.Q6J("ngSwitchCase",n.chequeStatusEnum.Deposited),e.xp6(1),e.Q6J("ngSwitchCase",n.chequeStatusEnum.ReDeposited),e.xp6(1),e.Q6J("ngSwitchCase",n.chequeStatusEnum.Postponed),e.xp6(1),e.Q6J("ngSwitchCase",n.chequeStatusEnum.Withdrawn)}}function wi(i,a){1&i&&(e.ynx(0),e.TgZ(1,"span",81),e._UZ(2,"i",82),e.qZA(),e.BQk())}function ki(i,a){1&i&&(e.ynx(0),e.TgZ(1,"span",81),e._UZ(2,"i",82),e.qZA(),e.BQk())}function Ni(i,a){1&i&&(e.ynx(0),e.TgZ(1,"span",81),e._UZ(2,"i",82),e.qZA(),e.BQk())}function Ii(i,a){1&i&&(e.ynx(0),e.TgZ(1,"span",81),e._UZ(2,"i",82),e.qZA(),e.BQk())}function Ui(i,a){1&i&&(e.ynx(0),e.TgZ(1,"span",81),e._UZ(2,"i",82),e.qZA(),e.BQk())}function Mi(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"a",83),e._UZ(2,"i",84),e.qZA(),e.BQk()),2&i){const t=e.oxw(2).row;e.xp6(1),e.Q6J("routerLink",e.VKq(1,N,"/deposit-cheque/detail/"+t.id))}}function Ji(i,a){if(1&i&&(e.ynx(0)(1,77),e.YNc(2,wi,3,0,"ng-container",78),e.YNc(3,ki,3,0,"ng-container",78),e.YNc(4,Ni,3,0,"ng-container",78),e.YNc(5,Ii,3,0,"ng-container",78),e.YNc(6,Ui,3,0,"ng-container",78),e.YNc(7,Mi,3,3,"ng-container",79),e.BQk()()),2&i){const t=e.oxw().row,n=e.oxw();e.xp6(1),e.Q6J("ngSwitch",null==t||null==t.statusObj?null:t.statusObj.lookupId),e.xp6(1),e.Q6J("ngSwitchCase",n.chequeStatusEnum.Deposited),e.xp6(1),e.Q6J("ngSwitchCase",n.chequeStatusEnum.ReDeposited),e.xp6(1),e.Q6J("ngSwitchCase",n.chequeStatusEnum.Bounced),e.xp6(1),e.Q6J("ngSwitchCase",n.chequeStatusEnum.Postponed),e.xp6(1),e.Q6J("ngSwitchCase",n.chequeStatusEnum.Withdrawn)}}function Si(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"a",83),e._UZ(2,"i",84),e.qZA(),e.BQk()),2&i){const t=e.oxw().row;e.xp6(1),e.Q6J("routerLink",e.VKq(1,N,"/deposit-cheque/detail/"+t.id))}}function Qi(i,a){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",85),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2).row,l=e.oxw();return e.KtG(l.depositDetail(29003,o))}),e._uU(2,"Replace"),e.qZA(),e.TgZ(3,"button",85),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2).row,l=e.oxw();return e.KtG(l.depositDetail(29011,o))}),e._uU(4,"Postpone"),e.qZA(),e.TgZ(5,"button",85),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2).row,l=e.oxw();return e.KtG(l.depositDetail(29002,o))}),e._uU(6,"Withdraw"),e.qZA(),e.BQk()}}function Oi(i,a){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",85),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2).row,l=e.oxw();return e.KtG(l.depositDetail(29006,o))}),e._uU(2,"Collect"),e.qZA(),e.TgZ(3,"button",85),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2).row,l=e.oxw();return e.KtG(l.depositDetail(29001,o))}),e._uU(4,"Bounce"),e.qZA(),e.BQk()}}function Fi(i,a){if(1&i&&(e.ynx(0)(1,77),e.YNc(2,Qi,7,0,"ng-container",78),e.YNc(3,Oi,5,0,"ng-container",78),e.BQk()()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngSwitch",null==t.userDetails||null==t.userDetails.role?null:t.userDetails.role.roleId),e.xp6(1),e.Q6J("ngSwitchCase",47),e.xp6(1),e.Q6J("ngSwitchCase",46)}}function Ri(i,a){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",85),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2).row,l=e.oxw();return e.KtG(l.depositDetail(29003,o))}),e._uU(2,"Replace"),e.qZA(),e.TgZ(3,"button",85),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2).row,l=e.oxw();return e.KtG(l.depositDetail(29011,o))}),e._uU(4,"Postpone"),e.qZA(),e.TgZ(5,"button",85),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2).row,l=e.oxw();return e.KtG(l.depositDetail(29002,o))}),e._uU(6,"Withdraw"),e.qZA(),e.BQk()}}function Li(i,a){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",85),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2).row,l=e.oxw();return e.KtG(l.depositDetail(29006,o))}),e._uU(2,"Collect"),e.qZA(),e.TgZ(3,"button",85),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2).row,l=e.oxw();return e.KtG(l.depositDetail(29001,o))}),e._uU(4,"Bounce"),e.qZA(),e.BQk()}}function Pi(i,a){if(1&i&&(e.ynx(0)(1,77),e.YNc(2,Ri,7,0,"ng-container",78),e.YNc(3,Li,5,0,"ng-container",78),e.BQk()()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngSwitch",null==t.userDetails||null==t.userDetails.role?null:t.userDetails.role.roleId),e.xp6(1),e.Q6J("ngSwitchCase",47),e.xp6(1),e.Q6J("ngSwitchCase",46)}}function Yi(i,a){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",85),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2).row,l=e.oxw();return e.KtG(l.depositDetail(29003,o))}),e._uU(2,"Replace"),e.qZA(),e.TgZ(3,"button",85),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2).row,l=e.oxw();return e.KtG(l.depositDetail(29004,o))}),e._uU(4,"Re-Deposit"),e.qZA(),e.TgZ(5,"button",85),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2).row,l=e.oxw();return e.KtG(l.depositDetail(29017,o))}),e._uU(6,"Pay In Cash"),e.qZA(),e.BQk()}}function Bi(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"a",86),e._UZ(2,"i",87),e._uU(3," View"),e.qZA(),e.BQk()),2&i){const t=e.oxw(2).row;e.xp6(1),e.Q6J("routerLink",e.VKq(1,N,"/deposit-cheque/detail/"+t.id))}}function Ei(i,a){if(1&i&&(e.ynx(0)(1,77),e.YNc(2,Yi,7,0,"ng-container",78),e.YNc(3,Bi,4,3,"ng-container",78),e.BQk()()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngSwitch",null==t.userDetails||null==t.userDetails.role?null:t.userDetails.role.roleId),e.xp6(1),e.Q6J("ngSwitchCase",47),e.xp6(1),e.Q6J("ngSwitchCase",46)}}function ji(i,a){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",85),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2).row,l=e.oxw();return e.KtG(l.depositDetail(29003,o))}),e._uU(2,"Replace"),e.qZA(),e.TgZ(3,"button",85),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2).row,l=e.oxw();return e.KtG(l.depositDetail(29002,o))}),e._uU(4,"Withdraw"),e.qZA(),e.BQk()}}function Vi(i,a){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",85),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2).row,l=e.oxw();return e.KtG(l.depositDetail(29006,o))}),e._uU(2,"Collect"),e.qZA(),e.TgZ(3,"button",85),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2).row,l=e.oxw();return e.KtG(l.depositDetail(29001,o))}),e._uU(4,"Bounce"),e.qZA(),e.BQk()}}function Gi(i,a){if(1&i&&(e.ynx(0)(1,77),e.YNc(2,ji,5,0,"ng-container",78),e.YNc(3,Vi,5,0,"ng-container",78),e.BQk()()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngSwitch",null==t.userDetails||null==t.userDetails.role?null:t.userDetails.role.roleId),e.xp6(1),e.Q6J("ngSwitchCase",47),e.xp6(1),e.Q6J("ngSwitchCase",46)}}function Hi(i,a){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",85),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2).row,l=e.oxw();return e.KtG(l.depositDetail(null==o?null:o.nextAllowedActionId,o))}),e._uU(2),e.qZA(),e.BQk()}if(2&i){const t=e.oxw(2).row;e.xp6(2),e.Oqu(null==t||null==t.nextAllowedAction[0]?null:t.nextAllowedAction[0].lookupName)}}function zi(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"a",86),e._UZ(2,"i",87),e._uU(3," View"),e.qZA(),e.BQk()),2&i){const t=e.oxw(2).row;e.xp6(1),e.Q6J("routerLink",e.VKq(1,N,"/deposit-cheque/detail/"+t.id))}}function $i(i,a){if(1&i&&(e.ynx(0)(1,77),e.YNc(2,Hi,3,1,"ng-container",78),e.YNc(3,zi,4,3,"ng-container",78),e.BQk()()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngSwitch",null==t.userDetails||null==t.userDetails.role?null:t.userDetails.role.roleId),e.xp6(1),e.Q6J("ngSwitchCase",47),e.xp6(1),e.Q6J("ngSwitchCase",46)}}function Ki(i,a){1&i&&e.GkF(0)}function Wi(i,a){if(1&i&&(e.TgZ(0,"div",76),e.ynx(1,77),e.YNc(2,yi,7,5,"ng-container",78),e.YNc(3,Ji,8,6,"ng-container",78),e.YNc(4,Si,3,3,"ng-container",79),e.BQk(),e.TgZ(5,"div",80),e.ynx(6,77),e.YNc(7,Fi,4,3,"ng-container",78),e.YNc(8,Pi,4,3,"ng-container",78),e.YNc(9,Ei,4,3,"ng-container",78),e.YNc(10,Gi,4,3,"ng-container",78),e.YNc(11,$i,4,3,"ng-container",78),e.YNc(12,Ki,1,0,"ng-container",79),e.BQk(),e.qZA()()),2&i){const t=a.row,n=e.oxw();e.xp6(1),e.Q6J("ngSwitch",null==n.userDetails||null==n.userDetails.role?null:n.userDetails.role.roleId),e.xp6(1),e.Q6J("ngSwitchCase",46),e.xp6(1),e.Q6J("ngSwitchCase",47),e.xp6(3),e.Q6J("ngSwitch",null==t||null==t.statusObj?null:t.statusObj.lookupId),e.xp6(1),e.Q6J("ngSwitchCase",n.chequeStatusEnum.Deposited),e.xp6(1),e.Q6J("ngSwitchCase",n.chequeStatusEnum.ReDeposited),e.xp6(1),e.Q6J("ngSwitchCase",n.chequeStatusEnum.Bounced),e.xp6(1),e.Q6J("ngSwitchCase",n.chequeStatusEnum.Postponed),e.xp6(1),e.Q6J("ngSwitchCase",n.chequeStatusEnum.Withdrawn)}}function Xi(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",88)(1,"button",89),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.multi())}),e._uU(2," Close "),e.qZA()()}}let eo=(()=>{class i{constructor(t,n,o,l,s,r,c,d,_){this.modalService=t,this.depositservice=n,this.permission=o,this._datePipe=l,this._authService=s,this.creditcardservice=r,this._router=c,this._helperService=d,this._excelService=_,this.searchText=new u.NI(null),this.searchChequeText=new u.NI(null),this.statusIdControl=new u.NI(null),this.chequeType=new u.NI(""),this.loading=!1,this.page=1,this.total=0,this.limit=6,this.sort=1,this.tableConfig={paging:!0,filter:{Sort:1,PageSize:this.limit}},this.search=new u.NI(null),this.tableColumns=[],this.deposites=[],this.totalAllRecordsCount=0,this.unsubscribe=new R.x,this.actionList=[],this.markaziaModel=[],this.showMultiSelect=!1,this.pendingChequesActions=[28008,28009,28010,28011],this.chequeStatusEnum=b,this.chequeActionEnum=f,this.selecteddata=[],this.bank=!1,this.amount=!1,this.displayAmount=new u.NI(0),this.collectionDate=!1,this.dueDate=!1,this.markaziaBank=!1,this.markaziaBankList=[],this.newDropdownbank=[],this.dropDownbankId=[]}ngOnInit(){let t=JSON.parse(localStorage.getItem("chequeFilters"));t?.searchChequeText&&(this.searchChequeText.setValue(t?.searchChequeText),this.tableConfig.filter.ChequeNo=t?.searchChequeText),t?.searchText&&(this.searchText.setValue(t?.searchText),this.tableConfig.filter.Customer=t?.searchText),t?.statusIdControl&&(this.statusIdControl.setValue(t?.statusIdControl),this.tableConfig.filter.Status=t?.statusIdControl),t?.chequeType&&(this.chequeType.setValue(t?.chequeType),this.tableConfig.filter.IsPDC=t?.chequeType),localStorage.removeItem("chequeFilters"),this.getbanks(),this.initTableColumns(),this.fetchData(),this.getUserDetails(),this.searchChequeText.valueChanges.pipe((0,L.b)(300),(0,P.x)(),(0,Y.R)(this.unsubscribe)).subscribe(n=>{const o=n||"";(o?.length>=3||!o?.length&&this.tableConfig.filter.ChequeNo?.length)&&(this.tableConfig.filter.ChequeNo=o,this.page=1,this.selecteddata=[],this.fetchData())}),this.searchText.valueChanges.pipe((0,L.b)(300),(0,P.x)(),(0,Y.R)(this.unsubscribe)).subscribe(n=>{const o=n||"";(o?.length>=3||!o?.length&&this.tableConfig.filter.Customer?.length)&&(this.tableConfig.filter.Customer=o,this.selecteddata=[],this.page=1,this.fetchData())})}getChequesForExport(){this.loading=!0,this.tableConfig.filter.PageNo=this.page-1,this.tableConfig.filter.PageSize=1e4,this.depositservice.getDepositCheques(this.tableConfig.filter).subscribe(t=>{t&&(this.tableConfig.filter.PageSize=this.limit,this.generateExcelExport(t.data))}).add(()=>this.loading=!1)}generateExcelExport(t){var n=this;return(0,X.Z)(function*(){const o={fileName:"Cheques_List",mainHeading:"",sections:[{heading:[],headerStyle:{bold:!0,size:12,color:{argb:"ff000000"},fgColor:{argb:"ffe7e6e6"}},headers:["Cheque No","Customer Account","Customer Name","Cheque Bank","Due Date","Amount","Currency","Amount (JOD)","Collection Date","Markazia Bank Account","Status"],mainKeyMapping:["chequeNo","customer.customerId","customer.customerName","bank","chequeDate","collectedAmount","currency[0].lookupName","chequeCollectionJod","collectedAt","markaziaBA","statusObj.translations[0].lookupName"],data:t=t.map(s=>({...s,chequeDate:n._helperService.dateFormate(s?.chequeDate),collectedAt:n._helperService.dateFormate(s?.collectedAt),markaziaBA:`${s?.account?.bankNameEnglish}-${s?.account?.bankNameArabic}-${s?.account?.accountNumber}`}))}]};yield n._excelService.exportToExcelJs1(o)})()}getUserDetails(){this._authService.getLoggedUserDetails().subscribe(t=>{this.userDetails=t?.data})}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete(),this._router.url.includes("/deposit-cheque/detail")&&localStorage.setItem("chequeFilters",JSON.stringify({searchChequeText:this.searchChequeText.value,searchText:this.searchText.value,statusIdControl:this.statusIdControl.value,chequeType:this.chequeType.value}))}fetchData(){this.loading=!0,this.tableConfig.filter.PageNo=this.page-1,this.depositservice.getDepositCheques(this.tableConfig.filter).subscribe(t=>{t&&(this.makeListData(t.data||[]),this.selecteddata.length>0&&this.deposites.forEach(n=>{this.selecteddata.find(l=>l.id==n.id)&&(n.checked=!0)}),this.totalAllRecordsCount=t?.totalRecordCount,this.total=t?.totalRecordCount)}).add(()=>this.loading=!1)}makeListData(t){const n=t.map(o=>{let l=o.statusObj?.translations?.[0]?.lookupName,s=this._datePipe.transform(o.chequeDate,"yyyy-MM-dd");const r=this.isDateWithinFiveDays(s)&&"Collected"!=l&&"Withdrawn"!=l&&"Replaced"!=l;return{...o,isCollectedInPast:r}});this.deposites=n}isDateWithinFiveDays(t){const n=new Date,o=new Date(t);return o.setDate(o.getDate()+5),n>=o}onSortChange(t){if(t?.direction&&t?.column)switch(t.column){case"chequeNo":this.tableConfig.filter.Sort="desc"===t.direction?3:2;break;case"customerName":this.tableConfig.filter.Sort="desc"===t.direction?5:4;break;case"bank":this.tableConfig.filter.Sort="desc"===t.direction?7:6;break;case"chequeDate":this.tableConfig.filter.Sort="desc"===t.direction?9:8;break;case"chequeCollectionJod":this.tableConfig.filter.Sort="desc"===t.direction?11:10;break;case"collectedAt":this.tableConfig.filter.Sort="desc"===t.direction?13:12;break;case"status":this.tableConfig.filter.Sort="desc"===t.direction?15:14}else this.tableConfig.filter.Sort=1;this.fetchData()}onPageChange(t){this.page=t,this.fetchData()}initTableColumns(){this.tableColumns=[{key:"select",label:"Select All",canSort:!0},{key:"chequeNo",label:"Cheque No",canSort:!0},{key:"customer.customerId",label:"Customer Account"},{key:"customerName",label:"Customer Name",canSort:!0},{key:"bank",label:"Cheque Bank",canSort:!0},{key:"chequeDate",label:"Due Date",canSort:!0},{key:"collectedAmount",label:"Amount",canSort:!0},{key:"currency",label:"Currency"},{key:"chequeCollectionJod",label:"Amount (JOD)"},{key:"collectedAt",label:"Collection Date",canSort:!0},{key:"markaziaBA",label:"Markazia Bank Account"},{key:"status",label:"Status",canSort:!0},{key:"action",label:"Action"}]}getStatusLabel(t){return t&&t.name&&t.name.length>0?t.name[0].lookupName:""}onSelectData(t){}getSelectedItem(t,n){if(0==this.selecteddata.length&&n.target.checked)this.sort=1,this.page=1,this.tableConfig.filter.Status!=t.status?(this.selecteddata.push(t),this.tableConfig.filter.Status=t.status,this.fetchData()):this.selecteddata.push(t);else if(n.target.checked)this.selecteddata.push(t);else{const o=this.selecteddata.findIndex(l=>this.areObjectsEqual(l,t));-1!==o&&this.selecteddata.splice(o,1)}}areObjectsEqual(t,n){return JSON.stringify(t)===JSON.stringify(n)}multiSelect(){this.showMultiSelect=!this.showMultiSelect,this.showMultiSelect||(delete this.tableConfig.filter.Status,this.selecteddata=[],this.fetchData())}removeSearch(){this.searchText.setValue(null),this.sort=1,this.selecteddata=[],this.page=1,delete this.tableConfig.filter.Customer,this.fetchData()}removeChequeSearch(){this.searchChequeText.setValue(null),this.sort=1,this.page=1,this.selecteddata=[],delete this.tableConfig.filter.ChequeNo,this.fetchData()}handleCategoryChange(t){this.tableConfig.filter.Status=t.id,this.sort=1,this.page=1,this.selecteddata=[],this.fetchData()}onClear(){delete this.tableConfig.filter.Status,this.selecteddata=[],this.page=1,this.fetchData()}filterbank(t){this.bank=t.checked}filteramount(t){this.amount=t.checked}filterMarkaziaBank(t){this.markaziaBank=t.checked,this.creditcardservice.getBankAccounts("pageSize=1000&status=2001").subscribe(n=>{this.markaziaBankList=n.data})}filterCollectionDates(t){this.collectionDate=t.checked}filterDueDates(t){this.dueDate=t.checked}inputvalue(t){let n=!1;const o=t?.target?.value;if(o&&o.includes(".")){const l=o.split(".");n=2===l.length&&l[1].length>0?"0.0"===o||"0.00"===o:2===l.length&&0===l[1].length}!n&&parseFloat(o)>0?(this.tableConfig.filter.Amount=parseFloat(o).toFixed(3),this.displayAmount.patchValue(parseFloat(parseFloat(o).toFixed(3))),this.page=1,this.selecteddata=[],this.sort=1,this.fetchData()):(o.includes("-")||isNaN(parseFloat(o))||0==parseFloat(o)&&!n)&&this.displayAmount.patchValue(0)}getbanks(){const t=this.depositservice.getBankLookups(11),n=this.depositservice.getLookups("","lookupTypeId=28&pageSize=1000"),o=this.depositservice.getLookups("","lookupTypeId=29&pageSize=1000");(0,B.D)([t,n,o]).subscribe(([l,s,r])=>{this.banksList=l.data||[],this.statusId=s.data||[],this.actionList=r.data||[]},l=>{console.error(l)},()=>{this.loading=!1})}depositDetail(t,n){let o=this.actionList.find(l=>l.id==t);29002==o?.id?this.openModalTrigger(o,n,"Withdraw Cheque",!0,!0):29001==o?.id?this.openModalTrigger(o,n,"Bounce Cheque",!0,!0):29004==o?.id?this.openModalTrigger(o,n,"Re-deposited Cheque",!0,!0):29006==o?.id?this.openModalTrigger(o,n,"Collect Cheque",!0,!0):o?.id==f.PaidInCash?this.openModalTrigger(o,n,"Pay In Cash",!0,!0):29003==o?.id||o?.id==f.Postpone?this.replace(o,n):"replace-view"==o?.name?.[0].lookupName&&this.replaceView()}openModalTrigger(t,n,o,l,s){let r=[];this.showMultiSelect?this.selecteddata.forEach(d=>{const _=this.deposites.find(m=>m.id===d.id);r.push(_)}):r=[n];const c=this.modalService.open(me,{backdrop:"static",keyboard:!1,size:"xl"});c.componentInstance.details=r,c.componentInstance.title=o,c.componentInstance.isConfirmShow=l,c.componentInstance.detailShow=s,c.componentInstance.actionType=t,c.componentInstance.sendtoLoadData.subscribe(d=>{d&&(this.showMultiSelect?this.multiSelect():this.fetchData()),c.dismiss()})}replace(t,n){let o=[];this.showMultiSelect?this.selecteddata.forEach(r=>{const c=this.deposites.find(d=>d.id===r.id);o.push(c)}):o=[n];const s=this.modalService.open(29003==t.id&&ae||xe,{backdrop:"static",keyboard:!1,size:"xl",windowClass:"custom-modal-popup"});s.componentInstance.details=o,s.componentInstance.actionType=t,s.componentInstance.sendtoLoadData.subscribe(r=>{r&&this.multiSelect(),s.dismiss()})}replaceView(){this.modalService.open(le,{backdrop:"static",keyboard:!1,size:"xl"}).componentInstance.sendtoLoadData.subscribe(n=>{console.log("resendtoLoadDatasult",n),this.modalService.dismissAll()})}removebankFilter(){this.newDropdownbank=[],this.dropDownbankId=[],delete this.tableConfig.filter.BankId,this.bank=!1,this.page=1,this.selecteddata=[],this.sort=1,this.fetchData()}removeCollectionDateFilter(){this.collectionDate=!1,delete this.tableConfig.filter.FromDate,delete this.tableConfig.filter.ToDate,this.selecteddata=[],this.page=1,this.sort=1,this.fetchData()}removeDueCollectionDateFilter(){this.dueDate=!1,delete this.tableConfig.filter.FromDueDate,delete this.tableConfig.filter.ToDueDate,this.selecteddata=[],this.page=1,this.sort=1,this.fetchData()}removeAmount(){this.displayAmount.patchValue(0),this.amount=!1,delete this.tableConfig.filter.Amount,this.page=1,this.selecteddata=[],this.sort=1,this.fetchData()}applybank(t,n){const o=t.name?.[0].lookupName,l=t.id;n.target.checked?(this.newDropdownbank.push(o),this.dropDownbankId.push(l)):(this.newDropdownbank=this.newDropdownbank.filter(s=>s!==o),this.dropDownbankId=this.dropDownbankId.filter(s=>s!==l)),this.tableConfig.filter.BankId=this.dropDownbankId,this.selecteddata=[],this.page=1,this.fetchData()}handleMarkaziaBankChange(t){this.tableConfig.filter.accountId=t?.map(n=>n.accountId).toString()||"",this.selecteddata=[],this.page=1,this.sort=1,this.fetchData()}removeMarkaziaBank(){this.markaziaModel=[],delete this.tableConfig.filter.accountId,this.markaziaBank=!1,this.page=1,this.sort=1,this.selecteddata=[],this.fetchData()}onDateValueChange(t){var n=new p.uU("en-US");let o=n.transform(t[0])||"",l=n.transform(t[1])||"";this.tableConfig.filter.FromDate=o,this.tableConfig.filter.ToDate=l,this.selecteddata=[],this.page=1,this.sort=1,this.fetchData()}onDueDateValueChange(t){var n=new p.uU("en-US");let o=n.transform(t[0])||"",l=n.transform(t[1])||"";if(o){const s=new Date(o);s.setDate(s.getDate()+1);const r=s.toISOString();this.tableConfig.filter.FromDueDate=r}else this.tableConfig.filter.FromDueDate=o;if(l){const s=new Date(l);s.setDate(s.getDate()+1);const r=s.toISOString();this.tableConfig.filter.ToDueDate=r}else this.tableConfig.filter.ToDueDate=l;this.selecteddata=[],this.page=1,this.sort=1,this.fetchData()}IsPDCFilter(t){this.tableConfig.filter.IsPDC=t,this.selecteddata=[],this.page=1,this.sort=1,this.fetchData()}canPerformAction(t,n,o){return this.permission.checkPermission(t,n,o)}multi(){this.showMultiSelect=!1,this.selecteddata=[],this.page=1,this.sort=1,delete this.tableConfig.filter.Status,this.fetchData()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(x.FF),e.Y36(Z),e.Y36(Xn),e.Y36(p.uU),e.Y36(te.e),e.Y36(ei.$),e.Y36(y.F0),e.Y36(be.W),e.Y36(qe.x))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-cheque-list"]],features:[e._Bn([p.uU])],decls:100,vars:32,consts:[[1,"card-page"],[1,"row"],[1,"col-md-2"],[1,"input-group","search-box"],["type","button","id","button-addon1",1,"btn",3,"click"],[1,"fa-solid","fa-search"],["type","text","numbersOnly","","placeholder","Search By Cheque No",1,"form-control",3,"formControl"],["type","button","id","button-addon1",1,"btn",3,"hidden","click"],[1,"fa-solid","fa-xmark"],["type","text","placeholder","Search By Customer Name",1,"form-control",3,"formControl"],["placeholder","Search By Status","bindLabel","description","bindValue","id",1,"flex-grow-1","mt-3","mt-md-0",3,"items","formControl","clear","change"],[1,"dropdown"],["type","button","id","dropdownMenuButton","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","dropdownButton","more-filter-drop"],[1,"fa-regular","fa-plus"],["aria-labelledby","dropdownMenuButton",1,"dropdown-menu","menu"],[1,"dropdown-item"],["type","checkbox",1,"checkBox",3,"ngModel","ngModelChange","change"],[1,"col-md-4","d-flex","justify-content-end","gap-2","align-items-center"],[1,"btn","btn-add",3,"click"],["type","button",1,"btn","btn-success","cp","btn-lg","font-16",3,"click"],[1,"fas","fa-file-excel","me-2"],[1,"deposited-cheques-list-tabs"],[1,"col-lg-7"],[1,"col-lg-4"],[1,"col-lg-8"],["role","group","aria-label","Basic example",1,"btn-group"],["type","button",1,"btn","btn-light"],[1,"form-check"],["type","radio","name","exampleRadios","id","exampleRadios1","value","","checked","",1,"form-check-input",3,"formControl","click"],["for","exampleRadios1",1,"form-check-label"],["type","radio","name","exampleRadios","id","exampleRadios2","value","true",1,"form-check-input",3,"formControl","click"],["for","exampleRadios2",1,"form-check-label"],["type","radio","name","exampleRadios","id","exampleRadios3","value","false",1,"form-check-input",3,"formControl","click"],["for","exampleRadios3",1,"form-check-label"],[1,"col-lg-4","offset-1"],[1,"col-lg-6"],[1,"col-lg-6","d-flex","justify-content-end"],[1,"filterFlex","mt-2"],["class","dropdown",4,"ngIf"],[1,"row","mt-2"],[1,"col-md-12"],[2,"cursor","pointer",3,"showMultiSelect","config","columns","selecteddata","link","data","loading","page","total","limit","selectedData","sortUpdated","pageUpdated"],["libTableAdvancedColumn","select"],["libTableAdvancedColumn","chequeNo"],["libTableAdvancedColumn","customerName"],["libTableAdvancedColumn","bank"],["libTableAdvancedColumn","collectedAmount"],["libTableAdvancedColumn","chequeCollectionJod"],["libTableAdvancedColumn","currency"],["libTableAdvancedColumn","chequeDate"],["libTableAdvancedColumn","collectedAt"],["libTableAdvancedColumn","markaziaBA"],["libTableAdvancedColumn","status"],["libTableAdvancedColumn","action"],["class","btns-group",4,"ngIf"],["type","button",1,"btn","dropdownFilters"],["type","text","placeholder","Select Collection Date","bsDaterangepicker","",1,"form-control",2,"height","46px","border","none",3,"bsConfig","bsValueChange"],[1,"fa-regular","fa-circle-xmark",3,"click"],["type","text","placeholder","Select Due Date","bsDaterangepicker","",1,"form-control",2,"height","46px","border","none",3,"bsConfig","bsValueChange"],["type","button","id","dropdownbank","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","dropdownFilters"],[4,"ngIf"],["class","d-flex",4,"ngFor","ngForOf"],[1,"fa-solid","fa-chevron-down"],["aria-labelledby","dropdownbank",1,"dropdown-menu","menu2"],["class","dropdown-item",4,"ngFor","ngForOf"],[1,"d-flex"],["type","checkbox",1,"checkBox",3,"value","change"],[1,"dropdownFilters","p-1",2,"height","auto"],["placeholder","Markazia Bank","bindLabel","accountName","bindValue","accountId",3,"items","multiple","ngModel","closeOnSelect","ngModelChange","change"],["ng-option-tmp",""],["type","text","placeholder","Enter Amount",1,"form-control",2,"height","46px","border","none",3,"formControl","input"],["type","checkbox",3,"value","ngModel","ngModelChange","click",4,"ngIf"],["type","checkbox",3,"value","ngModel","ngModelChange","click"],[1,"d-flex","flex-column"],[1,"txt-light"],[1,"collected-btn"],["ngbDropdown","","container","body",1,"d-inline-block"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["ngbDropdownMenu","",1,"dropdown-menu-end"],["ngbDropdownToggle","",1,"d-inline-flex","justify-content-center",2,"width","20px"],[1,"fa-solid","fa-ellipsis-v","font-20","cursor-pointer"],[3,"routerLink"],[1,"fa-light","fa-eye"],["ngbDropdownItem","",1,"btn",3,"click"],["ngbDropdownItem","",1,"btn",3,"routerLink"],[1,"me-2","fa-light","fa-eye"],[1,"btns-group"],["type","button",1,"btn","btn-cancel",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),e.NdJ("click",function(){return n.removeSearch()}),e._UZ(5,"i",5),e.qZA(),e._UZ(6,"input",6),e.TgZ(7,"button",7),e.NdJ("click",function(){return n.removeChequeSearch()}),e._UZ(8,"i",8),e.qZA()()(),e.TgZ(9,"div",2)(10,"div",3)(11,"button",4),e.NdJ("click",function(){return n.removeSearch()}),e._UZ(12,"i",5),e.qZA(),e._UZ(13,"input",9),e.TgZ(14,"button",7),e.NdJ("click",function(){return n.removeSearch()}),e._UZ(15,"i",8),e.qZA()()(),e.TgZ(16,"div",2)(17,"ng-select",10),e.NdJ("clear",function(){return n.onClear()})("change",function(l){return n.handleCategoryChange(l)}),e.qZA()(),e.TgZ(18,"div",2)(19,"div",11)(20,"button",12),e._UZ(21,"i",13),e._uU(22," More Filters "),e.qZA(),e.TgZ(23,"ul",14)(24,"li")(25,"a",15)(26,"input",16),e.NdJ("ngModelChange",function(l){return n.collectionDate=l})("change",function(l){return n.filterCollectionDates(l.target)}),e.qZA(),e._uU(27," \xa0 Collection Date "),e.qZA(),e.TgZ(28,"a",15)(29,"input",16),e.NdJ("ngModelChange",function(l){return n.dueDate=l})("change",function(l){return n.filterDueDates(l.target)}),e.qZA(),e._uU(30," \xa0 Due Date "),e.qZA(),e.TgZ(31,"a",15)(32,"input",16),e.NdJ("ngModelChange",function(l){return n.bank=l})("change",function(l){return n.filterbank(l.target)}),e.qZA(),e._uU(33," \xa0 Cheque Bank "),e.qZA(),e.TgZ(34,"a",15)(35,"input",16),e.NdJ("ngModelChange",function(l){return n.amount=l})("change",function(l){return n.filteramount(l.target)}),e.qZA(),e._uU(36," \xa0Amount "),e.qZA(),e.TgZ(37,"a",15)(38,"input",16),e.NdJ("ngModelChange",function(l){return n.markaziaBank=l})("change",function(l){return n.filterMarkaziaBank(l.target)}),e.qZA(),e._uU(39," \xa0Markazia Bank "),e.qZA()()()()(),e.TgZ(40,"div",17)(41,"button",18),e.NdJ("click",function(){return n.multiSelect()}),e._uU(42),e.qZA(),e.TgZ(43,"button",19),e.NdJ("click",function(){return n.getChequesForExport()}),e._UZ(44,"i",20),e._uU(45," Export"),e.qZA()()(),e.TgZ(46,"div",21)(47,"div",1)(48,"div",22)(49,"div",1)(50,"div",23)(51,"h6"),e._uU(52,"Deposited Cheques List"),e.qZA()(),e.TgZ(53,"div",24)(54,"div",25)(55,"button",26)(56,"div",27)(57,"input",28),e.NdJ("click",function(){return n.IsPDCFilter("")}),e.qZA(),e.TgZ(58,"label",29),e._uU(59," All "),e.qZA()()(),e.TgZ(60,"button",26)(61,"div",27)(62,"input",30),e.NdJ("click",function(){return n.IsPDCFilter(!0)}),e.qZA(),e.TgZ(63,"label",31),e._uU(64," PDC Cheques "),e.qZA()()(),e.TgZ(65,"button",26)(66,"div",27)(67,"input",32),e.NdJ("click",function(){return n.IsPDCFilter(!1)}),e.qZA(),e.TgZ(68,"label",33),e._uU(69," Cheques "),e.qZA()()()()()()(),e.TgZ(70,"div",34)(71,"div",1)(72,"div",35)(73,"h6"),e._uU(74,"Reminder List"),e.qZA()(),e.TgZ(75,"div",36)(76,"p"),e._uU(77),e.qZA()()()()()(),e.TgZ(78,"div",37),e.YNc(79,ti,4,2,"div",38),e.YNc(80,ni,4,2,"div",38),e.YNc(81,li,10,3,"div",38),e.YNc(82,ri,5,4,"div",38),e.YNc(83,ci,4,1,"div",38),e.qZA(),e.TgZ(84,"div",39)(85,"div",40)(86,"app-table-advanced",41),e.NdJ("selectedData",function(l){return n.onSelectData(l)})("sortUpdated",function(l){return n.onSortChange(l)})("pageUpdated",function(l){return n.onPageChange(l)}),e.YNc(87,di,1,1,"ng-template",42),e.YNc(88,pi,1,1,"ng-template",43),e.YNc(89,_i,1,1,"ng-template",44),e.YNc(90,hi,1,1,"ng-template",45),e.YNc(91,gi,2,4,"ng-template",46),e.YNc(92,mi,2,4,"ng-template",47),e.YNc(93,fi,5,2,"ng-template",48),e.YNc(94,Ci,2,4,"ng-template",49),e.YNc(95,xi,2,4,"ng-template",50),e.YNc(96,bi,7,3,"ng-template",51),e.YNc(97,qi,2,5,"ng-template",52),e.YNc(98,Wi,13,9,"ng-template",53),e.qZA()()()(),e.YNc(99,Xi,3,0,"div",54)),2&t&&(e.xp6(6),e.Q6J("formControl",n.searchChequeText),e.xp6(1),e.Q6J("hidden",null==n.searchChequeText.value),e.xp6(6),e.Q6J("formControl",n.searchText),e.xp6(1),e.Q6J("hidden",null==n.searchText.value),e.xp6(3),e.Q6J("items",n.statusId)("formControl",n.statusIdControl),e.xp6(9),e.Q6J("ngModel",n.collectionDate),e.xp6(3),e.Q6J("ngModel",n.dueDate),e.xp6(3),e.Q6J("ngModel",n.bank),e.xp6(3),e.Q6J("ngModel",n.amount),e.xp6(3),e.Q6J("ngModel",n.markaziaBank),e.xp6(4),e.Oqu(n.showMultiSelect?"Remove Multi Select":"Multi Select"),e.xp6(15),e.Q6J("formControl",n.chequeType),e.xp6(5),e.Q6J("formControl",n.chequeType),e.xp6(5),e.Q6J("formControl",n.chequeType),e.xp6(10),e.hij("Total No. ",n.totalAllRecordsCount,""),e.xp6(2),e.Q6J("ngIf",n.collectionDate),e.xp6(1),e.Q6J("ngIf",n.dueDate),e.xp6(1),e.Q6J("ngIf",n.bank),e.xp6(1),e.Q6J("ngIf",n.markaziaBank),e.xp6(1),e.Q6J("ngIf",n.amount),e.xp6(3),e.Q6J("showMultiSelect",n.showMultiSelect)("config",n.tableConfig)("columns",n.tableColumns)("selecteddata",n.selecteddata)("link","deposit-cheque/detail")("data",n.deposites)("loading",n.loading)("page",n.page)("total",n.total)("limit",n.limit),e.xp6(13),e.Q6J("ngIf",n.showMultiSelect))},dependencies:[p.sg,p.O5,p.RF,p.n9,p.ED,y.rH,u.Fj,u.Wl,u._,u.JJ,u.On,u.oH,x.jt,x.iD,x.Vi,x.TH,J.w9,J.ir,ve.V,q.FR,q.TB,Te.y,Ce.Y,p.JJ,p.uU],styles:[".applyMargin[_ngcontent-%COMP%]{margin-top:2.5rem}.total[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:18px;font-weight:600;margin:15px 0 0;padding:10px 0}.total[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:500;font-size:16px;line-height:19px;color:#929eae;margin:0;padding:10px 0}.card-table[_ngcontent-%COMP%]{border:.5px solid #f4f4f4;box-shadow:3px 7px 12px #0000002e;-webkit-box-shadow:3px 7px 12px 0px rgba(0,0,0,.18);-moz-box-shadow:3px 7px 12px 0px rgba(0,0,0,.18)}.btn-provide[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff;outline:none;border:none;padding:8px 14px;border-radius:4px;font-size:12px;width:80px}.btn-disabled[_ngcontent-%COMP%]{background-color:#c5c6c7;color:#fff;outline:none;border:none;padding:8px 14px;border-radius:4px;font-size:12px;width:80px}.pagination[_ngcontent-%COMP%]{display:flex;justify-content:end;align-items:center;gap:8px}.play-left[_ngcontent-%COMP%]{color:#eceaea;transform:rotate(180deg);margin-right:5px}.play-right[_ngcontent-%COMP%]{color:#eceaea}.dropdownBox[_ngcontent-%COMP%]{position:absolute;width:150px;height:48px;background:#4e9aff;border-radius:8px}.headButton[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:95px;height:34.2px;border-radius:8px}.headButtonText[_ngcontent-%COMP%]{font-family:Kumbh Sans;font-size:14px;font-weight:600;line-height:17px;letter-spacing:0em;text-align:left}.menu[_ngcontent-%COMP%]{width:180px;filter:drop-shadow(0px 10px 20px rgba(0,0,0,.1))}.menu2[_ngcontent-%COMP%]{width:235px;filter:drop-shadow(0px 10px 20px rgba(0,0,0,.1))}.more-filter-drop[_ngcontent-%COMP%]{height:46px;width:150px;background:#4e9aff;border-radius:8px;color:#fff;outline:none;border:none}.dropdown-item[_ngcontent-%COMP%]{padding:12px;display:flex;justify-content:flex-start;align-items:center}.checkBox[_ngcontent-%COMP%]{accent-color:#dc3545;width:16px;height:16px}.dropdownFilters[_ngcontent-%COMP%]{height:48px;border-radius:8px;display:flex;justify-content:space-between;align-items:center;gap:8px;border:1px solid #dc3545}.filterFlex[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:center;gap:8px;flex-wrap:wrap}.btn-edit[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px}.dropdown-toggle[_ngcontent-%COMP%]:after{border:none}.cp[_ngcontent-%COMP%]{padding:10.5px 24px}"]}),i})();var S=h(9541),g=h(1086),se=h(6858),Ze=function(){if(typeof window<"u"){if(window.devicePixelRatio)return window.devicePixelRatio;var i=window.screen;if(i)return(i.deviceXDPI||1)/(i.logicalXDPI||1)}return 1}(),Q_textSize=function(i,a,t){var r,n=[].concat(a),o=n.length,l=i.font,s=0;for(i.font=t.string,r=0;r<o;++r)s=Math.max(i.measureText(n[r]).width,s);return i.font=l,{height:o*t.lineHeight,width:s}};function re(i,a){var t=a.x,n=a.y;if(null===t)return{x:0,y:-1};if(null===n)return{x:1,y:0};var o=i.x-t,l=i.y-n,s=Math.sqrt(o*o+l*l);return{x:s?o/s:0,y:s?l/s:-1}}var no=0,Ae=1,ye=2,we=4,ke=8;function G(i,a,t){var n=no;return i<t.left?n|=Ae:i>t.right&&(n|=ye),a<t.top?n|=ke:a>t.bottom&&(n|=we),n}function H(i,a){var o,l,t=a.anchor,n=i;return a.clamp&&(n=function io(i,a){for(var c,d,_,t=i.x0,n=i.y0,o=i.x1,l=i.y1,s=G(t,n,a),r=G(o,l,a);s|r&&!(s&r);)(c=s||r)&ke?(d=t+(o-t)*(a.top-n)/(l-n),_=a.top):c&we?(d=t+(o-t)*(a.bottom-n)/(l-n),_=a.bottom):c&ye?(_=n+(l-n)*(a.right-t)/(o-t),d=a.right):c&Ae&&(_=n+(l-n)*(a.left-t)/(o-t),d=a.left),c===s?s=G(t=d,n=_,a):r=G(o=d,l=_,a);return{x0:t,x1:o,y0:n,y1:l}}(n,a.area)),"start"===t?(o=n.x0,l=n.y0):"end"===t?(o=n.x1,l=n.y1):(o=(n.x0+n.x1)/2,l=(n.y0+n.y1)/2),function to(i,a,t,n,o){switch(o){case"center":t=n=0;break;case"bottom":t=0,n=1;break;case"right":t=1,n=0;break;case"left":t=-1,n=0;break;case"top":t=0,n=-1;break;case"start":t=-t,n=-n;break;case"end":break;default:o*=Math.PI/180,t=Math.cos(o),n=Math.sin(o)}return{x:i,y:a,vx:t,vy:n}}(o,l,i.vx,i.vy,a.align)}var z={arc:function(i,a){var t=(i.startAngle+i.endAngle)/2,n=Math.cos(t),o=Math.sin(t),l=i.innerRadius,s=i.outerRadius;return H({x0:i.x+n*l,y0:i.y+o*l,x1:i.x+n*s,y1:i.y+o*s,vx:n,vy:o},a)},point:function(i,a){var t=re(i,a.origin),n=t.x*i.options.radius,o=t.y*i.options.radius;return H({x0:i.x-n,y0:i.y-o,x1:i.x+n,y1:i.y+o,vx:t.x,vy:t.y},a)},bar:function(i,a){var t=re(i,a.origin),n=i.x,o=i.y,l=0,s=0;return i.horizontal?(n=Math.min(i.x,i.base),l=Math.abs(i.base-i.x)):(o=Math.min(i.y,i.base),s=Math.abs(i.base-i.y)),H({x0:n,y0:o+s,x1:n+l,y1:o,vx:t.x,vy:t.y},a)},fallback:function(i,a){var t=re(i,a.origin);return H({x0:i.x,y0:i.y,x1:i.x+(i.width||0),y1:i.y+(i.height||0),vx:t.x,vy:t.y},a)}},A=function(i){return Math.round(i*Ze)/Ze};function ao(i,a){var t=a.chart.getDatasetMeta(a.datasetIndex).vScale;if(!t)return null;if(void 0!==t.xCenter&&void 0!==t.yCenter)return{x:t.xCenter,y:t.yCenter};var n=t.getBasePixel();return i.horizontal?{x:n,y:null}:{x:null,y:n}}function lo(i){return i instanceof se.qi?z.arc:i instanceof se.od?z.point:i instanceof se.ZL?z.bar:z.fallback}function uo(i,a,t){var n=i.shadowBlur,o=t.stroked,l=A(t.x),s=A(t.y),r=A(t.w);o&&i.strokeText(a,l,s,r),t.filled&&(n&&o&&(i.shadowBlur=0),i.fillText(a,l,s,r),n&&o&&(i.shadowBlur=n))}var Ne=function(i,a,t,n){var o=this;o._config=i,o._index=n,o._model=null,o._rects=null,o._ctx=a,o._el=t};(0,g.a4)(Ne.prototype,{_modelize:function(i,a,t,n){var o=this,l=o._index,s=(0,g.a0)((0,g.a)([t.font,{}],n,l)),r=(0,g.a)([t.color,g.d.color],n,l);return{align:(0,g.a)([t.align,"center"],n,l),anchor:(0,g.a)([t.anchor,"center"],n,l),area:n.chart.chartArea,backgroundColor:(0,g.a)([t.backgroundColor,null],n,l),borderColor:(0,g.a)([t.borderColor,null],n,l),borderRadius:(0,g.a)([t.borderRadius,0],n,l),borderWidth:(0,g.a)([t.borderWidth,0],n,l),clamp:(0,g.a)([t.clamp,!1],n,l),clip:(0,g.a)([t.clip,!1],n,l),color:r,display:i,font:s,lines:a,offset:(0,g.a)([t.offset,4],n,l),opacity:(0,g.a)([t.opacity,1],n,l),origin:ao(o._el,n),padding:(0,g.E)((0,g.a)([t.padding,4],n,l)),positioner:lo(o._el),rotation:(0,g.a)([t.rotation,0],n,l)*(Math.PI/180),size:Q_textSize(o._ctx,a,s),textAlign:(0,g.a)([t.textAlign,"start"],n,l),textShadowBlur:(0,g.a)([t.textShadowBlur,0],n,l),textShadowColor:(0,g.a)([t.textShadowColor,r],n,l),textStrokeColor:(0,g.a)([t.textStrokeColor,r],n,l),textStrokeWidth:(0,g.a)([t.textStrokeWidth,0],n,l)}},update:function(i){var s,r,c,a=this,t=null,n=null,o=a._index,l=a._config,d=(0,g.a)([l.display,!0],i,o);d&&(r=(0,g.v)((0,g.Q)(l.formatter,[s=i.dataset.data[o],i]),s),(c=(0,g.k)(r)?[]:function(i){var t,a=[];for(i=[].concat(i);i.length;)"string"==typeof(t=i.pop())?a.unshift.apply(a,t.split("\n")):Array.isArray(t)?i.push.apply(i,t):(0,g.k)(i)||a.unshift(""+t);return a}(r)).length&&(n=function oo(i){var a=i.borderWidth||0,t=i.padding,n=i.size.height,o=i.size.width,l=-o/2,s=-n/2;return{frame:{x:l-t.left-a,y:s-t.top-a,w:o+t.width+2*a,h:n+t.height+2*a},text:{x:l,y:s,w:o,h:n}}}(t=a._modelize(d,c,l,i)))),a._model=t,a._rects=n},geometry:function(){return this._rects?this._rects.frame:{}},rotation:function(){return this._model?this._model.rotation:0},visible:function(){return this._model&&this._model.opacity},model:function(){return this._model},draw:function(i,a){var s,n=i.ctx,o=this._model,l=this._rects;this.visible()&&(n.save(),o.clip&&(s=o.area,n.beginPath(),n.rect(s.left,s.top,s.right-s.left,s.bottom-s.top),n.clip()),n.globalAlpha=function(i,a,t){return Math.max(i,Math.min(a,t))}(0,o.opacity,1),n.translate(A(a.x),A(a.y)),n.rotate(o.rotation),function ro(i,a,t){var n=t.backgroundColor,o=t.borderColor,l=t.borderWidth;!n&&(!o||!l)||(i.beginPath(),function so(i,a,t,n,o,l){var s=Math.PI/2;if(l){var r=Math.min(l,o/2,n/2),c=a+r,d=t+r,_=a+n-r,m=t+o-r;i.moveTo(a,d),c<_&&d<m?(i.arc(c,d,r,-Math.PI,-s),i.arc(_,d,r,-s,0),i.arc(_,m,r,0,s),i.arc(c,m,r,s,Math.PI)):c<_?(i.moveTo(c,t),i.arc(_,d,r,-s,s),i.arc(c,d,r,s,Math.PI+s)):d<m?(i.arc(c,d,r,-Math.PI,0),i.arc(c,m,r,0,Math.PI)):i.arc(c,d,r,-Math.PI,Math.PI),i.closePath(),i.moveTo(a,t)}else i.rect(a,t,n,o)}(i,A(a.x)+l/2,A(a.y)+l/2,A(a.w)-l,A(a.h)-l,t.borderRadius),i.closePath(),n&&(i.fillStyle=n,i.fill()),o&&l&&(i.strokeStyle=o,i.lineWidth=l,i.lineJoin="miter",i.stroke()))}(n,l.frame,o),function po(i,a,t,n){var D,o=n.textAlign,l=n.color,s=!!l,r=n.font,c=a.length,d=n.textStrokeColor,_=n.textStrokeWidth,m=d&&_;if(c&&(s||m))for(t=function co(i,a,t){var n=t.lineHeight,o=i.w,l=i.x;return"center"===a?l+=o/2:("end"===a||"right"===a)&&(l+=o),{h:n,w:o,x:l,y:i.y+n/2}}(t,o,r),i.font=r.string,i.textAlign=o,i.textBaseline="middle",i.shadowBlur=n.textShadowBlur,i.shadowColor=n.textShadowColor,s&&(i.fillStyle=l),m&&(i.lineJoin="round",i.lineWidth=_,i.strokeStyle=d),D=0,c=a.length;D<c;++D)uo(i,a[D],{stroked:m,filled:s,w:t.w,x:t.x,y:t.y+t.h*D})}(n,o.lines,l.text,o),n.restore())}});var _o=Number.MIN_SAFE_INTEGER||-9007199254740991,ho=Number.MAX_SAFE_INTEGER||9007199254740991;function O(i,a,t){var n=Math.cos(t),o=Math.sin(t),l=a.x,s=a.y;return{x:l+n*(i.x-l)-o*(i.y-s),y:s+o*(i.x-l)+n*(i.y-s)}}function Ie(i,a){var l,s,d,t=ho,n=_o,o=a.origin;for(l=0;l<i.length;++l)d=a.vx*((s=i[l]).x-o.x)+a.vy*(s.y-o.y),t=Math.min(t,d),n=Math.max(n,d);return{min:t,max:n}}function $(i,a){var t=a.x-i.x,n=a.y-i.y,o=Math.sqrt(t*t+n*n);return{vx:(a.x-i.x)/o,vy:(a.y-i.y)/o,origin:i,ln:o}}var Ue=function(){this._rotation=0,this._rect={x:0,y:0,w:0,h:0}};function Me(i,a,t){var n=a.positioner(i,a),o=n.vx,l=n.vy;if(!o&&!l)return{x:n.x,y:n.y};var s=t.w,r=t.h,c=a.rotation,d=Math.abs(s/2*Math.cos(c))+Math.abs(r/2*Math.sin(c)),_=Math.abs(s/2*Math.sin(c))+Math.abs(r/2*Math.cos(c)),m=1/Math.max(Math.abs(o),Math.abs(l));return d*=o*m,_*=l*m,{x:n.x+(d+=a.offset*o),y:n.y+(_+=a.offset*l)}}(0,g.a4)(Ue.prototype,{center:function(){var i=this._rect;return{x:i.x+i.w/2,y:i.y+i.h/2}},update:function(i,a,t){this._rotation=t,this._rect={x:a.x+i.x,y:a.y+i.y,w:a.w,h:a.h}},contains:function(i){var a=this,n=a._rect;return!((i=O(i,a.center(),-a._rotation)).x<n.x-1||i.y<n.y-1||i.x>n.x+n.w+2||i.y>n.y+n.h+2)},intersects:function(i){var o,l,s,a=this._points(),t=i._points(),n=[$(a[0],a[1]),$(a[0],a[3])];for(this._rotation!==i._rotation&&n.push($(t[0],t[1]),$(t[0],t[3])),o=0;o<n.length;++o)if(l=Ie(a,n[o]),s=Ie(t,n[o]),l.max<s.min||s.max<l.min)return!1;return!0},_points:function(){var i=this,a=i._rect,t=i._rotation,n=i.center();return[O({x:a.x,y:a.y},n,t),O({x:a.x+a.w,y:a.y},n,t),O({x:a.x+a.w,y:a.y+a.h},n,t),O({x:a.x,y:a.y+a.h},n,t)]}});var F={prepare:function(i){var t,n,o,l,s,a=[];for(t=0,o=i.length;t<o;++t)for(n=0,l=i[t].length;n<l;++n)a.push(s=i[t][n]),s.$layout={_box:new Ue,_hidable:!1,_visible:!0,_set:t,_idx:s._index};return a.sort(function(r,c){var d=r.$layout,_=c.$layout;return d._idx===_._idx?_._set-d._set:_._idx-d._idx}),this.update(a),a},update:function(i){var t,n,o,l,s,a=!1;for(t=0,n=i.length;t<n;++t)l=(o=i[t]).model(),(s=o.$layout)._hidable=l&&"auto"===l.display,s._visible=o.visible(),a|=s._hidable;a&&function mo(i){var a,t,n,o,l,s,r;for(a=0,t=i.length;a<t;++a)(o=(n=i[a]).$layout)._visible&&(r=new Proxy(n._el,{get:(c,d)=>c.getProps([d],!0)[d]}),l=n.geometry(),s=Me(r,n.model(),l),o._box.update(s,l,n.rotation()));(function go(i,a){var t,n,o,l;for(t=i.length-1;t>=0;--t)for(o=i[t].$layout,n=t-1;n>=0&&o._visible;--n)(l=i[n].$layout)._visible&&o._box.intersects(l._box)&&a(o,l)})(i,function(c,d){var _=c._hidable,m=d._hidable;_&&m||m?d._visible=!1:_&&(c._visible=!1)})}(i)},lookup:function(i,a){var t,n;for(t=i.length-1;t>=0;--t)if((n=i[t].$layout)&&n._visible&&n._box.contains(a))return i[t];return null},draw:function(i,a){var t,n,o,l,s,r;for(t=0,n=a.length;t<n;++t)(l=(o=a[t]).$layout)._visible&&(s=o.geometry(),r=Me(o._el,o.model(),s),l._box.update(r,s,o.rotation()),o.draw(i,r))}},v="$datalabels",Je="$default";function ce(i,a,t,n){if(a){var s,o=t.$context,l=t.$groups;a[l._set]&&(s=a[l._set][l._key])&&!0===(0,g.Q)(s,[o,n])&&(i[v]._dirty=!0,t.update(o))}}var Se={id:"datalabels",defaults:{align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:!1,clip:!1,color:void 0,display:!0,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},formatter:function(i){if((0,g.k)(i))return null;var t,n,o,a=i;if((0,g.i)(i))if((0,g.k)(i.label))if((0,g.k)(i.r))for(a="",o=0,n=(t=Object.keys(i)).length;o<n;++o)a+=(0!==o?", ":"")+t[o]+": "+i[t[o]];else a=i.r;else a=i.label;return""+a},labels:void 0,listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,textShadowBlur:0,textShadowColor:void 0},beforeInit:function(i){i[v]={_actives:[]}},beforeUpdate:function(i){var a=i[v];a._listened=!1,a._listeners={},a._datasets=[],a._labels=[]},afterDatasetUpdate:function(i,a,t){var m,D,I,Re,ue,Le,U,w,n=a.index,o=i[v],l=o._datasets[n]=[],s=i.isDatasetVisible(n),r=i.data.datasets[n],c=function xo(i,a){var l,s,t=i.datalabels,n={},o=[];return!1===t?null:(!0===t&&(t={}),a=(0,g.a4)({},[a,t]),l=a.labels||{},s=Object.keys(l),delete a.labels,s.length?s.forEach(function(r){l[r]&&o.push((0,g.a4)({},[a,l[r],{_key:r}]))}):o.push(a),n=o.reduce(function(r,c){return(0,g.F)(c.listeners||{},function(d,_){r[_]=r[_]||{},r[_][c._key||Je]=d}),delete c.listeners,r},{}),{labels:o,listeners:n})}(r,t),d=a.meta.data||[],_=i.ctx;for(_.save(),m=0,I=d.length;m<I;++m)if((U=d[m])[v]=[],s&&U&&i.getDataVisibility(m)&&!U.skip)for(D=0,Re=c.labels.length;D<Re;++D)Le=(ue=c.labels[D])._key,(w=new Ne(ue,_,U,m)).$groups={_set:n,_key:Le||Je},w.$context={active:!1,chart:i,dataIndex:m,dataset:r,datasetIndex:n},w.update(w.$context),U[v].push(w),l.push(w);_.restore(),(0,g.a4)(o._listeners,c.listeners,{merger:function(K,de,vl){de[K]=de[K]||{},de[K][a.index]=vl[K],o._listened=!0}})},afterUpdate:function(i){i[v]._labels=F.prepare(i[v]._datasets)},afterDatasetsDraw:function(i){F.draw(i,i[v]._labels)},beforeEvent:function(i,a){if(i[v]._listened){var t=a.event;switch(t.type){case"mousemove":case"mouseout":!function qo(i,a){var o,l,t=i[v],n=t._listeners;if(n.enter||n.leave){if("mousemove"===a.type)l=F.lookup(t._labels,a);else if("mouseout"!==a.type)return;o=t._hovered,t._hovered=l,function bo(i,a,t,n,o){var l,s;!t&&!n||(t?n?t!==n&&(s=l=!0):s=!0:l=!0,s&&ce(i,a.leave,t,o),l&&ce(i,a.enter,n,o))}(i,n,o,l,a)}}(i,t);break;case"click":!function vo(i,a){var t=i[v],n=t._listeners.click,o=n&&F.lookup(t._labels,a);o&&ce(i,n,o,a)}(i,t)}}},afterEvent:function(i){var l,s,r,c,d,_,m,a=i[v],o=function(i,a){var o,l,s,r,t=i.slice(),n=[];for(o=0,s=a.length;o<s;++o)-1===(l=t.indexOf(r=a[o]))?n.push([r,1]):t.splice(l,1);for(o=0,s=t.length;o<s;++o)n.push([t[o],-1]);return n}(a._actives,a._actives=i.getActiveElements());for(l=0,s=o.length;l<s;++l)if((d=o[l])[1])for(r=0,c=(m=d[0].element[v]||[]).length;r<c;++r)(_=m[r]).$context.active=1===d[1],_.update(_.$context);(a._dirty||o.length)&&(F.update(a._labels),i.render()),delete a._dirty}};function To(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"i",35),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.removeCollectionDateFilter())}),e.qZA()}}function Do(i,a){if(1&i&&e._uU(0),2&i){const t=a.index,n=e.oxw();e.hij(" ",6*(n.page-1)+t+1," ")}}function Zo(i,a){1&i&&(e._uU(0),e.ALo(1,"number")),2&i&&e.hij(" ",e.xi3(1,1,a.row.overDueTotal,"1.3-3")," JOD ")}function Ao(i,a){1&i&&(e._uU(0),e.ALo(1,"number")),2&i&&e.hij(" ",e.xi3(1,1,a.row.ageing[1].amount,"1.3-3")," JOD ")}function yo(i,a){1&i&&(e._uU(0),e.ALo(1,"number")),2&i&&e.hij(" ",e.xi3(1,1,a.row.ageing[2].amount,"1.3-3")," JOD ")}function wo(i,a){1&i&&(e._uU(0),e.ALo(1,"number")),2&i&&e.hij(" ",e.xi3(1,1,a.row.ageing[3].amount,"1.3-3")," JOD ")}function ko(i,a){1&i&&(e._uU(0),e.ALo(1,"number")),2&i&&e.hij(" ",e.xi3(1,1,a.row.ageing[4].amount,"1.3-3")," JOD ")}function No(i,a){1&i&&(e._uU(0),e.ALo(1,"number")),2&i&&e.hij(" ",e.xi3(1,1,a.row.ageing[5].amount,"1.3-3")," JOD ")}function Io(i,a){1&i&&(e._uU(0),e.ALo(1,"number")),2&i&&e.hij(" ",e.xi3(1,1,a.row.ageing[6].amount,"1.3-3")," JOD ")}function Uo(i,a){1&i&&(e._uU(0),e.ALo(1,"number")),2&i&&e.hij(" ",e.xi3(1,1,a.row.ageing[7].amount,"1.3-3")," JOD ")}const Mo=function(){return{containerClass:"theme-red",isAnimated:!0,showClearButton:!0}},Jo=function(i){return[i]};let So=(()=>{class i{constructor(t,n){this.depositService=t,this._excelService=n,this.amountchange=new u.NI(null),this.phonenumber=new u.NI(null),this.unsubscribe=new R.x,this.tableColumns=[],this.searchChequeNo="",this.searchCustomerNo="",this.loading=!1,this.chequeList=[],this.lookupNames=[],this.totalAllRecordsCount=0,this.page=1,this.total=0,this.limit=6,this.sort=1,this.startDate="",this.tableConfig={paging:!0,filter:{Sort:1,PageSize:this.limit}},this.dataUpdated=new e.vpe,this.barChartPlugins=[Se],this.barChartOptions={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,position:"bottom",labels:{usePointStyle:!0,padding:30}},datalabels:{font:{size:8},formatter:o=>o||""},tooltip:{callbacks:{label:o=>{const s=o.raw.toLocaleString();return`${o.label}: ${s} JOD`}}}},scales:{y:{stacked:!0,grid:{display:!1},border:{display:!1}},x:{stacked:!0,grid:{display:!1},border:{display:!1},ticks:{padding:20}},x1:{grid:{display:!1,drawOnChartArea:!1,drawTicks:!1},ticks:{display:!1},border:{display:!1}}}},this.barChartData={labels:[],datasets:[{data:[],label:"PDC",datalabels:{color:"#FFFFFF"},backgroundColor:"#D9D9D9",borderColor:"#D9D9D9",borderSkipped:!1,borderRadius:{topLeft:32,topRight:32,bottomLeft:32,bottomRight:32},barThickness:this.getBarThickness()},{data:[],label:"Collected",datalabels:{color:"#FFFFFF"},backgroundColor:"#DC3545",borderColor:"#DC3545",borderSkipped:!1,borderRadius:{topLeft:32,topRight:32,bottomLeft:32,bottomRight:32},barThickness:this.getBarThickness()}]},this.selectedYearValue=new Date,this.data={}}ngOnInit(){this.initTableColumns(),this.fetchData(),this.fetchtable(),this.amountchange.valueChanges.pipe((0,L.b)(300),(0,P.x)(),(0,Y.R)(this.unsubscribe)).subscribe(t=>{const n=t||"";(n?.length>=0||!n?.length&&this.tableConfig.filter.ChequeNumber?.length)&&(this.tableConfig.filter.ChequeNumber=n,this.page=1,this.fetchtable())}),this.phonenumber.valueChanges.pipe((0,L.b)(300),(0,P.x)(),(0,Y.R)(this.unsubscribe)).subscribe(t=>{const n=t||"";(n?.length>=0||!n?.length&&this.tableConfig.filter.Customer?.length)&&(this.tableConfig.filter.Customer=n,this.page=1,this.fetchtable())})}getChequeAgingForExport(){this.loading=!0,this.tableConfig.filter.PageNo=this.page-1,this.tableConfig.filter.PageSize=1e4,this.depositService.GetChequesAgingList(this.tableConfig.filter).subscribe(t=>{t&&(this.tableConfig.filter.PageSize=this.limit,this.generateExcelExport(t.data))}).add(()=>this.loading=!1)}generateExcelExport(t){var n=this;return(0,X.Z)(function*(){const o={fileName:"Cheques_Aging_List",mainHeading:"",sections:[{heading:[],headerStyle:{bold:!0,size:12,color:{argb:"ff000000"},fgColor:{argb:"ffe7e6e6"}},headers:["No","Customer Name","Over Due","0-30","31-60","61-90","91-120","121-150","151-180","180+",,],mainKeyMapping:["index","customerName","overDueTotal","ageing[1].amount","ageing[2].amount","ageing[3].amount","ageing[4].amount","ageing[5].amount","ageing[6].amount","ageing[7].amount"],data:t=t.map((s,r)=>({index:r+1,...s}))}]};yield n._excelService.exportToExcelJs1(o)})()}fetchData(){}ngOnDestroy(){}initTableColumns(){this.tableColumns=[{key:"no",label:"No"},{key:"customerName",label:"Customer Name"},{key:"overDueTotal",label:"Over Due"},{key:"ageing",label:"0-30"},{key:"second",label:"31-60"},{key:"three",label:"61-90"},{key:"four",label:"91-120"},{key:"five",label:"121-150"},{key:"six",label:"151-180"},{key:"last",label:"180+"}]}fetchtable(){this.chequeList=[],this.tableConfig.filter.PageNo=this.page-1;const t=this.depositService.GetChequesAgingList(this.tableConfig.filter),n=this.depositService.GetChequesAgingGraph(this.tableConfig.filter);(0,B.D)([t,n]).subscribe(([o,l])=>{o&&(this.chequeList=o.data,this.totalrecord=o.totalRecordCount,this.updateTotalValues(this.chequeList),this.totalAllRecordsCount=o.totalRecordCount,this.total=o.totalRecordCount),l&&(this.data=l,this.data.ageing&&(this.barChartData.labels=this.data.ageing.map(s=>s.translations[0].lookupName),this.updateChart()))},o=>{console.error(o)},()=>{this.loading=!1})}onPageChange(t){this.page=t,this.fetchtable()}removeSearchChequeNo(){this.searchChequeNo="",this.sort=1,this.fetchData()}searchCheque(t){const n=t.target.value;n.length>=2&&(this.searchChequeNo=n,this.page=0,this.fetchData()),0==n.length&&this.fetchData()}removeSearchCustomerNo(){this.searchCustomerNo="",this.sort=1,this.fetchData()}searchCustomer(t){const n=t.target.value;n.length>=2&&(this.searchCustomerNo=n,this.page=0,this.fetchData()),0==n.length&&this.fetchData()}onDateValueChange(t){var n=new p.uU("en-US");if(this.startDate=n.transform(t)||"",this.startDate){const o=new Date(this.startDate);o.setDate(o.getDate()+1);const l=o.toISOString();this.tableConfig.filter.CollectionDate=l}else this.tableConfig.filter.CollectionDate=this.startDate;this.fetchtable()}removeCollectionDateFilter(){this.startDate="",this.datepickerInput&&(this.datepickerInput=""),this.fetchtable()}validateInput(t){const n=t.target.value;/^[0-9]*\.?[0-9]*$/.test(n)||(t.target.value=n.replace(/[^0-9.]/g,""))}calculateTotalValue(t,n,o){let l=0;if("overDueTotal"===o)for(const s of t)l+=s[o];else for(const s of t)l+=s.ageing[n].amount;return l.toFixed(3)}updateTotalValues(t){const n=" JOD";this.totalValues={customerName:"Total:",overDueTotal:this.calculateTotalValue(t,0,"overDueTotal")+n,ageing:this.calculateTotalValue(t,0,"ageing")+n,second:this.calculateTotalValue(t,1,"second")+n,three:this.calculateTotalValue(t,2,"three")+n,four:this.calculateTotalValue(t,3,"four")+n,five:this.calculateTotalValue(t,4,"five")+n,six:this.calculateTotalValue(t,5,"six")+n,last:this.calculateTotalValue(t,6,"last")+n}}ngAfterViewInit(){this.initChart()}onResize(){const t=this.getBarThickness();this.barChartData.datasets[0].barThickness=t,this.barChartData.datasets[1].barThickness=t,this.chart&&this.chart.update()}getBarThickness(){return window.innerWidth<620?14:32}selectYearItem(){this.initChart()}initChart(){this.selectedYearValue?this.selectedYearValue.getFullYear():(new Date).getFullYear()}updateChart(){if(this.chart){this.barChartData.datasets[0].data=[],this.barChartData.datasets[1].data=[];for(let o=0;o<this.data?.ageing.length;o++){const s=this.data?.ageing[o]?.collectedAmount||0;this.barChartData.datasets[0].data.push(this.data?.ageing[o]?.totalAmount||0),this.barChartData.datasets[1].data.push(s)}this.chart.update()}}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Z),e.Y36(qe.x))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-cheque-aging-report"]],viewQuery:function(t,n){if(1&t&&e.Gf(S.jh,5),2&t){let o;e.iGM(o=e.CRH())&&(n.chart=o.first)}},outputs:{dataUpdated:"dataUpdated"},decls:48,vars:25,consts:[[1,"row","mt-2"],[1,"col-lg-3","col-md-6"],[1,"input-group","search-box"],["type","button","id","button-addon1",1,"btn",3,"click"],[1,"fa-solid","fa-search"],["type","text","placeholder","Cheque Number",1,"form-control",3,"ngModel","formControl","ngModelChange","input"],["type","button","id","button-addon1",1,"btn",3,"hidden","click"],[1,"fa-solid","fa-xmark"],["type","text","placeholder","Customer Name or Phone",1,"form-control",3,"ngModel","formControl","ngModelChange","keyup"],[1,"col-lg-3","col-md-6","filterFlex"],[1,"dropdown"],["type","button",1,"btn","dropdownFilters"],["type","text","placeholder","Select Collection Date","bsDatepicker","",1,"form-control",3,"ngModel","bsConfig","ngModelChange","bsValueChange"],["src","../../../../assets/images/calendar.png","alt","",1,"calender"],["class","fa-regular fa-circle-xmark",3,"click",4,"ngIf"],[1,"col-lg-3","col-md-6","d-flex","justify-content-end"],[1,"btn","btn-add",3,"click"],["src","../../../../assets/images/export-line.png","alt",""],[1,"col-lg-12","text-heading"],[1,"text-end"],[1,"col-md-12"],[1,"table-container"],[3,"config","columns","data","loading","tablefoot","page","total","limit","pageUpdated"],["libTableAdvancedColumn","no"],["libTableAdvancedColumn","overDueTotal"],["libTableAdvancedColumn","ageing"],["libTableAdvancedColumn","second"],["libTableAdvancedColumn","three"],["libTableAdvancedColumn","four"],["libTableAdvancedColumn","five"],["libTableAdvancedColumn","six"],["libTableAdvancedColumn","last"],[1,"mt-5"],[1,"chart-wrapper",3,"resize"],["baseChart","",3,"data","options","plugins","type"],[1,"fa-regular","fa-circle-xmark",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),e.NdJ("click",function(){return n.removeSearchChequeNo()}),e._UZ(4,"i",4),e.qZA(),e.TgZ(5,"input",5),e.NdJ("ngModelChange",function(l){return n.searchChequeNo=l})("input",function(l){return n.validateInput(l)}),e.qZA(),e.TgZ(6,"button",6),e.NdJ("click",function(){return n.removeSearchChequeNo()}),e._UZ(7,"i",7),e.qZA()()(),e.TgZ(8,"div",1)(9,"div",2)(10,"button",3),e.NdJ("click",function(){return n.removeSearchCustomerNo()}),e._UZ(11,"i",4),e.qZA(),e.TgZ(12,"input",8),e.NdJ("ngModelChange",function(l){return n.searchCustomerNo=l})("keyup",function(l){return n.searchCustomer(l)}),e.qZA(),e.TgZ(13,"button",6),e.NdJ("click",function(){return n.removeSearchCustomerNo()}),e._UZ(14,"i",7),e.qZA()()(),e.TgZ(15,"div",9)(16,"div",2)(17,"div",10)(18,"button",11)(19,"input",12),e.NdJ("ngModelChange",function(l){return n.datepickerInput=l})("bsValueChange",function(l){return n.onDateValueChange(l)}),e.qZA(),e._UZ(20,"img",13),e.YNc(21,To,1,0,"i",14),e.qZA()()()(),e.TgZ(22,"div",15)(23,"button",16),e.NdJ("click",function(){return n.getChequeAgingForExport()}),e._UZ(24,"img",17),e.TgZ(25,"span"),e._uU(26,"Export To Excel"),e.qZA()()()(),e.TgZ(27,"div",0)(28,"div",18)(29,"h5"),e._uU(30,"Cheques Aging Report"),e.qZA(),e.TgZ(31,"h6",19),e._uU(32),e.qZA()(),e.TgZ(33,"div",20)(34,"div",21)(35,"app-table-advanced",22),e.NdJ("pageUpdated",function(l){return n.onPageChange(l)}),e.YNc(36,Do,1,1,"ng-template",23),e.YNc(37,Zo,2,4,"ng-template",24),e.YNc(38,Ao,2,4,"ng-template",25),e.YNc(39,yo,2,4,"ng-template",26),e.YNc(40,wo,2,4,"ng-template",27),e.YNc(41,ko,2,4,"ng-template",28),e.YNc(42,No,2,4,"ng-template",29),e.YNc(43,Io,2,4,"ng-template",30),e.YNc(44,Uo,2,4,"ng-template",31),e.qZA()()(),e.TgZ(45,"div",32)(46,"div",33),e.NdJ("resize",function(){return n.onResize()},!1,e.Jf7),e._UZ(47,"canvas",34),e.qZA()()()),2&t&&(e.xp6(5),e.Q6J("ngModel",n.searchChequeNo)("formControl",n.amountchange),e.xp6(1),e.Q6J("hidden",0==n.searchChequeNo.length),e.xp6(6),e.Q6J("ngModel",n.searchCustomerNo)("formControl",n.phonenumber),e.xp6(1),e.Q6J("hidden",0==n.searchCustomerNo.length),e.xp6(6),e.Q6J("ngModel",n.datepickerInput)("bsConfig",e.DdM(22,Mo)),e.xp6(2),e.Q6J("ngIf",n.datepickerInput),e.xp6(11),e.hij("Total No.:",n.totalrecord,""),e.xp6(3),e.Q6J("config",n.tableConfig)("columns",n.tableColumns)("data",n.chequeList)("loading",n.loading)("tablefoot",e.VKq(23,Jo,n.totalValues))("page",n.page)("total",n.total)("limit",n.limit),e.xp6(12),e.Q6J("data",n.barChartData)("options",n.barChartOptions)("plugins",n.barChartPlugins)("type","bar"))},dependencies:[p.O5,u.Fj,u.JJ,u.On,u.oH,ve.V,q.Np,q.Y5,Te.y,S.jh,p.JJ],styles:[".filter-wrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:24px}.dropdown-action[_ngcontent-%COMP%]{width:140px;height:32px;position:relative}.dropdown-action[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;height:100%;background:#f8f8f8;border:1px solid #c4cdd5;border-radius:8px;padding:0 32px 0 16px;font-weight:500;font-size:15px;line-height:24px;color:#1b212d;text-align:left;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.dropdown-action[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{position:absolute;top:50%;right:24px;transform:translateY(-50%)}.dropdown-action[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]:after{display:none!important}.dropdown-action[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]:hover{background-color:#e8e8e8!important;color:#1b212d!important}.dropdown-action[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]:focus{background-color:#dc3545!important;color:#fff!important}.dropdown-action[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]:active{background-color:#f8f8f8!important;color:#1b212d!important}.dropdown-action[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{border-radius:12px;border:none;background-color:#fff;column-count:1;column-gap:0px;position:absolute;top:0%;z-index:9999;max-height:300px;overflow-y:auto;right:0;transform:translateY(40px)!important;box-shadow:2px 2px 8px #0003}.dropdown-action[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px;background-color:#f5f5f5}.dropdown-action[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#888;border-radius:10px}.dropdown-action[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:#555}.dropdown-action[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:active{background-color:#333}.dropdown-action[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{background-color:#fff;display:inline-block;width:100%;margin-bottom:10px;white-space:nowrap;font-size:14px;color:#000;font-weight:700;padding:6px 16px;cursor:pointer}.dropdown-action[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:hover, .dropdown-action[_ngcontent-%COMP%]   .dropdown-item.selected[_ngcontent-%COMP%]{background-color:#f8f8f8;box-shadow:2px 2px 8px #0003}.dropdown-action[_ngcontent-%COMP%]   .date-menu[_ngcontent-%COMP%]{font-size:12px}.dropdown-action[_ngcontent-%COMP%]   .date-item[_ngcontent-%COMP%]{padding:0 16px;margin-bottom:0;font-size:12px}nz-date-picker[_ngcontent-%COMP%]{cursor:pointer;color:#1b212d;background:#f8f8f8;border:1px solid #c4cdd5!important;height:32px!important;border-radius:8px!important}nz-date-picker[_ngcontent-%COMP%]:hover{background-color:#e8e8e8}nz-date-picker[_ngcontent-%COMP%]     input{font-weight:500!important;font-size:15px!important;line-height:24px!important;cursor:pointer}nz-date-picker[_ngcontent-%COMP%]     input::placeholder{color:#929eae}.chart-wrapper[_ngcontent-%COMP%]{width:99%;height:360px}"]}),i})();function Qo(i,a){1&i&&e._UZ(0,"div",15)}function Oo(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"p"),e._uU(2,"Bank Name: "),e.TgZ(3,"span",13),e._uU(4),e.qZA()(),e.TgZ(5,"p"),e._uU(6,"No of Cheques: "),e.TgZ(7,"span",13),e._uU(8),e.qZA()(),e.TgZ(9,"p"),e._uU(10,"Total Amount: "),e.TgZ(11,"span",13),e._uU(12),e.ALo(13,"number"),e.qZA()(),e.YNc(14,Qo,1,0,"div",14),e.BQk()),2&i){const t=a.$implicit,n=a.last;e.xp6(4),e.Oqu(null==t?null:t.bank),e.xp6(4),e.Oqu(null==t||null==t.cheques?null:t.cheques.length),e.xp6(4),e.hij("",e.xi3(13,4,null==t?null:t.totalAmount,"2.3-3")," JOD"),e.xp6(2),e.Q6J("ngIf",!n)}}function Fo(i,a){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"canvas",16),e.NdJ("chartClick",function(o){e.CHM(t);const l=e.oxw();return e.KtG(l.chartClicked(o))}),e.qZA(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("data",t.pieChartData)("type",t.pieChartType)("options",t.pieChartOptions)("plugins",t.pieChartPlugins)}}const Ro=function(){return{containerClass:"theme-red",isAnimated:!0,showClearButton:!0}};let Lo=(()=>{class i{constructor(t,n){this.depositservice=t,this._datePipe=n,this.dueChequeList=[],this.bsRangeValue=[],this.pieChartOptions={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,position:"top"},datalabels:{color:"white",formatter:(r,c)=>{if(c.chart.data.labels)return c.chart.data.labels[c.dataIndex]}}}},this.pieChartType="pie",this.pieChartPlugins=[Se];const o=new Date;let l=new Date(o.getFullYear(),o.getMonth(),1),s=new Date(o.getFullYear(),o.getMonth()+1,0);this.bsRangeValue=[l,s]}ngOnInit(){this.getDueCheques()}getDueCheques(t,n){const o=new Date;let l=new Date(o.getFullYear(),o.getMonth(),1),s=new Date(o.getFullYear(),o.getMonth()+1,0),r=this._datePipe.transform(t||l,"yyyy-MM-dd"),c=this._datePipe.transform(n||s,"yyyy-MM-dd");this.depositservice.getDueCheques(`?FromDate=${r}&ToDate=${c}`).subscribe(_=>{this.dueChequeList=_.data;let m=this.dueChequeList.map(I=>I.totalAmount),D=this.dueChequeList.map(I=>I.bank);this.pieChartData={labels:D,datasets:[{data:m,backgroundColor:["#253951","#DC3545","#C4CDD5","#767271","#B5B5B4"]}]}})}onDateValueChange(t){var n=new p.uU("en-US");let o=n.transform(t[0])||"",l=n.transform(t[1])||"";this.getDueCheques(o,l)}chartClicked({event:t}){console.log(t.native?.currentTarget)}chartHovered({event:t,active:n}){console.log(t,n)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Z),e.Y36(p.uU))},i.\u0275cmp=e.Xpm({type:i,selectors:[["cheques-due-date"]],viewQuery:function(t,n){if(1&t&&e.Gf(S.jh,5),2&t){let o;e.iGM(o=e.CRH())&&(n.chart=o.first)}},features:[e._Bn([p.uU])],decls:18,vars:5,consts:[[1,"row"],[1,"col-12","text-heading","mb-2"],[1,"col-4","mb-3"],[1,"input-group"],["type","text","placeholder","Select Date","bsDaterangepicker","",1,"form-control",3,"ngModel","bsConfig","ngModelChange","bsValueChange"],["drp","bsDaterangepicker"],[1,"input-group-text","cursor-pointer",3,"click"],["src","/assets/images/calendar.png","alt","",1,"calender"],[1,"col-6","d-flex","justify-content-end"],[1,"fw-600"],[4,"ngFor","ngForOf"],[1,"col-6"],[4,"ngIf"],[1,"txt-light"],["class","border-top mb-3",4,"ngIf"],[1,"border-top","mb-3"],["baseChart","","height","300",1,"chart",3,"data","type","options","plugins","chartClick"]],template:function(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"h5"),e._uU(3,"Cheques Due Date"),e.qZA()(),e.TgZ(4,"div",2)(5,"div",3)(6,"input",4,5),e.NdJ("ngModelChange",function(s){return n.bsRangeValue=s})("bsValueChange",function(s){return n.onDateValueChange(s)}),e.qZA(),e.TgZ(8,"span",6),e.NdJ("click",function(){e.CHM(o);const s=e.MAs(7);return e.KtG(s.toggle())}),e._UZ(9,"img",7),e.qZA()()()(),e.TgZ(10,"div",0)(11,"div",8)(12,"div")(13,"h4",9),e._uU(14,"Summary"),e.qZA(),e.YNc(15,Oo,15,7,"ng-container",10),e.qZA()(),e.TgZ(16,"div",11),e.YNc(17,Fo,2,4,"ng-container",12),e.qZA()()}2&t&&(e.xp6(6),e.Q6J("ngModel",n.bsRangeValue)("bsConfig",e.DdM(4,Ro)),e.xp6(9),e.Q6J("ngForOf",n.dueChequeList),e.xp6(2),e.Q6J("ngIf",n.pieChartData))},dependencies:[p.sg,p.O5,u.Fj,u.JJ,u.On,q.FR,q.TB,S.jh,p.JJ]}),i})();function Po(i,a){if(1&i&&(e.TgZ(0,"div",19)(1,"div",20)(2,"p",21),e._uU(3),e.qZA(),e.TgZ(4,"span",22),e._UZ(5,"i",23),e._uU(6),e.qZA()(),e.TgZ(7,"p",21),e._uU(8),e.qZA(),e.TgZ(9,"p",21),e._uU(10),e.ALo(11,"number"),e.qZA()()),2&i){const t=a.$implicit;e.xp6(3),e.Oqu(null==t||null==t.currency[0]?null:t.currency[0].lookupName),e.xp6(3),e.hij("Rate: ",null==t||null==t.currency[0]?null:t.currency[0].currencyRate,""),e.xp6(2),e.hij("Count: ",null==t?null:t.count,""),e.xp6(2),e.hij("Amount: ",e.xi3(11,4,null==t?null:t.collectedAmount,"2.3-3"),"")}}function Yo(i,a){if(1&i&&(e.ynx(0),e.YNc(1,Po,12,7,"div",18),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",null==t.cardsData?null:t.cardsData.depositedCheques)}}function Bo(i,a){if(1&i&&(e.TgZ(0,"div",19)(1,"div",20)(2,"p",21),e._uU(3),e.qZA(),e.TgZ(4,"span",22),e._UZ(5,"i",23),e._uU(6),e.qZA()(),e.TgZ(7,"p",21),e._uU(8),e.qZA(),e.TgZ(9,"p",21),e._uU(10),e.ALo(11,"number"),e.qZA()()),2&i){const t=a.$implicit;e.xp6(3),e.Oqu(null==t||null==t.currency[0]?null:t.currency[0].lookupName),e.xp6(3),e.hij("Rate: ",null==t||null==t.currency[0]?null:t.currency[0].currencyRate,""),e.xp6(2),e.hij("Count: ",null==t?null:t.count,""),e.xp6(2),e.hij("Amount: ",e.xi3(11,4,null==t?null:t.collectedAmount,"2.3-3"),"")}}function Eo(i,a){if(1&i&&(e.ynx(0),e.YNc(1,Bo,12,7,"div",18),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",null==t.cardsData?null:t.cardsData.collectedCheques)}}function jo(i,a){if(1&i&&(e.TgZ(0,"div",19)(1,"div",20)(2,"p",21),e._uU(3),e.qZA(),e.TgZ(4,"span",22),e._UZ(5,"i",23),e._uU(6),e.qZA()(),e.TgZ(7,"p",21),e._uU(8),e.qZA(),e.TgZ(9,"p",21),e._uU(10),e.ALo(11,"number"),e.qZA()()),2&i){const t=a.$implicit;e.xp6(3),e.Oqu(null==t||null==t.currency[0]?null:t.currency[0].lookupName),e.xp6(3),e.hij("Rate: ",null==t||null==t.currency[0]?null:t.currency[0].currencyRate,""),e.xp6(2),e.hij("Count: ",null==t?null:t.count,""),e.xp6(2),e.hij("Amount: ",e.xi3(11,4,null==t?null:t.collectedAmount,"2.3-3"),"")}}function Vo(i,a){if(1&i&&(e.ynx(0),e.YNc(1,jo,12,7,"div",18),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",null==t.cardsData?null:t.cardsData.replacedCheques)}}function Go(i,a){if(1&i&&(e.TgZ(0,"div",19)(1,"div",20)(2,"p",21),e._uU(3),e.qZA(),e.TgZ(4,"span",22),e._UZ(5,"i",23),e._uU(6),e.qZA()(),e.TgZ(7,"p",21),e._uU(8),e.qZA(),e.TgZ(9,"p",21),e._uU(10),e.ALo(11,"number"),e.qZA()()),2&i){const t=a.$implicit;e.xp6(3),e.Oqu(null==t||null==t.currency[0]?null:t.currency[0].lookupName),e.xp6(3),e.hij("Rate: ",null==t||null==t.currency[0]?null:t.currency[0].currencyRate,""),e.xp6(2),e.hij("Count: ",null==t?null:t.count,""),e.xp6(2),e.hij("Amount: ",e.xi3(11,4,null==t?null:t.collectedAmount,"2.3-3"),"")}}function Ho(i,a){if(1&i&&(e.ynx(0),e.YNc(1,Go,12,7,"div",18),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",null==t.cardsData?null:t.cardsData.withDrawnCheques)}}function zo(i,a){if(1&i&&(e.TgZ(0,"div",19)(1,"div",20)(2,"p",21),e._uU(3),e.qZA(),e.TgZ(4,"span",22),e._UZ(5,"i",23),e._uU(6),e.qZA()(),e.TgZ(7,"p",21),e._uU(8),e.qZA(),e.TgZ(9,"p",21),e._uU(10),e.ALo(11,"number"),e.qZA()()),2&i){const t=a.$implicit;e.xp6(3),e.Oqu(null==t||null==t.currency[0]?null:t.currency[0].lookupName),e.xp6(3),e.hij("Rate: ",null==t||null==t.currency[0]?null:t.currency[0].currencyRate,""),e.xp6(2),e.hij("Count: ",null==t?null:t.count,""),e.xp6(2),e.hij("Amount: ",e.xi3(11,4,null==t?null:t.collectedAmount,"2.3-3"),"")}}function $o(i,a){if(1&i&&(e.ynx(0),e.YNc(1,zo,12,7,"div",18),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",null==t.cardsData?null:t.cardsData.bouncedCheques)}}function Ko(i,a){1&i&&(e.TgZ(0,"h6",24),e._uU(1,"No Cheques"),e.qZA())}let Wo=(()=>{class i{constructor(t){this.depositService=t,this.limit=6,this.tableConfig={paging:!0,filter:{Sort:1,PageSize:this.limit}},this.cardsData={}}ngOnInit(){this.Getdashbord()}ngOnDestroy(){}Getdashbord(){const t=this.depositService.GetDashboardCard();(0,B.D)([t]).subscribe(([n])=>{n&&(this.cardsData={...n})})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Z))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-cheque-dashboard"]],decls:54,vars:10,consts:[[1,"card-wrapper"],[1,"notes-wrapper"],[1,"row","mb-3"],[1,"col-xl-4","col-md-6","col-12","mb-3"],[1,"card-note"],[1,"d-flex","gap-3","align-items-center","mb-3"],[1,"icon-box"],["src","assets/images/dashboard/bank.png"],[1,"font-18","fw-700","ff-medium"],[1,"d-flex"],[4,"ngIf","ngIfElse"],["src","assets/images/dashboard/collected.png"],["src","assets/images/dashboard/replace.png"],["src","assets/images/dashboard/returned.png"],["src","assets/images/dashboard/bounced.png"],["noCheques",""],[1,"row"],[1,"col-12","mt-5"],["class","border-end px-3",4,"ngFor","ngForOf"],[1,"border-end","px-3"],[1,"d-flex","align-items-center","gap-3"],[1,"font-14","fw-600","m-0"],[1,"fw-700","sea-green-clr","d-flex","gap-2","align-items-center"],[1,"fa-solid","fa-arrow-trend-up","fw-700"],[1,"fw-600"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),e._UZ(7,"img",7),e.qZA(),e.TgZ(8,"span",8),e._uU(9,"Total Deposited"),e.qZA()(),e.TgZ(10,"div",9),e.YNc(11,Yo,2,1,"ng-container",10),e.qZA()()(),e.TgZ(12,"div",3)(13,"div",4)(14,"div",5)(15,"div",6),e._UZ(16,"img",11),e.qZA(),e.TgZ(17,"span",8),e._uU(18,"Collected"),e.qZA()(),e.TgZ(19,"div",9),e.YNc(20,Eo,2,1,"ng-container",10),e.qZA()()(),e.TgZ(21,"div",3)(22,"div",4)(23,"div",5)(24,"div",6),e._UZ(25,"img",12),e.qZA(),e.TgZ(26,"span",8),e._uU(27,"Replaced"),e.qZA()(),e.TgZ(28,"div",9),e.YNc(29,Vo,2,1,"ng-container",10),e.qZA()()(),e.TgZ(30,"div",3)(31,"div",4)(32,"div",5)(33,"div",6),e._UZ(34,"img",13),e.qZA(),e.TgZ(35,"span",8),e._uU(36,"Withdrawn"),e.qZA()(),e.TgZ(37,"div",9),e.YNc(38,Ho,2,1,"ng-container",10),e.qZA()()(),e.TgZ(39,"div",3)(40,"div",4)(41,"div",5)(42,"div",6),e._UZ(43,"img",14),e.qZA(),e.TgZ(44,"span",8),e._uU(45,"Bounced"),e.qZA()(),e.TgZ(46,"div",9),e.YNc(47,$o,2,1,"ng-container",10),e.qZA()()(),e.YNc(48,Ko,2,0,"ng-template",null,15,e.W1O),e.qZA()(),e.TgZ(50,"div",16),e._UZ(51,"app-cheque-aging-report"),e.TgZ(52,"div",17),e._UZ(53,"cheques-due-date"),e.qZA()()()),2&t){const o=e.MAs(49);e.xp6(11),e.Q6J("ngIf",null==n.cardsData||null==n.cardsData.depositedCheques?null:n.cardsData.depositedCheques.length)("ngIfElse",o),e.xp6(9),e.Q6J("ngIf",null==n.cardsData||null==n.cardsData.collectedCheques?null:n.cardsData.collectedCheques.length)("ngIfElse",o),e.xp6(9),e.Q6J("ngIf",null==n.cardsData||null==n.cardsData.replacedCheques?null:n.cardsData.replacedCheques.length)("ngIfElse",o),e.xp6(9),e.Q6J("ngIf",null==n.cardsData||null==n.cardsData.withDrawnCheques?null:n.cardsData.withDrawnCheques.length)("ngIfElse",o),e.xp6(9),e.Q6J("ngIf",null==n.cardsData||null==n.cardsData.bouncedCheques?null:n.cardsData.bouncedCheques.length)("ngIfElse",o)}},dependencies:[p.sg,p.O5,So,Lo,p.JJ],styles:["[_nghost-%COMP%]     .ant-tabs-nav{margin:0 0 24px}.card-wrapper[_ngcontent-%COMP%]{margin-bottom:25px}.card-wrapper[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:0;flex:1}.card-wrapper[_ngcontent-%COMP%]   .columns[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:24px}.card-wrapper[_ngcontent-%COMP%]   .columns[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{min-width:400px}.heading[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:24px}.card-subheading[_ngcontent-%COMP%]{margin-bottom:10px}.btn[_ngcontent-%COMP%]{height:40px}.btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-right:10px}@media (max-width: 768px){.card-wrapper[_ngcontent-%COMP%]   .columns[_ngcontent-%COMP%]{flex-direction:column}.card-wrapper[_ngcontent-%COMP%]   .columns[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{min-width:0}}.card-note[_ngcontent-%COMP%]{display:flex;flex:1;flex-direction:column;padding:15px;gap:5px;background:#ffffff;box-shadow:0 5px 10px #0000000d;border-radius:8px;font-family:KumbhSans-Light;min-height:170px}.card-note[_ngcontent-%COMP%]   .icon-box[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:8px;gap:8px;width:40px;height:40px;background:#f8f8f8;box-shadow:0 10px 20px #0000001a;border-radius:8px}.card-note[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.card-note[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:600;font-size:14px;font-family:KumbhSans-Medium,sans-serif!important;line-height:24px;color:#929eae}.card-note[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .label-txt[_ngcontent-%COMP%]{font-weight:700;font-size:18px;line-height:24px;letter-spacing:.016em;color:#00261c;font-family:KumbhSans-Medium,sans-serif!important}.card-note[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{font-weight:700;font-family:KumbhSans-Medium,sans-serif!important;font-size:16px;line-height:24px;letter-spacing:.016em;color:#00261c}"]}),i})();function Xo(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",7),e.NdJ("click",function(){const l=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.chooseDeposit(l))}),e._uU(1),e.qZA()}if(2&i){const t=a.$implicit,n=e.oxw();e.ekj("active",t.id===n.headerService.selecteddeposit),e.xp6(1),e.hij(" ",t.name," ")}}function ea(i,a){if(1&i&&(e.TgZ(0,"div",8)(1,"p",9),e._uU(2),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.hij("Total No. ",t.totalAllRecordsCount,"")}}function ta(i,a){1&i&&(e.TgZ(0,"div",1),e._UZ(1,"app-cheque-dashboard"),e.qZA())}function na(i,a){1&i&&(e.TgZ(0,"div",1),e._UZ(1,"app-cheque-list"),e.qZA())}let ia=(()=>{class i{constructor(t,n){this.headerService=t,this.sidebarService=n,this.depositTypes=[],this.totalAllRecordsCount=0}ngOnInit(){this.headerService.setTitle("Deposited Cheques > Cheques List ");const t=this.sidebarService.findNavLink(this.sidebarService.navLinks,"deposites");t&&this.sidebarService.emitEvent({select:{navLink:t,silent:!0}}),this.getdepositTypes()}ngOnDestroy(){}chooseDeposit(t){this.headerService.selecteddeposit=t.id}getdepositTypes(){this.depositTypes=[{id:1,name:"Cheques Dashboard"},{id:2,name:"Cheques List"}]}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(_e.r),e.Y36(Be.P))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-deposit-cheque"]],decls:8,vars:4,consts:[[1,"card-page"],[1,"row"],[1,"col-md-9"],[1,"btn-tabs"],["type","button","class","btn",3,"active","click",4,"ngFor","ngForOf"],["class","col-md-3",4,"ngIf"],["class","row",4,"ngIf"],["type","button",1,"btn",3,"click"],[1,"col-md-3"],[1,"total-amount"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e.YNc(4,Xo,2,3,"button",4),e.qZA()(),e.YNc(5,ea,3,1,"div",5),e.qZA(),e.YNc(6,ta,2,0,"div",6),e.YNc(7,na,2,0,"div",6),e.qZA()),2&t&&(e.xp6(4),e.Q6J("ngForOf",n.depositTypes),e.xp6(1),e.Q6J("ngIf",2==n.headerService.selecteddeposit),e.xp6(1),e.Q6J("ngIf",1==n.headerService.selecteddeposit),e.xp6(1),e.Q6J("ngIf",2==n.headerService.selecteddeposit))},dependencies:[p.sg,p.O5,eo,Wo]}),i})();var Qe=h(9751);function oa(i,a){if(1&i&&(e.TgZ(0,"p"),e._UZ(1,"img",17),e._uU(2),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("src",null==t.details||null==t.details.bank?null:t.details.bank.imagePath,e.LSH),e.xp6(1),e.hij(" ",(null==t.details||null==t.details.bank||null==t.details.bank.translations||null==t.details.bank.translations[0]?null:t.details.bank.translations[0].lookupName)||"---"," ")}}function aa(i,a){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,oa,3,2,"p",16),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.details||null==t.details.bank||null==t.details.bank.translations||null==t.details.bank.translations[0]?null:t.details.bank.translations[0].lookupName)}}function la(i,a){if(1&i&&(e.TgZ(0,"p"),e._UZ(1,"img",17),e._uU(2),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("src",null==t.details||null==t.details.bank?null:t.details.bank.imagePath,e.LSH),e.xp6(1),e.Oqu((null==t.details?null:t.details.bank)||"---")}}function sa(i,a){if(1&i&&e.YNc(0,la,3,2,"p",16),2&i){const t=e.oxw();e.Q6J("ngIf",null==t.details?null:t.details.bank)}}function ra(i,a){if(1&i&&(e.TgZ(0,"div",18)(1,"div",19)(2,"div",20)(3,"label",21),e._uU(4,"Bank Confirmation Date"),e.qZA(),e.TgZ(5,"p"),e._uU(6),e.ALo(7,"date"),e.qZA()(),e.TgZ(8,"div",20)(9,"label",21),e._uU(10,"Cheque Collection Date"),e.qZA(),e.TgZ(11,"p"),e._uU(12),e.ALo(13,"date"),e.qZA()()()()),2&i){const t=e.oxw();e.xp6(6),e.Oqu(e.xi3(7,2,null==t.details?null:t.details.bankConfirmationDate,"dd-MM-yyyy")||"---"),e.xp6(6),e.Oqu(e.xi3(13,5,null==t.details?null:t.details.chequeCollectionDate,"dd-MM-yyyy")||"---")}}function ca(i,a){if(1&i&&(e.TgZ(0,"div",20)(1,"div",24)(2,"p"),e._uU(3,"Bank Confirmation Date"),e.qZA(),e.TgZ(4,"p",25),e._uU(5),e.ALo(6,"date"),e.qZA()()()),2&i){const t=e.oxw(2);e.xp6(5),e.Oqu(e.xi3(6,1,null==t.details?null:t.details.bankConfirmationDate,"mediumDate")||"---")}}function ua(i,a){if(1&i&&(e.TgZ(0,"div",20)(1,"div",24)(2,"p"),e._uU(3,"Receipt Voucher No"),e.qZA(),e.TgZ(4,"p",25),e._uU(5),e.qZA()()()),2&i){const t=e.oxw(2);e.xp6(5),e.Oqu((null==t.details?null:t.details.receiptVoucherNumber)||"---")}}function da(i,a){if(1&i&&(e.ynx(0),e._UZ(1,"view-file",29),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("file",null==t.details?null:t.details.actionFile)("download",!0)}}function pa(i,a){1&i&&(e.TgZ(0,"p"),e._uU(1,"---"),e.qZA())}function _a(i,a){if(1&i&&(e.TgZ(0,"div",22)(1,"div",19),e.YNc(2,ca,7,4,"div",23),e.TgZ(3,"div",20)(4,"div",24)(5,"p"),e._uU(6,"Action Reason"),e.qZA(),e.TgZ(7,"p",25),e._uU(8),e.qZA()()(),e.YNc(9,ua,6,1,"div",23),e.TgZ(10,"div",20)(11,"div",24)(12,"p"),e._uU(13,"Action Attachment"),e.qZA(),e.YNc(14,da,2,2,"ng-container",10),e.YNc(15,pa,2,0,"ng-template",null,26,e.W1O),e.qZA()(),e.TgZ(17,"div",27)(18,"p"),e._uU(19,"Action Note"),e.qZA(),e._UZ(20,"textarea",28),e.qZA()()()),2&i){const t=e.MAs(16),n=e.oxw();e.xp6(2),e.Q6J("ngIf",n.chequeStatusEnum.Withdrawn==n.statusId||n.chequeStatusEnum.ReDeposited==n.statusId),e.xp6(6),e.Oqu((null==n.details||null==n.details.reason?null:n.details.reason.chequeActionReason)||"---"),e.xp6(1),e.Q6J("ngIf",n.chequeActionEnum.PaidInCash==n.actionId),e.xp6(5),e.Q6J("ngIf",null==n.details?null:n.details.actionFile)("ngIfElse",t),e.xp6(6),e.Q6J("appMaxCharacters",200)("ngModel",null==n.details?null:n.details.notes)}}let ha=(()=>{class i{constructor(t){this.modalService=t,this.title="",this.detailShow=!1,this.sendtoLoadData=new e.vpe,this.chequeStatusEnum=b,this.chequeActionEnum=f,this.statusId=0,this.actionId=0}ngOnInit(){this.statusId=this.details?.statusObj?.lookupId,this.actionId=this.details.chqActionId}dismissModal(){this.modalService.dismissAll()}submit(){this.sendtoLoadData.emit()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(x.FF))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-deposit-cheque-detail-modal"]],inputs:{details:"details",title:"title",detailShow:"detailShow"},outputs:{sendtoLoadData:"sendtoLoadData"},decls:58,vars:29,consts:[["ngbAutoFocus","",1,"modal-body"],[1,"page-heading","flex-wrap","gap-2"],[1,"text-end"],[1,"soft-text"],[1,"last-content"],[1,"modal-cr-card"],[1,"card-head","grid-container"],[1,"title"],[1,"card-content"],[1,"grid-container"],[4,"ngIf","ngIfElse"],["banks",""],["class","modal-cr-card mb-3",4,"ngIf"],["class","detail-content mt-3",4,"ngIf"],[1,"btns-group"],["type","button",1,"btn","btn-cancel",3,"click"],[4,"ngIf"],["height","25","width","25",3,"src"],[1,"modal-cr-card","mb-3"],[1,"row"],[1,"col-4"],[1,"fw-500","mb-2"],[1,"detail-content","mt-3"],["class","col-4",4,"ngIf"],[1,"d-flex","flex-column"],[1,"txt-light"],["noActionFile",""],[1,"col-12","mt-2"],["readonly","","rows","5",1,"form-control",3,"appMaxCharacters","ngModel"],[3,"file","download"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div")(3,"h5"),e._uU(4),e.qZA()(),e.TgZ(5,"span",2)(6,"span"),e._uU(7),e.TgZ(8,"span",3),e._uU(9),e.qZA()(),e.TgZ(10,"span",4),e._uU(11),e.TgZ(12,"span",3),e._uU(13),e.ALo(14,"date"),e.qZA()()()(),e.TgZ(15,"div",5)(16,"div",6)(17,"h6",7),e._uU(18,"Cheque No"),e.qZA(),e.TgZ(19,"h6",7),e._uU(20,"Customer Name"),e.qZA(),e.TgZ(21,"h6",7),e._uU(22,"Cheque Bank Name"),e.qZA(),e.TgZ(23,"h6",7),e._uU(24,"Due Date"),e.qZA(),e.TgZ(25,"h6",7),e._uU(26,"Amount"),e.qZA(),e.TgZ(27,"h6",7),e._uU(28,"Currency"),e.qZA(),e.TgZ(29,"h6",7),e._uU(30," Amount (JOD)"),e.qZA()(),e.TgZ(31,"div",8)(32,"div",9)(33,"p"),e._uU(34),e.qZA(),e.TgZ(35,"p"),e._uU(36),e._UZ(37,"br"),e._uU(38),e.qZA(),e.YNc(39,aa,2,1,"div",10),e.YNc(40,sa,1,1,"ng-template",null,11,e.W1O),e.TgZ(42,"p"),e._uU(43),e.ALo(44,"date"),e.qZA(),e.TgZ(45,"p"),e._uU(46),e.ALo(47,"number"),e.qZA(),e.TgZ(48,"p"),e._uU(49),e.qZA(),e.TgZ(50,"p"),e._uU(51),e.ALo(52,"number"),e.qZA()()()(),e.YNc(53,ra,14,8,"div",12),e.YNc(54,_a,21,7,"div",13),e.TgZ(55,"div",14)(56,"button",15),e.NdJ("click",function(){return n.dismissModal()}),e._uU(57," Close "),e.qZA()()()),2&t){const o=e.MAs(41);e.xp6(4),e.hij("",n.title," Cheque Details View"),e.xp6(3),e.hij("",n.title," By: "),e.xp6(2),e.hij(" ",null==n.details||null==n.details.createdBy?null:n.details.createdBy.fullName,""),e.xp6(2),e.hij(" ","Returned"==n.title?"Return Date: ":"Collected"==n.title?"Collection Date: ":"Re-deposited"==n.title?"Re-deposit Date: ":n.title,": "),e.xp6(2),e.hij(" ",e.xi3(14,17,null==n.details?null:n.details.createdAt,"dd/MM/yyyy"),""),e.xp6(21),e.Oqu((null==n.details?null:n.details.chequeNo)||"---"),e.xp6(2),e.hij("",null==n.details||null==n.details.customer?null:n.details.customer.customerName," "),e.xp6(2),e.Oqu(null==n.details||null==n.details.customer?null:n.details.customer.mobile),e.xp6(1),e.Q6J("ngIf",null==n.details||null==n.details.bank?null:n.details.bank.translations)("ngIfElse",o),e.xp6(4),e.Oqu(e.xi3(44,20,null==n.details?null:n.details.chequeDate,"dd MMM yyyy")||"---"),e.xp6(3),e.Oqu(e.xi3(47,23,null==n.details?null:n.details.collectedAmount,".3")||"---"),e.xp6(3),e.AsE("",null==n.details||null==n.details.currency[0]?null:n.details.currency[0].lookupName," (",(null==n.details||null==n.details.currency[0]?null:n.details.currency[0].currencyRate)||1,")"),e.xp6(2),e.Oqu(e.xi3(52,26,null==n.details?null:n.details.chequeCollectionJod,".3")||"---"),e.xp6(2),e.Q6J("ngIf",n.chequeStatusEnum.Collected==n.statusId||n.chequeStatusEnum.Bounced==n.statusId),e.xp6(1),e.Q6J("ngIf",n.detailShow)}},dependencies:[p.O5,u.Fj,u.JJ,u.On,k,j,p.JJ,p.uU],styles:[".grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1.5fr repeat(5,1fr);gap:10px}"]}),i})();var ga=h(8423);function ma(i,a){if(1&i&&e._UZ(0,"img",18),2&i){const t=e.oxw(2);e.Q6J("src",null==t.details||null==t.details.bank?null:t.details.bank.imagePath,e.LSH)}}function fa(i,a){if(1&i&&(e.TgZ(0,"p"),e.YNc(1,ma,1,1,"img",17),e._uU(2),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.details||null==t.details.bank?null:t.details.bank.imagePath),e.xp6(1),e.hij(" ",(null==t.details||null==t.details.bank||null==t.details.bank.translations[0]?null:t.details.bank.translations[0].lookupName)||"---"," ")}}const Ca=function(){return{containerClass:"theme-red",isAnimated:!0,showClearButton:!0}},Oe=function(){return{required:"Input is required"}};function xa(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"div",22)(2,"label",23),e._uU(3,"Bank Confirmation Date *"),e.qZA(),e.TgZ(4,"div",24),e._UZ(5,"input",25),e.TgZ(6,"span",26),e._UZ(7,"i",27),e.qZA()(),e._UZ(8,"validation-error",28),e.qZA(),e.BQk()),2&i){const t=e.oxw(2);e.xp6(5),e.Q6J("formControl",t.bankConfirmationDate)("bsConfig",e.DdM(4,Ca)),e.xp6(3),e.Q6J("control",t.bankConfirmationDate)("errorMessages",e.DdM(5,Oe))}}function ba(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"div",19),e.ynx(2,20),e.YNc(3,xa,9,6,"ng-container",21),e.BQk(),e.qZA(),e.BQk()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngSwitch",t.chequeStatusId)}}function qa(i,a){if(1&i&&(e.TgZ(0,"div",19)(1,"div",29)(2,"label",23),e._uU(3,"Reject Reason *"),e.qZA(),e._UZ(4,"textarea",30)(5,"validation-error",28),e.qZA()()),2&i){const t=e.oxw();e.xp6(4),e.Q6J("formControl",t.rejectReason),e.xp6(1),e.Q6J("control",t.rejectReason)("errorMessages",e.DdM(3,Oe))}}let va=(()=>{class i{constructor(t,n,o,l,s){this._activeModal=t,this.depositservice=n,this._modalService=o,this._datePipe=l,this._spinner=s,this.chequeStatusId=0,this.eventData=new e.vpe,this.bankConfirmationDate=new u.NI(new Date),this.rejectReason=new u.NI(""),this.chequeStatusEnum=b,this.chequeActionEnum=f}ngOnInit(){this.details=this.data,this.action=this.details.cusAction,this.chequeStatusId=this.details?.status,"confirm"==this.action?(this.bankConfirmationDate.setValidators([u.kI.required]),this.bankConfirmationDate.updateValueAndValidity()):"reject"==this.action&&(this.rejectReason.setValidators([u.kI.required]),this.rejectReason.updateValueAndValidity())}confirm(){let t,n=new FormData;n.append("depositedChequeId",this.details?.id),"confirm"==this.action?((this.chequeStatusId==b.PendingPostpone||this.chequeStatusId==b.PendingReplace||this.chequeStatusId==b.PendingWithdraw||this.chequeStatusId==b.PendingReDeposit)&&n.append("BankConfirmationDate",this._datePipe.transform(this.bankConfirmationDate.value,"yyyy-MM-dd")||""),t=this.depositservice.confirmChequeAction(n)):"reject"==this.action&&(n.append("rejectReason",this.rejectReason.value),t=this.depositservice.rejectChequeAction(n)),this._spinner.show(),t.subscribe({next:o=>{o.isSuccess&&(this.responseModal("success","Action successfully done."),this.eventData.emit({success:!0}),this._activeModal.close())},error:o=>{this.responseModal("error",o?.error?.errors[0].errorMessageEn||o?.error?.errors[0].ErrorMessageEn||o?.info)}}).add(()=>this._spinner.hide())}responseModal(t,n){const o=this._modalService.open(M.e);o.componentInstance.type=t,o.componentInstance.message=n}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(x.Kz),e.Y36(Z),e.Y36(x.FF),e.Y36(p.uU),e.Y36(ga.t2))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-confirm-action"]],inputs:{data:"data"},outputs:{eventData:"eventData"},decls:52,vars:26,consts:[[1,"modal-header","align-items-center","justify-content-between"],[1,"font-16","m-0"],[1,"status-tag","m-0"],["ngbAutoFocus","",1,"modal-body"],[1,"modal-cr-card"],[1,"card-head","grid-container"],[1,"title"],[1,"card-content"],[1,"pb-4","grid-container"],[4,"ngIf"],[1,"modal-cr-card","overflow-visible"],[4,"ngIf","ngIfElse"],["rejectBlock",""],[1,"modal-footer","border-0","mt-3"],[1,"btns-group"],["type","button",1,"btn","btn-cancel",3,"click"],["type","button",1,"btn","btn-save",3,"disabled","click"],["height","25","width","25",3,"src",4,"ngIf"],["height","25","width","25",3,"src"],[1,"row"],[3,"ngSwitch"],[4,"ngSwitchDefault"],[1,"col-4"],[1,"fw-500","mb-2"],[1,"input-group"],["type","text","placeholder","Collection Date","bsDatepicker","","placement","bottom",1,"form-control",3,"formControl","bsConfig"],[1,"input-group-text"],[1,"fa-regular","fa-calendar"],[3,"control","errorMessages"],[1,"col-12"],["placeholder","Reject Reason",1,"form-control",3,"formControl"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"p",1),e._uU(2,"You are about to confirm the following cheque"),e.qZA(),e.TgZ(3,"p",2),e._uU(4),e.qZA()(),e.TgZ(5,"div",3)(6,"div",4)(7,"div",5)(8,"h6",6),e._uU(9,"Cheque No."),e.qZA(),e.TgZ(10,"h6",6),e._uU(11,"Customer Name"),e.qZA(),e.TgZ(12,"h6",6),e._uU(13,"Cheque Bank Name"),e.qZA(),e.TgZ(14,"h6",6),e._uU(15,"Due Date"),e.qZA(),e.TgZ(16,"h6",6),e._uU(17,"Amount"),e.qZA(),e.TgZ(18,"h6",6),e._uU(19,"Currency"),e.qZA(),e.TgZ(20,"h6",6),e._uU(21," Amount (JOD)"),e.qZA()(),e.TgZ(22,"div",7)(23,"div",8)(24,"p"),e._uU(25),e.qZA(),e.TgZ(26,"p"),e._uU(27),e._UZ(28,"br"),e._uU(29),e.qZA(),e.YNc(30,fa,3,2,"p",9),e.TgZ(31,"p"),e._uU(32),e.ALo(33,"date"),e.qZA(),e.TgZ(34,"p"),e._uU(35),e.ALo(36,"number"),e.qZA(),e.TgZ(37,"p"),e._uU(38),e.qZA(),e.TgZ(39,"p"),e._uU(40),e.ALo(41,"number"),e.qZA()()()(),e.TgZ(42,"div",10),e.YNc(43,ba,4,1,"ng-container",11),e.YNc(44,qa,6,4,"ng-template",null,12,e.W1O),e.qZA()(),e.TgZ(46,"div",13)(47,"div",14)(48,"button",15),e.NdJ("click",function(){return n._activeModal.close()}),e._uU(49,"Cancel"),e.qZA(),e.TgZ(50,"button",16),e.NdJ("click",function(){return n.confirm()}),e._uU(51," Confirm "),e.qZA()()()),2&t){const o=e.MAs(45);e.xp6(3),e.Udp("color",null==n.details||null==n.details.statusObj?null:n.details.statusObj.lookupTextColor)("background-color",null==n.details||null==n.details.statusObj?null:n.details.statusObj.lookupBGColor),e.xp6(1),e.hij(" ",null==n.details||null==n.details.statusObj||null==n.details.statusObj.translations?null:n.details.statusObj.translations[0].lookupName," "),e.xp6(21),e.Oqu((null==n.details?null:n.details.chequeNo)||"---"),e.xp6(2),e.hij("",null==n.details||null==n.details.customer?null:n.details.customer.customerName," "),e.xp6(2),e.Oqu(null==n.details||null==n.details.customer?null:n.details.customer.mobile),e.xp6(1),e.Q6J("ngIf",null==n.details?null:n.details.bank),e.xp6(2),e.Oqu(e.xi3(33,17,null==n.details?null:n.details.chequeDate,"dd MMM yyyy")||"---"),e.xp6(3),e.Oqu(e.xi3(36,20,null==n.details?null:n.details.collectedAmount,".3")||"---"),e.xp6(3),e.AsE("",null==n.details||null==n.details.currency[0]?null:n.details.currency[0].lookupName," (",(null==n.details||null==n.details.currency[0]?null:n.details.currency[0].currencyRate)||1,")"),e.xp6(2),e.Oqu(e.xi3(41,23,null==n.details?null:n.details.chequeCollectionJod,".3")||"---"),e.xp6(3),e.Q6J("ngIf","confirm"===n.action)("ngIfElse",o),e.xp6(7),e.Q6J("disabled",n.bankConfirmationDate.invalid||n.rejectReason.invalid)}},dependencies:[p.O5,p.RF,p.ED,u.Fj,u.JJ,u.oH,q.Np,q.Y5,oe.L,p.JJ,p.uU],styles:[".status-tag[_ngcontent-%COMP%]{background:#c7c7c7;padding:7px;border-radius:5px;color:#333}.grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,1fr)}"]}),i})();const Ta=["chequeImageFileRef"];function Da(i,a){1&i&&(e.ynx(0),e.TgZ(1,"span",41),e._UZ(2,"i",42),e.qZA(),e.BQk())}function Za(i,a){1&i&&(e.ynx(0),e.TgZ(1,"span",41),e._UZ(2,"i",42),e.qZA(),e.BQk())}function Aa(i,a){1&i&&(e.ynx(0),e.TgZ(1,"span",41),e._UZ(2,"i",42),e.qZA(),e.BQk())}function ya(i,a){if(1&i&&(e.ynx(0)(1,3),e.YNc(2,Da,3,0,"ng-container",4),e.YNc(3,Za,3,0,"ng-container",4),e.YNc(4,Aa,3,0,"ng-container",4),e.BQk()()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngSwitch",null==t.depositeDetail?null:t.depositeDetail.status),e.xp6(1),e.Q6J("ngSwitchCase",t.chequeStatusEnum.Deposited),e.xp6(1),e.Q6J("ngSwitchCase",t.chequeStatusEnum.ReDeposited),e.xp6(1),e.Q6J("ngSwitchCase",t.chequeStatusEnum.Postponed)}}function wa(i,a){1&i&&(e.ynx(0),e.TgZ(1,"span",41),e._UZ(2,"i",42),e.qZA(),e.BQk())}function ka(i,a){1&i&&(e.ynx(0),e.TgZ(1,"span",41),e._UZ(2,"i",42),e.qZA(),e.BQk())}function Na(i,a){1&i&&(e.ynx(0),e.TgZ(1,"span",41),e._UZ(2,"i",42),e.qZA(),e.BQk())}function Ia(i,a){1&i&&(e.ynx(0),e.TgZ(1,"span",41),e._UZ(2,"i",42),e.qZA(),e.BQk())}function Ua(i,a){1&i&&(e.ynx(0),e.TgZ(1,"span",41),e._UZ(2,"i",42),e.qZA(),e.BQk())}function Ma(i,a){if(1&i&&(e.ynx(0)(1,3),e.YNc(2,wa,3,0,"ng-container",4),e.YNc(3,ka,3,0,"ng-container",4),e.YNc(4,Na,3,0,"ng-container",4),e.YNc(5,Ia,3,0,"ng-container",4),e.YNc(6,Ua,3,0,"ng-container",4),e.BQk()()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngSwitch",null==t.depositeDetail?null:t.depositeDetail.status),e.xp6(1),e.Q6J("ngSwitchCase",t.chequeStatusEnum.Deposited),e.xp6(1),e.Q6J("ngSwitchCase",t.chequeStatusEnum.ReDeposited),e.xp6(1),e.Q6J("ngSwitchCase",t.chequeStatusEnum.Bounced),e.xp6(1),e.Q6J("ngSwitchCase",t.chequeStatusEnum.Postponed),e.xp6(1),e.Q6J("ngSwitchCase",t.chequeStatusEnum.Withdrawn)}}function Ja(i,a){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",43),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.depositDetail(29003))}),e._uU(2,"Replace"),e.qZA(),e.TgZ(3,"button",43),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.depositDetail(29011))}),e._uU(4,"Postpone"),e.qZA(),e.TgZ(5,"button",43),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.depositDetail(29002))}),e._uU(6,"Withdraw"),e.qZA(),e.BQk()}}function Sa(i,a){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",43),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.depositDetail(29006))}),e._uU(2,"Collect"),e.qZA(),e.TgZ(3,"button",43),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.depositDetail(29001))}),e._uU(4,"Bounce"),e.qZA(),e.BQk()}}function Qa(i,a){if(1&i&&(e.ynx(0)(1,3),e.YNc(2,Ja,7,0,"ng-container",4),e.YNc(3,Sa,5,0,"ng-container",4),e.BQk()()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngSwitch",null==t.userDetails||null==t.userDetails.role?null:t.userDetails.role.roleId),e.xp6(1),e.Q6J("ngSwitchCase",47),e.xp6(1),e.Q6J("ngSwitchCase",46)}}function Oa(i,a){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",43),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.depositDetail(29003))}),e._uU(2,"Replace"),e.qZA(),e.TgZ(3,"button",43),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.depositDetail(29011))}),e._uU(4,"Postpone"),e.qZA(),e.TgZ(5,"button",43),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.depositDetail(29002))}),e._uU(6,"Withdraw"),e.qZA(),e.BQk()}}function Fa(i,a){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",43),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.depositDetail(29006))}),e._uU(2,"Collect"),e.qZA(),e.TgZ(3,"button",43),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.depositDetail(29001))}),e._uU(4,"Bounce"),e.qZA(),e.BQk()}}function Ra(i,a){if(1&i&&(e.ynx(0)(1,3),e.YNc(2,Oa,7,0,"ng-container",4),e.YNc(3,Fa,5,0,"ng-container",4),e.BQk()()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngSwitch",null==t.userDetails||null==t.userDetails.role?null:t.userDetails.role.roleId),e.xp6(1),e.Q6J("ngSwitchCase",47),e.xp6(1),e.Q6J("ngSwitchCase",46)}}function La(i,a){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",43),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.depositDetail(29003))}),e._uU(2,"Replace"),e.qZA(),e.TgZ(3,"button",43),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.depositDetail(29004))}),e._uU(4,"Re-Deposit"),e.qZA(),e.TgZ(5,"button",43),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.depositDetail(29017))}),e._uU(6,"Pay In Cash"),e.qZA(),e.BQk()}}function Pa(i,a){if(1&i&&(e.ynx(0)(1,3),e.YNc(2,La,7,0,"ng-container",4),e.BQk()()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngSwitch",null==t.userDetails||null==t.userDetails.role?null:t.userDetails.role.roleId),e.xp6(1),e.Q6J("ngSwitchCase",47)}}function Ya(i,a){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",43),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.depositDetail(29003))}),e._uU(2,"Replace"),e.qZA(),e.TgZ(3,"button",43),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.depositDetail(29002))}),e._uU(4,"Withdraw"),e.qZA(),e.BQk()}}function Ba(i,a){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",43),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.depositDetail(29006))}),e._uU(2,"Collect"),e.qZA(),e.TgZ(3,"button",43),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.depositDetail(29001))}),e._uU(4,"Bounce"),e.qZA(),e.BQk()}}function Ea(i,a){if(1&i&&(e.ynx(0)(1,3),e.YNc(2,Ya,5,0,"ng-container",4),e.YNc(3,Ba,5,0,"ng-container",4),e.BQk()()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngSwitch",null==t.userDetails||null==t.userDetails.role?null:t.userDetails.role.roleId),e.xp6(1),e.Q6J("ngSwitchCase",47),e.xp6(1),e.Q6J("ngSwitchCase",46)}}function ja(i,a){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",43),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.depositDetail(null==o.depositeDetail?null:o.depositeDetail.nextAllowedActionId))}),e._uU(2),e.qZA(),e.BQk()}if(2&i){const t=e.oxw(2);e.xp6(2),e.hij(" ",null==t.depositeDetail||null==t.depositeDetail.nextAllowedAction[0]?null:t.depositeDetail.nextAllowedAction[0].lookupName," ")}}function Va(i,a){if(1&i&&(e.ynx(0)(1,3),e.YNc(2,ja,3,1,"ng-container",4),e.BQk()()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngSwitch",null==t.userDetails||null==t.userDetails.role?null:t.userDetails.role.roleId),e.xp6(1),e.Q6J("ngSwitchCase",47)}}function Ga(i,a){1&i&&e.GkF(0)}function Ha(i,a){if(1&i&&(e.TgZ(0,"p"),e._UZ(1,"img",44),e._uU(2),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("src",null==t.depositeDetail||null==t.depositeDetail.bank?null:t.depositeDetail.bank.imagePath,e.LSH),e.xp6(1),e.hij(" ",(null==t.depositeDetail||null==t.depositeDetail.bank||null==t.depositeDetail.bank.translations||null==t.depositeDetail.bank.translations[0]?null:t.depositeDetail.bank.translations[0].lookupName)||"---"," ")}}function za(i,a){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Ha,3,2,"p",13),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.depositeDetail||null==t.depositeDetail.bank||null==t.depositeDetail.bank.translations||null==t.depositeDetail.bank.translations[0]?null:t.depositeDetail.bank.translations[0].lookupName)}}function $a(i,a){if(1&i&&(e.TgZ(0,"p"),e._UZ(1,"img",44),e._uU(2),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("src",null==t.depositeDetail||null==t.depositeDetail.bank?null:t.depositeDetail.bank.imagePath,e.LSH),e.xp6(1),e.Oqu((null==t.depositeDetail?null:t.depositeDetail.bank)||"---")}}function Ka(i,a){if(1&i&&e.YNc(0,$a,3,2,"p",13),2&i){const t=e.oxw();e.Q6J("ngIf",null==t.depositeDetail?null:t.depositeDetail.bank)}}function Wa(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"div",45)(2,"div",46)(3,"label",47),e._uU(4,"Cheque Receiving Date"),e.qZA(),e.TgZ(5,"p",48),e._uU(6),e.ALo(7,"date"),e.qZA()(),e.TgZ(8,"div",46)(9,"label",47),e._uU(10,"Customer Delivery Date"),e.qZA(),e.TgZ(11,"p",48),e._uU(12),e.ALo(13,"date"),e.qZA()()(),e.BQk()),2&i){const t=e.oxw(2);e.xp6(6),e.Oqu(e.xi3(7,2,null==t.depositeDetail?null:t.depositeDetail.chequeReceivedDate,"mediumDate")||"---"),e.xp6(6),e.Oqu(e.xi3(13,5,null==t.depositeDetail?null:t.depositeDetail.customerDeliveryDate,"mediumDate")||"---")}}function Xa(i,a){if(1&i&&(e.ynx(0),e.YNc(1,Wa,14,8,"ng-container",13),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.chequeStatusEnum.Withdrawn==(null==t.depositeDetail?null:t.depositeDetail.status)||t.chequeStatusEnum.Bounced==(null==t.depositeDetail?null:t.depositeDetail.status)||t.chequeStatusEnum.Replaced==(null==t.depositeDetail?null:t.depositeDetail.status)||t.chequeStatusEnum.PaidInCash==(null==t.depositeDetail?null:t.depositeDetail.status))}}const Fe=function(){return{containerClass:"theme-red",isAnimated:!0,showClearButton:!0}},el=function(){return{oneRequired:"Select date to confirm"}};function tl(i,a){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",0)(2,"div",49)(3,"div",50)(4,"label",51),e._uU(5,"Cheque Receiving Date"),e.qZA(),e._UZ(6,"input",52),e.qZA(),e.TgZ(7,"div",50)(8,"label",51),e._uU(9,"Customer Delivery Date"),e.qZA(),e._UZ(10,"input",53),e.qZA(),e.TgZ(11,"div",50)(12,"button",54),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.handleClickConfirmDate())}),e._uU(13,"Confirm Dates"),e.qZA()(),e.TgZ(14,"div",55),e._UZ(15,"validation-error",56),e.qZA()()(),e.BQk()}if(2&i){const t=e.oxw(2);e.xp6(6),e.Q6J("formControl",t.chequeReceivedDate)("bsConfig",e.DdM(6,Fe)),e.xp6(4),e.Q6J("formControl",t.customerDeliveryDate)("bsConfig",e.DdM(7,Fe)),e.xp6(5),e.Q6J("control",t.chequeReceivedDate)("errorMessages",e.DdM(8,el))}}function nl(i,a){if(1&i&&(e.ynx(0),e.YNc(1,tl,16,9,"ng-container",13),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.chequeStatusEnum.Withdrawn==(null==t.depositeDetail?null:t.depositeDetail.status)||t.chequeStatusEnum.Bounced==(null==t.depositeDetail?null:t.depositeDetail.status)||t.chequeStatusEnum.Replaced==(null==t.depositeDetail?null:t.depositeDetail.status)||t.chequeStatusEnum.PaidInCash==(null==t.depositeDetail?null:t.depositeDetail.status))}}function il(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",57)(1,"input",58),e.NdJ("ngModelChange",function(o){e.CHM(t);const l=e.oxw();return e.KtG(l.markAsDelivered=o)}),e.qZA(),e.TgZ(2,"label",59),e._uU(3,"Mark as Delivered to Customer"),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngModel",t.markAsDelivered)}}function ol(i,a){1&i&&e._UZ(0,"div",66)}function al(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",60),e.NdJ("click",function(){const l=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.depositDetailModal(l))}),e.TgZ(1,"div",61)(2,"div",62),e._UZ(3,"img",63),e.qZA(),e.TgZ(4,"h6",64),e._uU(5),e.qZA()(),e.YNc(6,ol,1,0,"div",65),e.qZA()}if(2&i){const t=a.$implicit,n=a.last;e.ekj("flex-grow-1",!n),e.xp6(5),e.Oqu((null==t||null==t.status[0]?null:t.status[0].lookupName)||"Paid In Cash"),e.xp6(1),e.Q6J("ngIf",!n)}}const ll=function(i){return{isUploaded:!0,uploadedFile:i}};function sl(i,a){if(1&i&&e._UZ(0,"view-file",67),2&i){const t=e.oxw();e.Q6J("data",e.VKq(1,ll,t.uploadedFile))}}function rl(i,a){if(1&i&&e._UZ(0,"view-file",68),2&i){const t=e.oxw();e.Q6J("file",null==t.depositeDetail?null:t.depositeDetail.actionFile)("download",!0)}}function cl(i,a){1&i&&(e.TgZ(0,"div",69),e._UZ(1,"img",70),e.TgZ(2,"h3",71),e._uU(3,"No Image to display"),e.qZA()())}function ul(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"div",85)(2,"a",86),e._uU(3,"Click to open PDF file "),e.qZA()(),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.s9C("href",null==t?null:t.imagePath,e.LSH)}}function dl(i,a){if(1&i&&e._UZ(0,"img",87),2&i){const t=e.oxw().$implicit;e.Q6J("src",null==t?null:t.imagePath,e.LSH)}}function pl(i,a){if(1&i&&(e.TgZ(0,"div",83),e.YNc(1,ul,4,1,"ng-container",11),e.YNc(2,dl,1,1,"ng-template",null,84,e.W1O),e.qZA()),2&i){const t=a.$implicit,n=a.index,o=e.MAs(3);e.ekj("active",0===n),e.xp6(1),e.Q6J("ngIf","pdf"===(null==t?null:t.fileExt))("ngIfElse",o)}}function _l(i,a){if(1&i&&(e.TgZ(0,"div",72)(1,"div",73)(2,"div",74)(3,"button",75),e._UZ(4,"span",76),e.TgZ(5,"span",77),e._uU(6,"Previous"),e.qZA()()(),e.TgZ(7,"div",78)(8,"div",79),e.YNc(9,pl,4,4,"div",80),e.qZA()(),e.TgZ(10,"div",74)(11,"button",81),e._UZ(12,"span",82),e.TgZ(13,"span",77),e._uU(14,"Next"),e.qZA()()()()()),2&i){const t=e.oxw();e.xp6(9),e.Q6J("ngForOf",null==t.depositeDetail?null:t.depositeDetail.chequeImages)}}function hl(i,a){if(1&i&&(e.TgZ(0,"div",73)(1,"div",88)(2,"div",89),e._uU(3),e.qZA()(),e.TgZ(4,"div",46)(5,"b"),e._uU(6,"Date: "),e.qZA(),e.TgZ(7,"span"),e._uU(8),e.ALo(9,"date"),e.qZA()(),e.TgZ(10,"div",46)(11,"b"),e._uU(12,"Time: "),e.qZA(),e.TgZ(13,"span"),e._uU(14),e.ALo(15,"date"),e.qZA()(),e.TgZ(16,"div",46)(17,"b"),e._uU(18,"By: "),e.qZA(),e.TgZ(19,"span"),e._uU(20),e.qZA()(),e.TgZ(21,"div",46)(22,"b"),e._uU(23,"Role: "),e.qZA(),e.TgZ(24,"span"),e._uU(25),e.qZA()(),e.TgZ(26,"div",50)(27,"b"),e._uU(28,"Action: "),e.qZA(),e.TgZ(29,"span"),e._uU(30),e.qZA()()()),2&i){const t=a.$implicit,n=a.index;e.xp6(3),e.hij(" ",n+1,""),e.xp6(5),e.hij(" ",e.xi3(9,6,null==t?null:t.createdAt,"dd/MM/yyyy"),""),e.xp6(6),e.Oqu(e.xi3(15,9,t.createdAt,"hh:mm")),e.xp6(6),e.Oqu(null==t||null==t.createdBy?null:t.createdBy.fullName),e.xp6(5),e.Oqu(null==t?null:t.role.name),e.xp6(5),e.hij("",null==t?null:t.actionDetails," ")}}function gl(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",90),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.viewMore())}),e.TgZ(1,"div",91)(2,"a",92),e._uU(3," View More"),e.qZA()()()}}function ml(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",90),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.viewLess())}),e.TgZ(1,"div",91)(2,"a",92),e._uU(3," View Less"),e.qZA()()()}}function fl(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",93),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.markChequeAsDelivered())}),e._uU(1,"Save"),e.qZA()}}function Cl(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",94)(1,"button",54),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.save("reject"))}),e._uU(2,"Reject"),e.qZA(),e.TgZ(3,"button",54),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.save("confirm"))}),e._uU(4,"Confirm"),e.qZA()()}}const xl=[{path:"",component:ia},{path:"detail/:id",component:(()=>{class i{constructor(t,n,o,l,s,r,c,d){this.activatedRoute=t,this._authService=n,this.headerService=o,this._router=l,this.modalService=s,this.depositservice=r,this._helperService=c,this.toastrService=d,this.chequeReceivedDate=new u.NI(""),this.customerDeliveryDate=new u.NI(""),this.current=0,this.loading=!1,this.steps=[],this.actionList=[],this.activityLog=[],this.masterActivityLog=[],this.pendingChequesActions=[b.PendingWithdraw,b.PendingReplace,b.PendingPostpone,b.PendingReDeposit],this.markAsDelivered=!1,this.withAndReplaceChequeActions=[28003,28005,28008,28009],this.chequeStatusEnum=b,this.chequeActionEnum=f,this.userRoleEnum=E}ngOnInit(){this.getUserDetails(),this.headerService.setTitle("Deposited Cheques > Cheques List > Deposited Cheque Details "),this.activatedRoute.params.subscribe(t=>{t&&(this.id=t.id,this.getDepositDetail(),this.getData())})}handleClickConfirmDate(){if(!this.chequeReceivedDate.value&&!this.customerDeliveryDate.value)return this.chequeReceivedDate.setErrors({oneRequired:!0}),void this.chequeReceivedDate.markAsTouched();this.chequeReceivedDate.setErrors(null);let t=new FormData;t.append("DepositedChequeId",this.id),t.append("ChequeReceivedDate",this._helperService.dateFormate(this.chequeReceivedDate.value)||""),t.append("CustomerDeliveryDate",this._helperService.dateFormate(this.customerDeliveryDate.value)||""),this.depositservice.updateCheque(t).subscribe({next:n=>{n.isSuccess&&(this.responseModal("success","Data saved successfully!"),this.chequeReceivedDate.reset(),this.customerDeliveryDate.reset(),this.getDepositDetail())},error:n=>{this.responseModal("error",n?.error?.errors[0].errorMessageEn||n?.error?.errors[0].ErrorMessageEn||n?.info)}})}onFileSelected(t){[...t.target.files].forEach(o=>{this.depositservice.fileToBase64(o).then(l=>{this.uploadedFile=l,this.chequeImageFileRef=null,this.uploadChequeImage()})})}uploadChequeImage(){const t=new FormData;t.append("DepositedChequeId",this.depositeDetail.id),t.append("Image",this.uploadedFile.file),this.depositservice.uploadChequeImage(t).subscribe({next:n=>{n.isSuccess&&(this.responseModal("success","Cheque image saved successfully!"),this.uploadedFile=null,this.getDepositDetail())},error:n=>{this.responseModal("error",n?.error?.errors[0].errorMessageEn||n?.error?.errors[0].ErrorMessageEn||n?.info)}})}markChequeAsDelivered(){let t=new Qe.y,n=new FormData;n.append("depositedChequeId",this.id),n.append("markDelivered",String(this.markAsDelivered)),t=this.depositservice.markDelivered(n),t.subscribe({next:o=>{o.isSuccess&&(this.responseModal("success","Mark as delivered to customer successfully!"),this._router.navigateByUrl("/deposit-cheque"))},error:o=>{this.responseModal("error",o?.error?.errors[0].errorMessageEn||o?.error?.errors[0].ErrorMessageEn||o?.info)}})}save(t){let n=new Qe.y,o=new FormData;o.append("depositedChequeId",this.id);let l=this.depositeDetail?.status;if(l==this.chequeStatusEnum.PendingPostpone||l==this.chequeStatusEnum.PendingReplace||l==b.PendingReDeposit||l==this.chequeStatusEnum.PendingWithdraw){const s=this.modalService.open(va,{size:"xl"});return s.componentInstance.data={...this.depositeDetail,cusAction:t},void s.componentInstance.eventData.subscribe({next:r=>{r.success&&(this.getDepositDetail(),this.getData())}})}n=this.depositservice.confirmChequeAction(o),n.subscribe({next:s=>{s.isSuccess&&(this.getDepositDetail(),this.responseModal("success","Action successfully done."))},error:s=>{this.responseModal("error",s?.error?.errors[0].errorMessageEn||s?.error?.errors[0].ErrorMessageEn||s?.info)}})}responseModal(t,n){const o=this.modalService.open(M.e);o.componentInstance.type=t,o.componentInstance.message=n}getUserDetails(){this._authService.getLoggedUserDetails().subscribe(t=>{this.userDetails=t?.data})}ngOnDestroy(){this.headerService.selecteddeposit=2,this._router.url.includes("/deposit-cheque")||localStorage.removeItem("chequeFilters")}getDepositDetail(){this.loading=!0,this.depositservice.getChequeDetails(this.id).subscribe(t=>{if(t){this.depositeDetail=t.data||{};let n=this.depositeDetail?.chequeImages;this.markAsDelivered=this.depositeDetail?.markDelivered,n?.length>0&&(this.depositeDetail.chequeImages=this.depositeDetail?.chequeImages.map(o=>({...o,fileExt:this.getFileType(o?.imagePath).toLowerCase()})))}}).add(()=>this.loading=!1)}getFileType(t){return t?.split(".").pop()}viewMore(){this.activityLog=this.masterActivityLog}viewLess(){this.activityLog=[];let t=this.masterActivityLog.length>0?this.masterActivityLog[0]:null;t&&this.activityLog.push(t)}getData(){const t=this.depositservice.getChequesActionsLog(this.id),n=this.depositservice.getLookups("","lookupTypeId=28&pageSize=1000"),o=this.depositservice.getLookups("","lookupTypeId=29&pageSize=1000");(0,B.D)([t,n,o]).subscribe(([l,s,r])=>{if(l){this.masterActivityLog=l.data||[];let c=this.masterActivityLog.length>0?this.masterActivityLog[0]:null;c&&this.activityLog.push(c)}r&&(this.actionList=r.data||[])},l=>{console.error(l)},()=>{this.loading=!1})}depositDetail(t){let n=this.actionList.find(o=>o.id==t);29002==t?this.openModalTrigger(n,"Returne Cheque",!0,!0):29001==t?this.openModalTrigger(n,"Bounce Cheque",!0,!0):29003==t||29011==t?this.replace(n):29004==t?this.openModalTrigger(n,"Re-deposited Cheque",!0,!0):29017==t?this.openModalTrigger(n,"Pay In Cash",!0,!0):29006==t&&this.openModalTrigger(n,"Collect Cheque",!0,!1)}openModalTrigger(t,n,o,l){const s=this.modalService.open(me,{backdrop:"static",keyboard:!1,size:"lg"});s.componentInstance.details=[this.depositeDetail],s.componentInstance.title=n,s.componentInstance.isConfirmShow=o,s.componentInstance.detailShow=l,s.componentInstance.actionType=t,s.componentInstance.sendtoLoadData.subscribe(r=>{r&&this.ngOnInit(),console.log("resendtoLoadDatasult",r),this.modalService.dismissAll()})}depositDetailModal(t){this.depositservice.getChequeActionDetails(this.id,t.actionId).subscribe({next:n=>{if(n.isSuccess)if(29002==t?.actionId||29013==t?.actionId)this.openDetailModal(n.data,29002==t?.actionId?"Withdrawn":29013==t?.actionId&&"Pending Withdrawn",!0,!0);else if(29001==t?.actionId)this.openDetailModal(n.data,"Bounced",!0,!0);else if(29003==t?.actionId)this.replaceView(n.data);else if(29004==t?.actionId)this.openDetailModal(n.data,"Re-deposited",!0,!0);else if(29010==t?.actionId||29014==t?.actionId||29017==t?.actionId){let o="";29010==t?.actionId?o="Deposited":29014==t?.actionId?o="Pending Replace":29017==t?.actionId&&(o="Pay In Cash"),this.openDetailModal({...n.data,chqActionId:t.actionId},o,!0,!0)}else 29006==t?.actionId?this.openDetailModal(n.data,"Collected",!0,!0):29011!=t?.actionId&&29015!=t?.actionId||this.openDetailModal(n.data,29011==t?.actionId?"Postpone":29015==t?.actionId&&"Pending Postpone",!0,!0);else{const o=n?.errors;this.toastrService.error(o.length?o.join("<br>"):"Failed!","",{enableHtml:!0})}},error:n=>{const o=n?.error?.errors?.map(l=>l.ErrorMessageEn)||[];this.toastrService.error(o.length?o.join("<br>"):"Failed!","",{enableHtml:!0})}})}openDetailModal(t,n,o,l){const s=this.modalService.open(ha,{backdrop:"static",keyboard:!1,size:"lg"});s.componentInstance.details=t,s.componentInstance.title=n,s.componentInstance.isConfirmShow=o,s.componentInstance.detailShow=l,s.componentInstance.sendtoLoadData.subscribe(r=>{console.log("resendtoLoadDatasult",r),this.modalService.dismissAll()})}replace(t){const o=this.modalService.open(29003==t.id&&ae||xe,{backdrop:"static",keyboard:!1,size:"xl"});o.componentInstance.details=[this.depositeDetail],o.componentInstance.actionType=t,o.componentInstance.sendtoLoadData.subscribe(l=>{l&&this.ngOnInit(),console.log("resendtoLoadDatasult",l),this.modalService.dismissAll()})}replaceView(t){const n=this.modalService.open(le,{backdrop:"static",keyboard:!1,size:"xl"});let o=[];if(t){let l=JSON.parse(JSON.stringify(t));l={...t,...t?.replacedCheque},o.push({id:1,name:"V2 Replace Cheque Details",children:[l]}),o.push({id:2,name:"V1 Cheque Details",children:[t]})}n.componentInstance.replacedCheque=o,n.componentInstance.details=t,n.componentInstance.selectedCheque=o[0],n.componentInstance.sendtoLoadData.subscribe(l=>{console.log("resendtoLoadDatasult",l),this.modalService.dismissAll()})}activeTabs(t){return!(!this.masterActivityLog.find(o=>o.statusId==t.id)&&t.id!=this.depositeDetail?.statusObj?.lookupId)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(y.gz),e.Y36(te.e),e.Y36(_e.r),e.Y36(y.F0),e.Y36(x.FF),e.Y36(Z),e.Y36(be.W),e.Y36(ne._W))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-deposit-cheque-detail"]],viewQuery:function(t,n){if(1&t&&e.Gf(Ta,5),2&t){let o;e.iGM(o=e.CRH())&&(n.chequeImageFileRef=o.first)}},decls:100,vars:47,consts:[[1,"cr-card"],[1,"top-heading"],["ngbDropdown","","container","body",1,"d-inline-block"],[3,"ngSwitch"],[4,"ngSwitchCase"],["ngbDropdownMenu","",1,"dropdown-menu-end"],[4,"ngSwitchDefault"],[1,"card-head","grid-container"],[1,"title"],[1,"card-content"],[1,"grid-container","mb-3"],[4,"ngIf","ngIfElse"],["banks",""],[4,"ngIf"],[1,"wizard-form-body"],[1,"main-content"],[1,"top-heading","d-flex","align-items-center","justify-content-start","gap-3"],["class","form-check",4,"ngIf"],[1,"cheque-life-cycle","d-flex","justify-content-center"],["class","d-flex cycle-item cursor-pointer flex-grow-1 align-items-center justify-content-center",3,"flex-grow-1","click",4,"ngFor","ngForOf"],[1,"wizard-content","banner-slider"],[1,"d-flex","align-items-center","gap-2"],[1,"d-flex","gap-3"],[1,"file-uploader-sm","d-flex","gap-2","justify-content-center","align-items-center",3,"click"],["height","30","src","assets/images/uploader.png"],[1,"font-14","mb-0"],[3,"data",4,"ngIf"],[3,"file","download",4,"ngIf"],["type","file","hidden","","accept",".png,.jpeg,.jpg,.pdf",3,"change"],["chequeImageFileRef",""],["disabled","",1,"btn"],["class","no-image-display",4,"ngIf"],["id","carouselExampleIndicators","class","carousel slide","data-bs-ride","carousel",4,"ngIf"],[1,"o-scroll"],[1,"activity-log-card"],["class","row",4,"ngFor","ngForOf"],["class","flex-end-row mt-2 mb-2",3,"click",4,"ngIf"],[1,"bottom-buttons"],["type","button","routerLink","/deposit-cheque",1,"btn","btn-cancel"],["type","button","class","btn btn-add ms-2",3,"click",4,"ngIf"],["class","d-flex gap-2 ms-2",4,"ngIf"],["ngbDropdownToggle","",1,"d-inline-flex","justify-content-center",2,"width","20px"],[1,"fa-solid","fa-ellipsis-v","font-20","cursor-pointer"],["ngbDropdownItem","",1,"btn",3,"click"],["height","25","width","25",3,"src"],[1,"row","mt-4"],[1,"col-2"],[1,"font-12","fw-600","mb-2"],[1,"m-0"],[1,"row","align-items-end"],[1,"col-3"],[1,"fw-600","mb-2"],["type","text","placeholder","Cheque Receiving Date","bsDatepicker","","placement","bottom",1,"form-control",2,"height","46px",3,"formControl","bsConfig"],["type","text","placeholder","Customer Delivery Date","bsDatepicker","","placement","bottom",1,"form-control",2,"height","46px",3,"formControl","bsConfig"],["type","button",1,"btn","btn-add",3,"click"],[1,"col-12"],[3,"control","errorMessages"],[1,"form-check"],["type","checkbox","value","","id","madtc",1,"form-check-input",3,"ngModel","ngModelChange"],["for","madtc",1,"form-check-label"],[1,"d-flex","cycle-item","cursor-pointer","flex-grow-1","align-items-center","justify-content-center",3,"click"],[1,"d-flex","flex-column","align-items-center","gap-2","acion-name-image"],[1,"action-icon"],["src","/assets/images/deposited.png"],[1,"action-heading"],["class","log-line",4,"ngIf"],[1,"log-line"],[3,"data"],[3,"file","download"],[1,"no-image-display"],["src","https://cdn.dribbble.com/users/1785628/screenshots/5605512/media/097297f8e21d501ba45d7ce437ed77bd.gif","alt",""],[1,"text-center"],["id","carouselExampleIndicators","data-bs-ride","carousel",1,"carousel","slide"],[1,"row"],[1,"col-lg-1"],["type","button","data-bs-target","#carouselExampleIndicators","data-bs-slide","prev",1,"carousel-control-prev"],["aria-hidden","true",1,"carousel-control-prev-icon"],[1,"visually-hidden"],[1,"col-lg-10"],[1,"carousel-inner"],["class","carousel-item",3,"active",4,"ngFor","ngForOf"],["type","button","data-bs-target","#carouselExampleIndicators","data-bs-slide","next",1,"carousel-control-next"],["aria-hidden","true",1,"carousel-control-next-icon"],[1,"carousel-item"],["otherType",""],[1,"d-flex","justify-content-center","align-items-center","h-100"],["target","_blank",1,"btn","btn-add",3,"href"],["alt","...",1,"d-block","w-100",3,"src"],[1,"col-1"],[1,"number"],[1,"flex-end-row","mt-2","mb-2",3,"click"],[1,"text-end","view-more"],[1,"hand-cursor"],["type","button",1,"btn","btn-add","ms-2",3,"click"],[1,"d-flex","gap-2","ms-2"]],template:function(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"h5"),e._uU(3,"Cheque Details"),e.qZA(),e.TgZ(4,"div",2),e.ynx(5,3),e.YNc(6,ya,5,4,"ng-container",4),e.YNc(7,Ma,7,6,"ng-container",4),e.BQk(),e.TgZ(8,"div",5),e.ynx(9,3),e.YNc(10,Qa,4,3,"ng-container",4),e.YNc(11,Ra,4,3,"ng-container",4),e.YNc(12,Pa,3,2,"ng-container",4),e.YNc(13,Ea,4,3,"ng-container",4),e.YNc(14,Va,3,2,"ng-container",4),e.YNc(15,Ga,1,0,"ng-container",6),e.BQk(),e.qZA()()(),e.TgZ(16,"div",0)(17,"div",7)(18,"h6",8),e._uU(19,"Cheque No. "),e.qZA(),e.TgZ(20,"h6",8),e._uU(21,"Customer Name"),e.qZA(),e.TgZ(22,"h6",8),e._uU(23,"Cheque Bank Name"),e.qZA(),e.TgZ(24,"h6",8),e._uU(25,"Due Date"),e.qZA(),e.TgZ(26,"h6",8),e._uU(27,"Amount"),e.qZA(),e.TgZ(28,"h6",8),e._uU(29,"Currency"),e.qZA(),e.TgZ(30,"h6",8),e._uU(31," Amount (JOD)"),e.qZA()(),e.TgZ(32,"div",9)(33,"div",10)(34,"p"),e._uU(35),e.qZA(),e.TgZ(36,"p"),e._uU(37),e._UZ(38,"br"),e._uU(39),e.qZA(),e.YNc(40,za,2,1,"div",11),e.YNc(41,Ka,1,1,"ng-template",null,12,e.W1O),e.TgZ(43,"p"),e._uU(44),e.ALo(45,"date"),e.qZA(),e.TgZ(46,"p"),e._uU(47),e.ALo(48,"number"),e.qZA(),e.TgZ(49,"p"),e._uU(50),e.qZA(),e.TgZ(51,"p"),e._uU(52),e.ALo(53,"number"),e.qZA()(),e.YNc(54,Xa,2,1,"ng-container",13),e.qZA()(),e.YNc(55,nl,2,1,"ng-container",13),e.qZA(),e.TgZ(56,"div",14)(57,"div",15)(58,"div",0)(59,"div",16)(60,"h5"),e._uU(61,"Cheque Life Cycle"),e.qZA(),e.YNc(62,il,4,1,"div",17),e.qZA(),e.TgZ(63,"div",18),e.YNc(64,al,7,4,"div",19),e.qZA()(),e.TgZ(65,"div",0)(66,"div",20)(67,"div",1)(68,"div",21)(69,"h5"),e._uU(70,"V1 Cheque Image"),e.qZA(),e.TgZ(71,"div",22)(72,"div",23),e.NdJ("click",function(){e.CHM(o);const s=e.MAs(79);return e.KtG(s.click())}),e._UZ(73,"img",24),e.TgZ(74,"h4",25),e._uU(75,"Upload cheque image"),e.qZA()(),e.YNc(76,sl,1,3,"view-file",26),e.YNc(77,rl,1,2,"view-file",27),e.qZA(),e.TgZ(78,"input",28,29),e.NdJ("change",function(s){return n.onFileSelected(s)}),e.qZA()(),e.TgZ(80,"button",30),e._uU(81),e.qZA()(),e.YNc(82,cl,4,0,"div",31),e.YNc(83,_l,15,1,"div",32),e.qZA()(),e.TgZ(84,"div",0)(85,"div",1)(86,"h5"),e._uU(87,"Activity log"),e.qZA(),e.TgZ(88,"h6"),e._uU(89),e.qZA()(),e.TgZ(90,"div",33)(91,"div",34),e.YNc(92,hl,31,12,"div",35),e.qZA()(),e.YNc(93,gl,4,0,"div",36),e.YNc(94,ml,4,0,"div",36),e.qZA()()(),e.TgZ(95,"div",37)(96,"button",38),e._uU(97,"Close"),e.qZA(),e.YNc(98,fl,2,0,"button",39),e.YNc(99,Cl,5,0,"div",40),e.qZA()}if(2&t){const o=e.MAs(42);e.xp6(5),e.Q6J("ngSwitch",null==n.userDetails||null==n.userDetails.role?null:n.userDetails.role.roleId),e.xp6(1),e.Q6J("ngSwitchCase",46),e.xp6(1),e.Q6J("ngSwitchCase",47),e.xp6(2),e.Q6J("ngSwitch",null==n.depositeDetail?null:n.depositeDetail.status),e.xp6(1),e.Q6J("ngSwitchCase",n.chequeStatusEnum.Deposited),e.xp6(1),e.Q6J("ngSwitchCase",n.chequeStatusEnum.ReDeposited),e.xp6(1),e.Q6J("ngSwitchCase",n.chequeStatusEnum.Bounced),e.xp6(1),e.Q6J("ngSwitchCase",n.chequeStatusEnum.Postponed),e.xp6(1),e.Q6J("ngSwitchCase",n.chequeStatusEnum.Withdrawn),e.xp6(21),e.Oqu((null==n.depositeDetail?null:n.depositeDetail.chequeNo)||"---"),e.xp6(2),e.hij("",null==n.depositeDetail||null==n.depositeDetail.customer?null:n.depositeDetail.customer.customerName," "),e.xp6(2),e.Oqu(null==n.depositeDetail||null==n.depositeDetail.customer?null:n.depositeDetail.customer.mobile),e.xp6(1),e.Q6J("ngIf",null==n.depositeDetail||null==n.depositeDetail.bank?null:n.depositeDetail.bank.translations)("ngIfElse",o),e.xp6(4),e.Oqu(e.xi3(45,38,null==n.depositeDetail?null:n.depositeDetail.chequeDate,"dd MMM yyyy")||"---"),e.xp6(3),e.Oqu(e.xi3(48,41,null==n.depositeDetail?null:n.depositeDetail.collectedAmount,".3")||"---"),e.xp6(3),e.AsE("",null==n.depositeDetail||null==n.depositeDetail.currency[0]?null:n.depositeDetail.currency[0].lookupName," (",(null==n.depositeDetail||null==n.depositeDetail.currency[0]?null:n.depositeDetail.currency[0].currencyRate)||1,")"),e.xp6(2),e.Oqu(e.xi3(53,44,null==n.depositeDetail?null:n.depositeDetail.chequeCollectionJod,".3")||"---"),e.xp6(2),e.Q6J("ngIf",n._authService.getUserRole.roleId==n.userRoleEnum.CreditAndCollection),e.xp6(1),e.Q6J("ngIf",n._authService.getUserRole.roleId==n.userRoleEnum.CreditAndCollection),e.xp6(7),e.Q6J("ngIf",n.withAndReplaceChequeActions.includes(null==n.depositeDetail?null:n.depositeDetail.status)),e.xp6(2),e.Q6J("ngForOf",n.masterActivityLog),e.xp6(12),e.Q6J("ngIf",null==n.uploadedFile?null:n.uploadedFile.file),e.xp6(1),e.Q6J("ngIf",null==n.depositeDetail?null:n.depositeDetail.actionFile),e.xp6(3),e.Udp("color",null==n.depositeDetail||null==n.depositeDetail.statusObj?null:n.depositeDetail.statusObj.lookupTextColor)("background-color",null==n.depositeDetail||null==n.depositeDetail.statusObj?null:n.depositeDetail.statusObj.lookupBGColor),e.xp6(1),e.hij(" ",n.depositeDetail&&null!=n.depositeDetail&&n.depositeDetail.statusObj.translations?null==n.depositeDetail||null==n.depositeDetail.statusObj.translations||null==n.depositeDetail.statusObj.translations[0]?null:n.depositeDetail.statusObj.translations[0].lookupName:"-"," "),e.xp6(1),e.Q6J("ngIf",0==(null==n.depositeDetail?null:n.depositeDetail.chequeImages.length)),e.xp6(1),e.Q6J("ngIf",(null==n.depositeDetail?null:n.depositeDetail.chequeImages.length)>0),e.xp6(6),e.hij(" Number of Actions : ",n.masterActivityLog.length," "),e.xp6(3),e.Q6J("ngForOf",n.activityLog),e.xp6(1),e.Q6J("ngIf",1==n.activityLog.length&&n.masterActivityLog.length>1),e.xp6(1),e.Q6J("ngIf",n.activityLog.length>1),e.xp6(4),e.Q6J("ngIf",n.withAndReplaceChequeActions.includes(null==n.depositeDetail?null:n.depositeDetail.status)),e.xp6(1),e.Q6J("ngIf",46==(null==n.userDetails||null==n.userDetails.role?null:n.userDetails.role.roleId)&&n.pendingChequesActions.includes(null==n.depositeDetail?null:n.depositeDetail.status))}},dependencies:[p.sg,p.O5,p.RF,p.n9,p.ED,y.rH,u.Fj,u.Wl,u.JJ,u.On,u.oH,x.jt,x.iD,x.Vi,x.TH,q.Np,q.Y5,k,oe.L,p.JJ,p.uU],styles:[".grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:.7fr 1.5fr repeat(5,1fr);gap:10px}.dropdown-toggle[_ngcontent-%COMP%]:after{border:none}.cheque-life-cycle[_ngcontent-%COMP%]   .cycle-item[_ngcontent-%COMP%]   .action-icon[_ngcontent-%COMP%]{background-color:#ffd2d7;height:40px;width:40px;display:flex;align-items:center;justify-content:center;border-radius:50%;padding:3px}.cheque-life-cycle[_ngcontent-%COMP%]   .cycle-item[_ngcontent-%COMP%]   .action-heading[_ngcontent-%COMP%]{color:#2f73b8;font-weight:700;font-size:14px}.cheque-life-cycle[_ngcontent-%COMP%]   .cycle-item[_ngcontent-%COMP%]   .acion-name-image[_ngcontent-%COMP%]{flex-basis:250px}.cheque-life-cycle[_ngcontent-%COMP%]   .cycle-item[_ngcontent-%COMP%]   .log-line[_ngcontent-%COMP%]{height:2px;background:red;width:100%}"]}),i})()},{path:"replace",component:ae},{path:"replace-view",component:le}];let bl=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[y.Bz.forChild(xl),y.Bz]}),i})(),ql=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[p.ez,Pe.Y4,W.JF,W.Ed,bl,Ye.m,S.vQ]}),i})()}}]);